"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["plugins_plugin-chart-pivot-table_src_PivotTableChart_tsx"],{

/***/ "./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This icon file is generated automatically.\nvar MinusSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"minus-square\", \"theme\": \"outlined\" };\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MinusSquareOutlined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMtc3ZnL2VzL2Fzbi9NaW51c1NxdWFyZU91dGxpbmVkLmpzLmpzIiwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zLXN2Zy9lcy9hc24vTWludXNTcXVhcmVPdXRsaW5lZC5qcz85ZGQ0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaWNvbiBmaWxlIGlzIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5LlxudmFyIE1pbnVzU3F1YXJlT3V0bGluZWQgPSB7IFwiaWNvblwiOiB7IFwidGFnXCI6IFwic3ZnXCIsIFwiYXR0cnNcIjogeyBcInZpZXdCb3hcIjogXCI2NCA2NCA4OTYgODk2XCIsIFwiZm9jdXNhYmxlXCI6IFwiZmFsc2VcIiB9LCBcImNoaWxkcmVuXCI6IFt7IFwidGFnXCI6IFwicGF0aFwiLCBcImF0dHJzXCI6IHsgXCJkXCI6IFwiTTMyOCA1NDRoMzY4YzQuNCAwIDgtMy42IDgtOHYtNDhjMC00LjQtMy42LTgtOC04SDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHpcIiB9IH0sIHsgXCJ0YWdcIjogXCJwYXRoXCIsIFwiYXR0cnNcIjogeyBcImRcIjogXCJNODgwIDExMkgxNDRjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjczNmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg3MzZjMTcuNyAwIDMyLTE0LjMgMzItMzJWMTQ0YzAtMTcuNy0xNC4zLTMyLTMyLTMyem0tNDAgNzI4SDE4NFYxODRoNjU2djY1NnpcIiB9IH1dIH0sIFwibmFtZVwiOiBcIm1pbnVzLXNxdWFyZVwiLCBcInRoZW1lXCI6IFwib3V0bGluZWRcIiB9O1xuZXhwb3J0IGRlZmF1bHQgTWludXNTcXVhcmVPdXRsaW5lZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This icon file is generated automatically.\nvar PlusSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"plus-square\", \"theme\": \"outlined\" };\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PlusSquareOutlined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMtc3ZnL2VzL2Fzbi9QbHVzU3F1YXJlT3V0bGluZWQuanMuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMtc3ZnL2VzL2Fzbi9QbHVzU3F1YXJlT3V0bGluZWQuanM/NWRjOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGljb24gZmlsZSBpcyBnZW5lcmF0ZWQgYXV0b21hdGljYWxseS5cbnZhciBQbHVzU3F1YXJlT3V0bGluZWQgPSB7IFwiaWNvblwiOiB7IFwidGFnXCI6IFwic3ZnXCIsIFwiYXR0cnNcIjogeyBcInZpZXdCb3hcIjogXCI2NCA2NCA4OTYgODk2XCIsIFwiZm9jdXNhYmxlXCI6IFwiZmFsc2VcIiB9LCBcImNoaWxkcmVuXCI6IFt7IFwidGFnXCI6IFwicGF0aFwiLCBcImF0dHJzXCI6IHsgXCJkXCI6IFwiTTMyOCA1NDRoMTUydjE1MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjU0NGgxNTJjNC40IDAgOC0zLjYgOC04di00OGMwLTQuNC0zLjYtOC04LThINTQ0VjMyOGMwLTQuNC0zLjYtOC04LThoLTQ4Yy00LjQgMC04IDMuNi04IDh2MTUySDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHpcIiB9IH0sIHsgXCJ0YWdcIjogXCJwYXRoXCIsIFwiYXR0cnNcIjogeyBcImRcIjogXCJNODgwIDExMkgxNDRjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjczNmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg3MzZjMTcuNyAwIDMyLTE0LjMgMzItMzJWMTQ0YzAtMTcuNy0xNC4zLTMyLTMyLTMyem0tNDAgNzI4SDE4NFYxODRoNjU2djY1NnpcIiB9IH1dIH0sIFwibmFtZVwiOiBcInBsdXMtc3F1YXJlXCIsIFwidGhlbWVcIjogXCJvdXRsaW5lZFwiIH07XG5leHBvcnQgZGVmYXVsdCBQbHVzU3F1YXJlT3V0bGluZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js":
/*!************************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/MinusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar MinusSquareOutlined = function MinusSquareOutlined(props, ref) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], Object.assign({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n  }));\n};\n\nMinusSquareOutlined.displayName = 'MinusSquareOutlined';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(MinusSquareOutlined));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvTWludXNTcXVhcmVPdXRsaW5lZC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9AYW50LWRlc2lnbi9pY29ucy9lcy9pY29ucy9NaW51c1NxdWFyZU91dGxpbmVkLmpzPzgxNDciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR0VORVJBVEUgQlkgLi9zY3JpcHRzL2dlbmVyYXRlLnRzXG4vLyBET04gTk9UIEVESVQgSVQgTUFOVUFMTFlcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNaW51c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL01pbnVzU3F1YXJlT3V0bGluZWRcIjtcbmltcG9ydCBBbnRkSWNvbiBmcm9tICcuLi9jb21wb25lbnRzL0FudGRJY29uJztcblxudmFyIE1pbnVzU3F1YXJlT3V0bGluZWQgPSBmdW5jdGlvbiBNaW51c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQW50ZEljb24sIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgcmVmOiByZWYsXG4gICAgaWNvbjogTWludXNTcXVhcmVPdXRsaW5lZFN2Z1xuICB9KSk7XG59O1xuXG5NaW51c1NxdWFyZU91dGxpbmVkLmRpc3BsYXlOYW1lID0gJ01pbnVzU3F1YXJlT3V0bGluZWQnO1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QuZm9yd2FyZFJlZihNaW51c1NxdWFyZU91dGxpbmVkKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/PlusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar PlusSquareOutlined = function PlusSquareOutlined(props, ref) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], Object.assign({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n  }));\n};\n\nPlusSquareOutlined.displayName = 'PlusSquareOutlined';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(PlusSquareOutlined));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zL2VzL2ljb25zL1BsdXNTcXVhcmVPdXRsaW5lZC5qcz9jNDY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdFTkVSQVRFIEJZIC4vc2NyaXB0cy9nZW5lcmF0ZS50c1xuLy8gRE9OIE5PVCBFRElUIElUIE1BTlVBTExZXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUGx1c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL1BsdXNTcXVhcmVPdXRsaW5lZFwiO1xuaW1wb3J0IEFudGRJY29uIGZyb20gJy4uL2NvbXBvbmVudHMvQW50ZEljb24nO1xuXG52YXIgUGx1c1NxdWFyZU91dGxpbmVkID0gZnVuY3Rpb24gUGx1c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQW50ZEljb24sIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgcmVmOiByZWYsXG4gICAgaWNvbjogUGx1c1NxdWFyZU91dGxpbmVkU3ZnXG4gIH0pKTtcbn07XG5cblBsdXNTcXVhcmVPdXRsaW5lZC5kaXNwbGF5TmFtZSA9ICdQbHVzU3F1YXJlT3V0bGluZWQnO1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QuZm9yd2FyZFJlZihQbHVzU3F1YXJlT3V0bGluZWQpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx":
/*!******************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx ***!
  \******************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _TableRenderers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableRenderers */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\nclass PivotTable extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  render() {\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer, this.props);\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nPivotTable.propTypes = _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.propTypes;\nPivotTable.defaultProps = _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.defaultProps;const _default =\n\nPivotTable;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PivotTable, \"PivotTable\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9QaXZvdFRhYmxlLmpzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBTUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvUGl2b3RUYWJsZS5qc3g/OWY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQaXZvdERhdGEgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5pbXBvcnQgeyBUYWJsZVJlbmRlcmVyIH0gZnJvbSAnLi9UYWJsZVJlbmRlcmVycyc7XG5cbmNsYXNzIFBpdm90VGFibGUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiA8VGFibGVSZW5kZXJlciB7Li4udGhpcy5wcm9wc30gLz47XG4gIH1cbn1cblxuUGl2b3RUYWJsZS5wcm9wVHlwZXMgPSBQaXZvdERhdGEucHJvcFR5cGVzO1xuUGl2b3RUYWJsZS5kZWZhdWx0UHJvcHMgPSBQaXZvdERhdGEuZGVmYXVsdFByb3BzO1xuXG5leHBvcnQgZGVmYXVsdCBQaXZvdFRhYmxlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js":
/*!*************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js ***!
  \*************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Styles\": () => (/* binding */ Styles)\n/* harmony export */ });\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.styled.div`\n  table.pvtTable {\n    position: relative;\n    font-size: 12px;\n    text-align: left;\n    margin-top: 3px;\n    margin-left: 3px;\n    border-collapse: separate;\n    font-family: 'Inter', Helvetica, Arial, sans-serif;\n    line-height: 1.4;\n  }\n\n  table thead {\n    position: sticky;\n    top: 0;\n  }\n\n  table.pvtTable thead tr th,\n  table.pvtTable tbody tr th {\n    background-color: #fff;\n    border-top: 1px solid #e0e0e0;\n    border-left: 1px solid #e0e0e0;\n    font-size: 12px;\n    padding: 5px;\n    font-weight: normal;\n  }\n\n  table.pvtTable tbody tr.pvtRowTotals {\n    position: sticky;\n    bottom: 0;\n  }\n\n  table.pvtTable thead tr:last-of-type th,\n  table.pvtTable thead tr:first-of-type th.pvtTotalLabel,\n  table.pvtTable thead tr:nth-last-of-type(2) th.pvtColLabel,\n  table.pvtTable thead th.pvtSubtotalLabel,\n  table.pvtTable tbody tr:last-of-type th,\n  table.pvtTable tbody tr:last-of-type td {\n    border-bottom: 1px solid #e0e0e0;\n  }\n\n  table.pvtTable\n    thead\n    tr:last-of-type:not(:only-child)\n    th.pvtAxisLabel\n    ~ th.pvtColLabel,\n  table.pvtTable tbody tr:first-of-type th,\n  table.pvtTable tbody tr:first-of-type td {\n    border-top: none;\n  }\n\n  table.pvtTable tbody tr td:last-of-type,\n  table.pvtTable thead tr th:last-of-type:not(.pvtSubtotalLabel) {\n    border-right: 1px solid #e0e0e0;\n  }\n\n  table.pvtTable\n    thead\n    tr:last-of-type:not(:only-child)\n    th.pvtAxisLabel\n    + .pvtTotalLabel {\n    border-right: none;\n  }\n\n  table.pvtTable tr th.active {\n    background-color: #d9dbe4;\n  }\n\n  table.pvtTable .pvtTotalLabel {\n    text-align: right;\n    font-weight: bold;\n  }\n\n  table.pvtTable .pvtSubtotalLabel {\n    font-weight: bold;\n  }\n\n  table.pvtTable tbody tr td {\n    color: #2a3f5f;\n    padding: 5px;\n    background-color: #fff;\n    border-top: 1px solid #e0e0e0;\n    border-left: 1px solid #e0e0e0;\n    vertical-align: top;\n    text-align: right;\n  }\n\n  table.pvtTable tbody tr th.pvtRowLabel {\n    vertical-align: baseline;\n  }\n\n  .pvtTotal,\n  .pvtGrandTotal {\n    font-weight: bold;\n  }\n\n  table.pvtTable tbody tr td.pvtRowTotal {\n    vertical-align: middle;\n  }\n\n  .toggle-wrapper {\n    white-space: nowrap;\n  }\n\n  .toggle-wrapper > .toggle-val {\n    white-space: normal;\n  }\n\n  .toggle {\n    padding-right: 4px;\n    cursor: pointer;\n  }\n\n  .hoverable:hover {\n    background-color: #eceef2;\n    cursor: pointer;\n  }\n`;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9TdHlsZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BsdWdpbnMvcGx1Z2luLWNoYXJ0LXBpdm90LXRhYmxlL3NyYy9yZWFjdC1waXZvdHRhYmxlL1N0eWxlcy5qcz8wOGFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuXG5leHBvcnQgY29uc3QgU3R5bGVzID0gc3R5bGVkLmRpdmBcbiAgdGFibGUucHZ0VGFibGUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICBtYXJnaW4tdG9wOiAzcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDNweDtcbiAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xuICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gIH1cblxuICB0YWJsZSB0aGVhZCB7XG4gICAgcG9zaXRpb246IHN0aWNreTtcbiAgICB0b3A6IDA7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSB0aGVhZCB0ciB0aCxcbiAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGgge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGUwZTA7XG4gICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZTBlMGUwO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBwYWRkaW5nOiA1cHg7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgfVxuXG4gIHRhYmxlLnB2dFRhYmxlIHRib2R5IHRyLnB2dFJvd1RvdGFscyB7XG4gICAgcG9zaXRpb246IHN0aWNreTtcbiAgICBib3R0b206IDA7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSB0aGVhZCB0cjpsYXN0LW9mLXR5cGUgdGgsXG4gIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyOmZpcnN0LW9mLXR5cGUgdGgucHZ0VG90YWxMYWJlbCxcbiAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHI6bnRoLWxhc3Qtb2YtdHlwZSgyKSB0aC5wdnRDb2xMYWJlbCxcbiAgdGFibGUucHZ0VGFibGUgdGhlYWQgdGgucHZ0U3VidG90YWxMYWJlbCxcbiAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6bGFzdC1vZi10eXBlIHRoLFxuICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0cjpsYXN0LW9mLXR5cGUgdGQge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTBlMGUwO1xuICB9XG5cbiAgdGFibGUucHZ0VGFibGVcbiAgICB0aGVhZFxuICAgIHRyOmxhc3Qtb2YtdHlwZTpub3QoOm9ubHktY2hpbGQpXG4gICAgdGgucHZ0QXhpc0xhYmVsXG4gICAgfiB0aC5wdnRDb2xMYWJlbCxcbiAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6Zmlyc3Qtb2YtdHlwZSB0aCxcbiAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6Zmlyc3Qtb2YtdHlwZSB0ZCB7XG4gICAgYm9yZGVyLXRvcDogbm9uZTtcbiAgfVxuXG4gIHRhYmxlLnB2dFRhYmxlIHRib2R5IHRyIHRkOmxhc3Qtb2YtdHlwZSxcbiAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHIgdGg6bGFzdC1vZi10eXBlOm5vdCgucHZ0U3VidG90YWxMYWJlbCkge1xuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlMGUwZTA7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZVxuICAgIHRoZWFkXG4gICAgdHI6bGFzdC1vZi10eXBlOm5vdCg6b25seS1jaGlsZClcbiAgICB0aC5wdnRBeGlzTGFiZWxcbiAgICArIC5wdnRUb3RhbExhYmVsIHtcbiAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSB0ciB0aC5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNkOWRiZTQ7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSAucHZ0VG90YWxMYWJlbCB7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSAucHZ0U3VidG90YWxMYWJlbCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0ZCB7XG4gICAgY29sb3I6ICMyYTNmNWY7XG4gICAgcGFkZGluZzogNXB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMGUwZTA7XG4gICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZTBlMGUwO1xuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0aC5wdnRSb3dMYWJlbCB7XG4gICAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xuICB9XG5cbiAgLnB2dFRvdGFsLFxuICAucHZ0R3JhbmRUb3RhbCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cblxuICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0ZC5wdnRSb3dUb3RhbCB7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgfVxuXG4gIC50b2dnbGUtd3JhcHBlciB7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgfVxuXG4gIC50b2dnbGUtd3JhcHBlciA+IC50b2dnbGUtdmFsIHtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICB9XG5cbiAgLnRvZ2dsZSB7XG4gICAgcGFkZGluZy1yaWdodDogNHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuXG4gIC5ob3ZlcmFibGU6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlY2VlZjI7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5gO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx":
/*!**********************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx ***!
  \**********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TableRenderer\": () => (/* binding */ TableRenderer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _Styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Styles */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\n\nconst parseLabel = (value) => {\n  if (typeof value === 'number' || typeof value === 'string') {\n    return value;\n  }\n  return String(value);\n};\n\nfunction displayHeaderCell(\nneedToggle,\nArrowIcon,\nonArrowClick,\nvalue,\nnamesMapping)\n{\n  const name = namesMapping[value] || value;\n  return needToggle ?\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"toggle-wrapper\" },\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", {\n    role: \"button\",\n    tabIndex: \"0\",\n    className: \"toggle\",\n    onClick: onArrowClick },\n\n  ArrowIcon),\n\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"toggle-val\" }, parseLabel(name))) :\n\n\n  parseLabel(name);\n\n}\n\nclass TableRenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n\n    // We need state to record which entries are collapsed and which aren't.\n    // This is an object with flat-keys indicating if the corresponding rows\n    // should be collapsed.\n    this.state = { collapsedRows: {}, collapsedCols: {} };\n\n    this.clickHeaderHandler = this.clickHeaderHandler.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  getBasePivotSettings() {\n    // One-time extraction of pivot settings that we'll use throughout the render.\n\n    const { props } = this;\n    const colAttrs = props.cols;\n    const rowAttrs = props.rows;\n\n    const tableOptions = {\n      rowTotals: true,\n      colTotals: true,\n      ...props.tableOptions };\n\n    const rowTotals = tableOptions.rowTotals || colAttrs.length === 0;\n    const colTotals = tableOptions.colTotals || rowAttrs.length === 0;\n\n    const namesMapping = props.namesMapping || {};\n    const subtotalOptions = {\n      arrowCollapsed: '\\u25B2',\n      arrowExpanded: '\\u25BC',\n      ...props.subtotalOptions };\n\n\n    const colSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: rowTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.colSubtotalDisplay };\n\n\n    const rowSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: colTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.rowSubtotalDisplay };\n\n\n    const pivotData = new _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData(props, {\n      rowEnabled: rowSubtotalDisplay.enabled,\n      colEnabled: colSubtotalDisplay.enabled,\n      rowPartialOnTop: rowSubtotalDisplay.displayOnTop,\n      colPartialOnTop: colSubtotalDisplay.displayOnTop });\n\n    const rowKeys = pivotData.getRowKeys();\n    const colKeys = pivotData.getColKeys();\n\n    // Also pre-calculate all the callbacks for cells, etc... This is nice to have to\n    // avoid re-calculations of the call-backs on cell expansions, etc...\n    const cellCallbacks = {};\n    const rowTotalCallbacks = {};\n    const colTotalCallbacks = {};\n    let grandTotalCallback = null;\n    if (tableOptions.clickCallback) {\n      rowKeys.forEach((rowKey) => {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey);\n        if (!(flatRowKey in cellCallbacks)) {\n          cellCallbacks[flatRowKey] = {};\n        }\n        colKeys.forEach((colKey) => {\n          cellCallbacks[flatRowKey][(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)] = this.clickHandler(\n          pivotData,\n          rowKey,\n          colKey);\n\n        });\n      });\n\n      // Add in totals as well.\n      if (rowTotals) {\n        rowKeys.forEach((rowKey) => {\n          rowTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey)] = this.clickHandler(\n          pivotData,\n          rowKey,\n          []);\n\n        });\n      }\n      if (colTotals) {\n        colKeys.forEach((colKey) => {\n          colTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)] = this.clickHandler(\n          pivotData,\n          [],\n          colKey);\n\n        });\n      }\n      if (rowTotals && colTotals) {\n        grandTotalCallback = this.clickHandler(pivotData, [], []);\n      }\n    }\n\n    return {\n      pivotData,\n      colAttrs,\n      rowAttrs,\n      colKeys,\n      rowKeys,\n      rowTotals,\n      colTotals,\n      arrowCollapsed: subtotalOptions.arrowCollapsed,\n      arrowExpanded: subtotalOptions.arrowExpanded,\n      colSubtotalDisplay,\n      rowSubtotalDisplay,\n      cellCallbacks,\n      rowTotalCallbacks,\n      colTotalCallbacks,\n      grandTotalCallback,\n      namesMapping };\n\n  }\n\n  clickHandler(pivotData, rowValues, colValues) {\n    const colAttrs = this.props.cols;\n    const rowAttrs = this.props.rows;\n    const value = pivotData.getAggregator(rowValues, colValues).value();\n    const filters = {};\n    const colLimit = Math.min(colAttrs.length, colValues.length);\n    for (let i = 0; i < colLimit; i += 1) {\n      const attr = colAttrs[i];\n      if (colValues[i] !== null) {\n        filters[attr] = colValues[i];\n      }\n    }\n    const rowLimit = Math.min(rowAttrs.length, rowValues.length);\n    for (let i = 0; i < rowLimit; i += 1) {\n      const attr = rowAttrs[i];\n      if (rowValues[i] !== null) {\n        filters[attr] = rowValues[i];\n      }\n    }\n    return (e) =>\n    this.props.tableOptions.clickCallback(e, value, filters, pivotData);\n  }\n\n  clickHeaderHandler(\n  pivotData,\n  values,\n  attrs,\n  attrIdx,\n  callback,\n  isSubtotal = false,\n  isGrandTotal = false)\n  {\n    const filters = {};\n    for (let i = 0; i <= attrIdx; i += 1) {\n      const attr = attrs[i];\n      filters[attr] = values[i];\n    }\n    return (e) =>\n    callback(\n    e,\n    values[attrIdx],\n    filters,\n    pivotData,\n    isSubtotal,\n    isGrandTotal);\n\n  }\n\n  collapseAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Collapse an entire attribute.\n      e.stopPropagation();\n      const keyLen = attrIdx + 1;\n      const collapsed = allKeys.filter((k) => k.length === keyLen).map(_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey);\n\n      const updates = {};\n      collapsed.forEach((k) => {\n        updates[k] = true;\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates } }));\n\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates } }));\n\n      }\n    };\n  }\n\n  expandAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Expand an entire attribute. This implicitly implies expanding all of the\n      // parents as well. It's a bit inefficient but ah well...\n      e.stopPropagation();\n      const updates = {};\n      allKeys.forEach((k) => {\n        for (let i = 0; i <= attrIdx; i += 1) {\n          updates[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(k.slice(0, i + 1))] = false;\n        }\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates } }));\n\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates } }));\n\n      }\n    };\n  }\n\n  toggleRowKey(flatRowKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedRows: {\n          ...state.collapsedRows,\n          [flatRowKey]: !state.collapsedRows[flatRowKey] } }));\n\n\n    };\n  }\n\n  toggleColKey(flatColKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedCols: {\n          ...state.collapsedCols,\n          [flatColKey]: !state.collapsedCols[flatColKey] } }));\n\n\n    };\n  }\n\n  calcAttrSpans(attrArr, numAttrs) {\n    // Given an array of attribute values (i.e. each element is another array with\n    // the value at every level), compute the spans for every attribute value at\n    // every level. The return value is a nested array of the same shape. It has\n    // -1's for repeated values and the span number otherwise.\n\n    const spans = [];\n    // Index of the last new value\n    const li = Array(numAttrs).map(() => 0);\n    let lv = Array(numAttrs).map(() => null);\n    for (let i = 0; i < attrArr.length; i += 1) {\n      // Keep increasing span values as long as the last keys are the same. For\n      // the rest, record spans of 1. Update the indices too.\n      const cv = attrArr[i];\n      const ent = [];\n      let depth = 0;\n      const limit = Math.min(lv.length, cv.length);\n      while (depth < limit && lv[depth] === cv[depth]) {\n        ent.push(-1);\n        spans[li[depth]][depth] += 1;\n        depth += 1;\n      }\n      while (depth < cv.length) {\n        li[depth] = i;\n        ent.push(1);\n        depth += 1;\n      }\n      spans.push(ent);\n      lv = cv;\n    }\n    return spans;\n  }\n\n  renderColHeaderRow(attrName, attrIdx, pivotSettings) {\n    // Render a single row in the column header at the top of the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      colKeys,\n      visibleColKeys,\n      colAttrSpans,\n      rowTotals,\n      arrowExpanded,\n      arrowCollapsed,\n      colSubtotalDisplay,\n      maxColVisible,\n      pivotData,\n      namesMapping } =\n    pivotSettings;\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      dateFormatters } =\n    this.props.tableOptions;\n\n    const spaceCell =\n    attrIdx === 0 && rowAttrs.length !== 0 ?\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      key: \"padding\",\n      colSpan: rowAttrs.length,\n      rowSpan: colAttrs.length,\n      \"aria-hidden\": \"true\" }) :\n\n    null;\n\n    const needToggle =\n    colSubtotalDisplay.enabled && attrIdx !== colAttrs.length - 1;\n    let arrowClickHandle = null;\n    let subArrow = null;\n    if (needToggle) {\n      arrowClickHandle =\n      attrIdx + 1 < maxColVisible ?\n      this.collapseAttr(false, attrIdx, colKeys) :\n      this.expandAttr(false, attrIdx, colKeys);\n      subArrow = attrIdx + 1 < maxColVisible ? arrowExpanded : arrowCollapsed;\n    }\n    const attrNameCell =\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", { key: \"label\", className: \"pvtAxisLabel\" },\n    displayHeaderCell(\n    needToggle,\n    subArrow,\n    arrowClickHandle,\n    attrName,\n    namesMapping));\n\n\n\n\n    const attrValueCells = [];\n    const rowIncrSpan = rowAttrs.length !== 0 ? 1 : 0;\n    // Iterate through columns. Jump over duplicate values.\n    let i = 0;\n    while (i < visibleColKeys.length) {\n      const colKey = visibleColKeys[i];\n      const colSpan = attrIdx < colKey.length ? colAttrSpans[i][attrIdx] : 1;\n      let colLabelClass = 'pvtColLabel';\n      if (attrIdx < colKey.length) {\n        if (\n        highlightHeaderCellsOnHover &&\n        !omittedHighlightHeaderGroups.includes(colAttrs[attrIdx]))\n        {\n          colLabelClass += ' hoverable';\n        }\n        if (\n        highlightedHeaderCells &&\n        Array.isArray(highlightedHeaderCells[colAttrs[attrIdx]]) &&\n        highlightedHeaderCells[colAttrs[attrIdx]].includes(colKey[attrIdx]))\n        {\n          colLabelClass += ' active';\n        }\n\n        const rowSpan = 1 + (attrIdx === colAttrs.length - 1 ? rowIncrSpan : 0);\n        const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey.slice(0, attrIdx + 1));\n        const onArrowClick = needToggle ? this.toggleColKey(flatColKey) : null;\n\n        const headerCellFormattedValue =\n        dateFormatters &&\n        dateFormatters[attrName] &&\n        typeof dateFormatters[attrName] === 'function' ?\n        dateFormatters[attrName](colKey[attrIdx]) :\n        colKey[attrIdx];\n        attrValueCells.push(\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n          className: colLabelClass,\n          key: `colKey-${flatColKey}`,\n          colSpan: colSpan,\n          rowSpan: rowSpan,\n          onClick: this.clickHeaderHandler(\n          pivotData,\n          colKey,\n          this.props.cols,\n          attrIdx,\n          this.props.tableOptions.clickColumnHeaderCallback) },\n\n\n        displayHeaderCell(\n        needToggle,\n        this.state.collapsedCols[flatColKey] ?\n        arrowCollapsed :\n        arrowExpanded,\n        onArrowClick,\n        headerCellFormattedValue,\n        namesMapping)));\n\n\n\n      } else if (attrIdx === colKey.length) {\n        const rowSpan = colAttrs.length - colKey.length + rowIncrSpan;\n        attrValueCells.push(\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n          className: `${colLabelClass} pvtSubtotalLabel`,\n          key: `colKeyBuffer-${(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)}`,\n          colSpan: colSpan,\n          rowSpan: rowSpan,\n          onClick: this.clickHeaderHandler(\n          pivotData,\n          colKey,\n          this.props.cols,\n          attrIdx,\n          this.props.tableOptions.clickColumnHeaderCallback,\n          true) }, \"Subtotal\"));\n\n\n\n\n\n      }\n      // The next colSpan columns will have the same value anyway...\n      i += colSpan;\n    }\n\n    const totalCell =\n    attrIdx === 0 && rowTotals ?\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      key: \"total\",\n      className: \"pvtTotalLabel\",\n      rowSpan: colAttrs.length + Math.min(rowAttrs.length, 1),\n      onClick: this.clickHeaderHandler(\n      pivotData,\n      [],\n      this.props.cols,\n      attrIdx,\n      this.props.tableOptions.clickColumnHeaderCallback,\n      false,\n      true) },\n\n\n    `Total (${this.props.aggregatorName})`) :\n\n    null;\n\n    const cells = [spaceCell, attrNameCell, ...attrValueCells, totalCell];\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: `colAttr-${attrIdx}` }, cells);\n  }\n\n  renderRowHeaderRow(pivotSettings) {\n    // Render just the attribute names of the rows (the actual attribute values\n    // will show up in the individual rows).\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowKeys,\n      arrowCollapsed,\n      arrowExpanded,\n      rowSubtotalDisplay,\n      maxRowVisible,\n      pivotData,\n      namesMapping } =\n    pivotSettings;\n    return (\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: \"rowHdr\" },\n      rowAttrs.map((r, i) => {\n        const needLabelToggle =\n        rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n        let arrowClickHandle = null;\n        let subArrow = null;\n        if (needLabelToggle) {\n          arrowClickHandle =\n          i + 1 < maxRowVisible ?\n          this.collapseAttr(true, i, rowKeys) :\n          this.expandAttr(true, i, rowKeys);\n          subArrow = i + 1 < maxRowVisible ? arrowExpanded : arrowCollapsed;\n        }\n        return (\n          (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", { className: \"pvtAxisLabel\", key: `rowAttr-${i}` },\n          displayHeaderCell(\n          needLabelToggle,\n          subArrow,\n          arrowClickHandle,\n          r,\n          namesMapping)));\n\n\n\n      }),\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n        className: \"pvtTotalLabel\",\n        key: \"padding\",\n        onClick: this.clickHeaderHandler(\n        pivotData,\n        [],\n        this.props.rows,\n        0,\n        this.props.tableOptions.clickRowHeaderCallback,\n        false,\n        true) },\n\n\n      colAttrs.length === 0 ?\n      `Total (${this.props.aggregatorName})` :\n      null)));\n\n\n\n  }\n\n  renderTableRow(rowKey, rowIdx, pivotSettings) {\n    // Render a single row in the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowAttrSpans,\n      visibleColKeys,\n      pivotData,\n      rowTotals,\n      rowSubtotalDisplay,\n      arrowExpanded,\n      arrowCollapsed,\n      cellCallbacks,\n      rowTotalCallbacks,\n      namesMapping } =\n    pivotSettings;\n\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      cellColorFormatters,\n      dateFormatters } =\n    this.props.tableOptions;\n    const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey);\n\n    const colIncrSpan = colAttrs.length !== 0 ? 1 : 0;\n    const attrValueCells = rowKey.map((r, i) => {\n      let valueCellClassName = 'pvtRowLabel';\n      if (\n      highlightHeaderCellsOnHover &&\n      !omittedHighlightHeaderGroups.includes(rowAttrs[i]))\n      {\n        valueCellClassName += ' hoverable';\n      }\n      if (\n      highlightedHeaderCells &&\n      Array.isArray(highlightedHeaderCells[rowAttrs[i]]) &&\n      highlightedHeaderCells[rowAttrs[i]].includes(r))\n      {\n        valueCellClassName += ' active';\n      }\n      const rowSpan = rowAttrSpans[rowIdx][i];\n      if (rowSpan > 0) {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey.slice(0, i + 1));\n        const colSpan = 1 + (i === rowAttrs.length - 1 ? colIncrSpan : 0);\n        const needRowToggle =\n        rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n        const onArrowClick = needRowToggle ?\n        this.toggleRowKey(flatRowKey) :\n        null;\n\n        const headerCellFormattedValue =\n        dateFormatters && dateFormatters[rowAttrs[i]] ?\n        dateFormatters[rowAttrs[i]](r) :\n        r;\n        return (\n          (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n            key: `rowKeyLabel-${i}`,\n            className: valueCellClassName,\n            rowSpan: rowSpan,\n            colSpan: colSpan,\n            onClick: this.clickHeaderHandler(\n            pivotData,\n            rowKey,\n            this.props.rows,\n            i,\n            this.props.tableOptions.clickRowHeaderCallback) },\n\n\n          displayHeaderCell(\n          needRowToggle,\n          this.state.collapsedRows[flatRowKey] ?\n          arrowCollapsed :\n          arrowExpanded,\n          onArrowClick,\n          headerCellFormattedValue,\n          namesMapping)));\n\n\n\n      }\n      return null;\n    });\n\n    const attrValuePaddingCell =\n    rowKey.length < rowAttrs.length ?\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      className: \"pvtRowLabel pvtSubtotalLabel\",\n      key: \"rowKeyBuffer\",\n      colSpan: rowAttrs.length - rowKey.length + colIncrSpan,\n      rowSpan: 1,\n      onClick: this.clickHeaderHandler(\n      pivotData,\n      rowKey,\n      this.props.rows,\n      rowKey.length,\n      this.props.tableOptions.clickRowHeaderCallback,\n      true) }, \"Subtotal\") :\n\n\n\n\n    null;\n\n    const rowClickHandlers = cellCallbacks[flatRowKey] || {};\n    const valueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey);\n      const agg = pivotData.getAggregator(rowKey, colKey);\n      const aggValue = agg.value();\n\n      const keys = [...rowKey, ...colKey];\n      let backgroundColor;\n      if (cellColorFormatters) {\n        Object.values(cellColorFormatters).forEach((cellColorFormatter) => {\n          if (Array.isArray(cellColorFormatter)) {\n            keys.forEach((key) => {\n              if (backgroundColor) {\n                return;\n              }\n              cellColorFormatter.\n              filter((formatter) => formatter.column === key).\n              forEach((formatter) => {\n                const formatterResult = formatter.getColorFromValue(aggValue);\n                if (formatterResult) {\n                  backgroundColor = formatterResult;\n                }\n              });\n            });\n          }\n        });\n      }\n\n      const style = agg.isSubtotal ?\n      { fontWeight: 'bold' } :\n      { backgroundColor };\n\n      return (\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtVal\",\n          key: `pvtVal-${flatColKey}`,\n          onClick: rowClickHandlers[flatColKey],\n          style: style },\n\n        agg.format(aggValue)));\n\n\n    });\n\n    let totalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator(rowKey, []);\n      const aggValue = agg.value();\n      totalCell =\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n        role: \"gridcell\",\n        key: \"total\",\n        className: \"pvtTotal\",\n        onClick: rowTotalCallbacks[flatRowKey] },\n\n      agg.format(aggValue));\n\n\n    }\n\n    const rowCells = [\n    ...attrValueCells,\n    attrValuePaddingCell,\n    ...valueCells,\n    totalCell];\n\n\n    return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: `keyRow-${flatRowKey}` }, rowCells);\n  }\n\n  renderTotalsRow(pivotSettings) {\n    // Render the final totals rows that has the totals for all the columns.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      visibleColKeys,\n      rowTotals,\n      pivotData,\n      colTotalCallbacks,\n      grandTotalCallback } =\n    pivotSettings;\n\n    const totalLabelCell =\n    (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      key: \"label\",\n      className: \"pvtTotalLabel pvtRowTotalLabel\",\n      colSpan: rowAttrs.length + Math.min(colAttrs.length, 1),\n      onClick: this.clickHeaderHandler(\n      pivotData,\n      [],\n      this.props.rows,\n      0,\n      this.props.tableOptions.clickRowHeaderCallback,\n      false,\n      true) },\n\n\n    `Total (${this.props.aggregatorName})`);\n\n\n\n    const totalValueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey);\n      const agg = pivotData.getAggregator([], colKey);\n      const aggValue = agg.value();\n\n      return (\n        (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtTotal pvtRowTotal\",\n          key: `total-${flatColKey}`,\n          onClick: colTotalCallbacks[flatColKey],\n          style: { padding: '5px' } },\n\n        agg.format(aggValue)));\n\n\n    });\n\n    let grandTotalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator([], []);\n      const aggValue = agg.value();\n      grandTotalCell =\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n        role: \"gridcell\",\n        key: \"total\",\n        className: \"pvtGrandTotal pvtRowTotal\",\n        onClick: grandTotalCallback },\n\n      agg.format(aggValue));\n\n\n    }\n\n    const totalCells = [totalLabelCell, ...totalValueCells, grandTotalCell];\n\n    return (\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { key: \"total\", className: \"pvtRowTotals\" },\n      totalCells));\n\n\n  }\n\n  visibleKeys(keys, collapsed, numAttrs, subtotalDisplay) {\n    return keys.filter(\n    (key) =>\n    // Is the key hidden by one of its parents?\n    !key.some((k, j) => collapsed[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(key.slice(0, j))]) && (\n\n    key.length === numAttrs ||\n    // Children hidden. Must show total.\n    (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(key) in collapsed ||\n    // Don't hide totals.\n    !subtotalDisplay.hideOnExpand));\n\n  }\n\n  render() {\n    if (this.cachedProps !== this.props) {\n      this.cachedProps = this.props;\n      this.cachedBasePivotSettings = this.getBasePivotSettings();\n    }\n    const {\n      colAttrs,\n      rowAttrs,\n      rowKeys,\n      colKeys,\n      colTotals,\n      rowSubtotalDisplay,\n      colSubtotalDisplay } =\n    this.cachedBasePivotSettings;\n\n    // Need to account for exclusions to compute the effective row\n    // and column keys.\n    const visibleRowKeys = this.visibleKeys(\n    rowKeys,\n    this.state.collapsedRows,\n    rowAttrs.length,\n    rowSubtotalDisplay);\n\n    const visibleColKeys = this.visibleKeys(\n    colKeys,\n    this.state.collapsedCols,\n    colAttrs.length,\n    colSubtotalDisplay);\n\n\n    const pivotSettings = {\n      visibleRowKeys,\n      maxRowVisible: Math.max(...visibleRowKeys.map((k) => k.length)),\n      visibleColKeys,\n      maxColVisible: Math.max(...visibleColKeys.map((k) => k.length)),\n      rowAttrSpans: this.calcAttrSpans(visibleRowKeys, rowAttrs.length),\n      colAttrSpans: this.calcAttrSpans(visibleColKeys, colAttrs.length),\n      ...this.cachedBasePivotSettings };\n\n\n    return (\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Styles__WEBPACK_IMPORTED_MODULE_4__.Styles, null,\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"table\", { className: \"pvtTable\", role: \"grid\" },\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"thead\", null,\n      colAttrs.map((c, j) =>\n      this.renderColHeaderRow(c, j, pivotSettings)),\n\n      rowAttrs.length !== 0 && this.renderRowHeaderRow(pivotSettings)),\n\n      (0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tbody\", null,\n      visibleRowKeys.map((r, i) =>\n      this.renderTableRow(r, i, pivotSettings)),\n\n      colTotals && this.renderTotalsRow(pivotSettings)))));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTableRenderer.propTypes = {\n  ..._utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.propTypes,\n  tableOptions: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().object) };\n\nTableRenderer.defaultProps = { ..._utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.defaultProps, tableOptions: {} };;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(parseLabel, \"parseLabel\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");reactHotLoader.register(displayHeaderCell, \"displayHeaderCell\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");reactHotLoader.register(TableRenderer, \"TableRenderer\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9UYWJsZVJlbmRlcmVycy5qc3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7OztBQUlBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFLQTtBQTF6QkE7QUFBQTtBQTZ6QkE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9UYWJsZVJlbmRlcmVycy5qc3g/NDc2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgUGl2b3REYXRhLCBmbGF0S2V5IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgU3R5bGVzIH0gZnJvbSAnLi9TdHlsZXMnO1xuXG5jb25zdCBwYXJzZUxhYmVsID0gdmFsdWUgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBTdHJpbmcodmFsdWUpO1xufTtcblxuZnVuY3Rpb24gZGlzcGxheUhlYWRlckNlbGwoXG4gIG5lZWRUb2dnbGUsXG4gIEFycm93SWNvbixcbiAgb25BcnJvd0NsaWNrLFxuICB2YWx1ZSxcbiAgbmFtZXNNYXBwaW5nLFxuKSB7XG4gIGNvbnN0IG5hbWUgPSBuYW1lc01hcHBpbmdbdmFsdWVdIHx8IHZhbHVlO1xuICByZXR1cm4gbmVlZFRvZ2dsZSA/IChcbiAgICA8c3BhbiBjbGFzc05hbWU9XCJ0b2dnbGUtd3JhcHBlclwiPlxuICAgICAgPHNwYW5cbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgIHRhYkluZGV4PVwiMFwiXG4gICAgICAgIGNsYXNzTmFtZT1cInRvZ2dsZVwiXG4gICAgICAgIG9uQ2xpY2s9e29uQXJyb3dDbGlja31cbiAgICAgID5cbiAgICAgICAge0Fycm93SWNvbn1cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRvZ2dsZS12YWxcIj57cGFyc2VMYWJlbChuYW1lKX08L3NwYW4+XG4gICAgPC9zcGFuPlxuICApIDogKFxuICAgIHBhcnNlTGFiZWwobmFtZSlcbiAgKTtcbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIC8vIFdlIG5lZWQgc3RhdGUgdG8gcmVjb3JkIHdoaWNoIGVudHJpZXMgYXJlIGNvbGxhcHNlZCBhbmQgd2hpY2ggYXJlbid0LlxuICAgIC8vIFRoaXMgaXMgYW4gb2JqZWN0IHdpdGggZmxhdC1rZXlzIGluZGljYXRpbmcgaWYgdGhlIGNvcnJlc3BvbmRpbmcgcm93c1xuICAgIC8vIHNob3VsZCBiZSBjb2xsYXBzZWQuXG4gICAgdGhpcy5zdGF0ZSA9IHsgY29sbGFwc2VkUm93czoge30sIGNvbGxhcHNlZENvbHM6IHt9IH07XG5cbiAgICB0aGlzLmNsaWNrSGVhZGVySGFuZGxlciA9IHRoaXMuY2xpY2tIZWFkZXJIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbGlja0hhbmRsZXIgPSB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xuICB9XG5cbiAgZ2V0QmFzZVBpdm90U2V0dGluZ3MoKSB7XG4gICAgLy8gT25lLXRpbWUgZXh0cmFjdGlvbiBvZiBwaXZvdCBzZXR0aW5ncyB0aGF0IHdlJ2xsIHVzZSB0aHJvdWdob3V0IHRoZSByZW5kZXIuXG5cbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xuICAgIGNvbnN0IGNvbEF0dHJzID0gcHJvcHMuY29scztcbiAgICBjb25zdCByb3dBdHRycyA9IHByb3BzLnJvd3M7XG5cbiAgICBjb25zdCB0YWJsZU9wdGlvbnMgPSB7XG4gICAgICByb3dUb3RhbHM6IHRydWUsXG4gICAgICBjb2xUb3RhbHM6IHRydWUsXG4gICAgICAuLi5wcm9wcy50YWJsZU9wdGlvbnMsXG4gICAgfTtcbiAgICBjb25zdCByb3dUb3RhbHMgPSB0YWJsZU9wdGlvbnMucm93VG90YWxzIHx8IGNvbEF0dHJzLmxlbmd0aCA9PT0gMDtcbiAgICBjb25zdCBjb2xUb3RhbHMgPSB0YWJsZU9wdGlvbnMuY29sVG90YWxzIHx8IHJvd0F0dHJzLmxlbmd0aCA9PT0gMDtcblxuICAgIGNvbnN0IG5hbWVzTWFwcGluZyA9IHByb3BzLm5hbWVzTWFwcGluZyB8fCB7fTtcbiAgICBjb25zdCBzdWJ0b3RhbE9wdGlvbnMgPSB7XG4gICAgICBhcnJvd0NvbGxhcHNlZDogJ1xcdTI1QjInLFxuICAgICAgYXJyb3dFeHBhbmRlZDogJ1xcdTI1QkMnLFxuICAgICAgLi4ucHJvcHMuc3VidG90YWxPcHRpb25zLFxuICAgIH07XG5cbiAgICBjb25zdCBjb2xTdWJ0b3RhbERpc3BsYXkgPSB7XG4gICAgICBkaXNwbGF5T25Ub3A6IGZhbHNlLFxuICAgICAgZW5hYmxlZDogcm93VG90YWxzLFxuICAgICAgaGlkZU9uRXhwYW5kOiBmYWxzZSxcbiAgICAgIC4uLnN1YnRvdGFsT3B0aW9ucy5jb2xTdWJ0b3RhbERpc3BsYXksXG4gICAgfTtcblxuICAgIGNvbnN0IHJvd1N1YnRvdGFsRGlzcGxheSA9IHtcbiAgICAgIGRpc3BsYXlPblRvcDogZmFsc2UsXG4gICAgICBlbmFibGVkOiBjb2xUb3RhbHMsXG4gICAgICBoaWRlT25FeHBhbmQ6IGZhbHNlLFxuICAgICAgLi4uc3VidG90YWxPcHRpb25zLnJvd1N1YnRvdGFsRGlzcGxheSxcbiAgICB9O1xuXG4gICAgY29uc3QgcGl2b3REYXRhID0gbmV3IFBpdm90RGF0YShwcm9wcywge1xuICAgICAgcm93RW5hYmxlZDogcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQsXG4gICAgICBjb2xFbmFibGVkOiBjb2xTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCxcbiAgICAgIHJvd1BhcnRpYWxPblRvcDogcm93U3VidG90YWxEaXNwbGF5LmRpc3BsYXlPblRvcCxcbiAgICAgIGNvbFBhcnRpYWxPblRvcDogY29sU3VidG90YWxEaXNwbGF5LmRpc3BsYXlPblRvcCxcbiAgICB9KTtcbiAgICBjb25zdCByb3dLZXlzID0gcGl2b3REYXRhLmdldFJvd0tleXMoKTtcbiAgICBjb25zdCBjb2xLZXlzID0gcGl2b3REYXRhLmdldENvbEtleXMoKTtcblxuICAgIC8vIEFsc28gcHJlLWNhbGN1bGF0ZSBhbGwgdGhlIGNhbGxiYWNrcyBmb3IgY2VsbHMsIGV0Yy4uLiBUaGlzIGlzIG5pY2UgdG8gaGF2ZSB0b1xuICAgIC8vIGF2b2lkIHJlLWNhbGN1bGF0aW9ucyBvZiB0aGUgY2FsbC1iYWNrcyBvbiBjZWxsIGV4cGFuc2lvbnMsIGV0Yy4uLlxuICAgIGNvbnN0IGNlbGxDYWxsYmFja3MgPSB7fTtcbiAgICBjb25zdCByb3dUb3RhbENhbGxiYWNrcyA9IHt9O1xuICAgIGNvbnN0IGNvbFRvdGFsQ2FsbGJhY2tzID0ge307XG4gICAgbGV0IGdyYW5kVG90YWxDYWxsYmFjayA9IG51bGw7XG4gICAgaWYgKHRhYmxlT3B0aW9ucy5jbGlja0NhbGxiYWNrKSB7XG4gICAgICByb3dLZXlzLmZvckVhY2gocm93S2V5ID0+IHtcbiAgICAgICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkocm93S2V5KTtcbiAgICAgICAgaWYgKCEoZmxhdFJvd0tleSBpbiBjZWxsQ2FsbGJhY2tzKSkge1xuICAgICAgICAgIGNlbGxDYWxsYmFja3NbZmxhdFJvd0tleV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sS2V5ID0+IHtcbiAgICAgICAgICBjZWxsQ2FsbGJhY2tzW2ZsYXRSb3dLZXldW2ZsYXRLZXkoY29sS2V5KV0gPSB0aGlzLmNsaWNrSGFuZGxlcihcbiAgICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICAgIHJvd0tleSxcbiAgICAgICAgICAgIGNvbEtleSxcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBZGQgaW4gdG90YWxzIGFzIHdlbGwuXG4gICAgICBpZiAocm93VG90YWxzKSB7XG4gICAgICAgIHJvd0tleXMuZm9yRWFjaChyb3dLZXkgPT4ge1xuICAgICAgICAgIHJvd1RvdGFsQ2FsbGJhY2tzW2ZsYXRLZXkocm93S2V5KV0gPSB0aGlzLmNsaWNrSGFuZGxlcihcbiAgICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICAgIHJvd0tleSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGNvbFRvdGFscykge1xuICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sS2V5ID0+IHtcbiAgICAgICAgICBjb2xUb3RhbENhbGxiYWNrc1tmbGF0S2V5KGNvbEtleSldID0gdGhpcy5jbGlja0hhbmRsZXIoXG4gICAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIGNvbEtleSxcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChyb3dUb3RhbHMgJiYgY29sVG90YWxzKSB7XG4gICAgICAgIGdyYW5kVG90YWxDYWxsYmFjayA9IHRoaXMuY2xpY2tIYW5kbGVyKHBpdm90RGF0YSwgW10sIFtdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGl2b3REYXRhLFxuICAgICAgY29sQXR0cnMsXG4gICAgICByb3dBdHRycyxcbiAgICAgIGNvbEtleXMsXG4gICAgICByb3dLZXlzLFxuICAgICAgcm93VG90YWxzLFxuICAgICAgY29sVG90YWxzLFxuICAgICAgYXJyb3dDb2xsYXBzZWQ6IHN1YnRvdGFsT3B0aW9ucy5hcnJvd0NvbGxhcHNlZCxcbiAgICAgIGFycm93RXhwYW5kZWQ6IHN1YnRvdGFsT3B0aW9ucy5hcnJvd0V4cGFuZGVkLFxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxuICAgICAgcm93U3VidG90YWxEaXNwbGF5LFxuICAgICAgY2VsbENhbGxiYWNrcyxcbiAgICAgIHJvd1RvdGFsQ2FsbGJhY2tzLFxuICAgICAgY29sVG90YWxDYWxsYmFja3MsXG4gICAgICBncmFuZFRvdGFsQ2FsbGJhY2ssXG4gICAgICBuYW1lc01hcHBpbmcsXG4gICAgfTtcbiAgfVxuXG4gIGNsaWNrSGFuZGxlcihwaXZvdERhdGEsIHJvd1ZhbHVlcywgY29sVmFsdWVzKSB7XG4gICAgY29uc3QgY29sQXR0cnMgPSB0aGlzLnByb3BzLmNvbHM7XG4gICAgY29uc3Qgcm93QXR0cnMgPSB0aGlzLnByb3BzLnJvd3M7XG4gICAgY29uc3QgdmFsdWUgPSBwaXZvdERhdGEuZ2V0QWdncmVnYXRvcihyb3dWYWx1ZXMsIGNvbFZhbHVlcykudmFsdWUoKTtcbiAgICBjb25zdCBmaWx0ZXJzID0ge307XG4gICAgY29uc3QgY29sTGltaXQgPSBNYXRoLm1pbihjb2xBdHRycy5sZW5ndGgsIGNvbFZhbHVlcy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sTGltaXQ7IGkgKz0gMSkge1xuICAgICAgY29uc3QgYXR0ciA9IGNvbEF0dHJzW2ldO1xuICAgICAgaWYgKGNvbFZhbHVlc1tpXSAhPT0gbnVsbCkge1xuICAgICAgICBmaWx0ZXJzW2F0dHJdID0gY29sVmFsdWVzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByb3dMaW1pdCA9IE1hdGgubWluKHJvd0F0dHJzLmxlbmd0aCwgcm93VmFsdWVzLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dMaW1pdDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBhdHRyID0gcm93QXR0cnNbaV07XG4gICAgICBpZiAocm93VmFsdWVzW2ldICE9PSBudWxsKSB7XG4gICAgICAgIGZpbHRlcnNbYXR0cl0gPSByb3dWYWx1ZXNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlID0+XG4gICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NhbGxiYWNrKGUsIHZhbHVlLCBmaWx0ZXJzLCBwaXZvdERhdGEpO1xuICB9XG5cbiAgY2xpY2tIZWFkZXJIYW5kbGVyKFxuICAgIHBpdm90RGF0YSxcbiAgICB2YWx1ZXMsXG4gICAgYXR0cnMsXG4gICAgYXR0cklkeCxcbiAgICBjYWxsYmFjayxcbiAgICBpc1N1YnRvdGFsID0gZmFsc2UsXG4gICAgaXNHcmFuZFRvdGFsID0gZmFsc2UsXG4gICkge1xuICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBhdHRySWR4OyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGF0dHIgPSBhdHRyc1tpXTtcbiAgICAgIGZpbHRlcnNbYXR0cl0gPSB2YWx1ZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBlID0+XG4gICAgICBjYWxsYmFjayhcbiAgICAgICAgZSxcbiAgICAgICAgdmFsdWVzW2F0dHJJZHhdLFxuICAgICAgICBmaWx0ZXJzLFxuICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgIGlzU3VidG90YWwsXG4gICAgICAgIGlzR3JhbmRUb3RhbCxcbiAgICAgICk7XG4gIH1cblxuICBjb2xsYXBzZUF0dHIocm93T3JDb2wsIGF0dHJJZHgsIGFsbEtleXMpIHtcbiAgICByZXR1cm4gZSA9PiB7XG4gICAgICAvLyBDb2xsYXBzZSBhbiBlbnRpcmUgYXR0cmlidXRlLlxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNvbnN0IGtleUxlbiA9IGF0dHJJZHggKyAxO1xuICAgICAgY29uc3QgY29sbGFwc2VkID0gYWxsS2V5cy5maWx0ZXIoayA9PiBrLmxlbmd0aCA9PT0ga2V5TGVuKS5tYXAoZmxhdEtleSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7fTtcbiAgICAgIGNvbGxhcHNlZC5mb3JFYWNoKGsgPT4ge1xuICAgICAgICB1cGRhdGVzW2tdID0gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocm93T3JDb2wpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICAgIGNvbGxhcHNlZFJvd3M6IHsgLi4uc3RhdGUuY29sbGFwc2VkUm93cywgLi4udXBkYXRlcyB9LFxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICAgICAgY29sbGFwc2VkQ29sczogeyAuLi5zdGF0ZS5jb2xsYXBzZWRDb2xzLCAuLi51cGRhdGVzIH0sXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZXhwYW5kQXR0cihyb3dPckNvbCwgYXR0cklkeCwgYWxsS2V5cykge1xuICAgIHJldHVybiBlID0+IHtcbiAgICAgIC8vIEV4cGFuZCBhbiBlbnRpcmUgYXR0cmlidXRlLiBUaGlzIGltcGxpY2l0bHkgaW1wbGllcyBleHBhbmRpbmcgYWxsIG9mIHRoZVxuICAgICAgLy8gcGFyZW50cyBhcyB3ZWxsLiBJdCdzIGEgYml0IGluZWZmaWNpZW50IGJ1dCBhaCB3ZWxsLi4uXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgdXBkYXRlcyA9IHt9O1xuICAgICAgYWxsS2V5cy5mb3JFYWNoKGsgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBhdHRySWR4OyBpICs9IDEpIHtcbiAgICAgICAgICB1cGRhdGVzW2ZsYXRLZXkoay5zbGljZSgwLCBpICsgMSkpXSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHJvd09yQ29sKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgICAgICBjb2xsYXBzZWRSb3dzOiB7IC4uLnN0YXRlLmNvbGxhcHNlZFJvd3MsIC4uLnVwZGF0ZXMgfSxcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICAgIGNvbGxhcHNlZENvbHM6IHsgLi4uc3RhdGUuY29sbGFwc2VkQ29scywgLi4udXBkYXRlcyB9LFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHRvZ2dsZVJvd0tleShmbGF0Um93S2V5KSB7XG4gICAgcmV0dXJuIGUgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgICAgY29sbGFwc2VkUm93czoge1xuICAgICAgICAgIC4uLnN0YXRlLmNvbGxhcHNlZFJvd3MsXG4gICAgICAgICAgW2ZsYXRSb3dLZXldOiAhc3RhdGUuY29sbGFwc2VkUm93c1tmbGF0Um93S2V5XSxcbiAgICAgICAgfSxcbiAgICAgIH0pKTtcbiAgICB9O1xuICB9XG5cbiAgdG9nZ2xlQ29sS2V5KGZsYXRDb2xLZXkpIHtcbiAgICByZXR1cm4gZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICBjb2xsYXBzZWRDb2xzOiB7XG4gICAgICAgICAgLi4uc3RhdGUuY29sbGFwc2VkQ29scyxcbiAgICAgICAgICBbZmxhdENvbEtleV06ICFzdGF0ZS5jb2xsYXBzZWRDb2xzW2ZsYXRDb2xLZXldLFxuICAgICAgICB9LFxuICAgICAgfSkpO1xuICAgIH07XG4gIH1cblxuICBjYWxjQXR0clNwYW5zKGF0dHJBcnIsIG51bUF0dHJzKSB7XG4gICAgLy8gR2l2ZW4gYW4gYXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlcyAoaS5lLiBlYWNoIGVsZW1lbnQgaXMgYW5vdGhlciBhcnJheSB3aXRoXG4gICAgLy8gdGhlIHZhbHVlIGF0IGV2ZXJ5IGxldmVsKSwgY29tcHV0ZSB0aGUgc3BhbnMgZm9yIGV2ZXJ5IGF0dHJpYnV0ZSB2YWx1ZSBhdFxuICAgIC8vIGV2ZXJ5IGxldmVsLiBUaGUgcmV0dXJuIHZhbHVlIGlzIGEgbmVzdGVkIGFycmF5IG9mIHRoZSBzYW1lIHNoYXBlLiBJdCBoYXNcbiAgICAvLyAtMSdzIGZvciByZXBlYXRlZCB2YWx1ZXMgYW5kIHRoZSBzcGFuIG51bWJlciBvdGhlcndpc2UuXG5cbiAgICBjb25zdCBzcGFucyA9IFtdO1xuICAgIC8vIEluZGV4IG9mIHRoZSBsYXN0IG5ldyB2YWx1ZVxuICAgIGNvbnN0IGxpID0gQXJyYXkobnVtQXR0cnMpLm1hcCgoKSA9PiAwKTtcbiAgICBsZXQgbHYgPSBBcnJheShudW1BdHRycykubWFwKCgpID0+IG51bGwpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0ckFyci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgLy8gS2VlcCBpbmNyZWFzaW5nIHNwYW4gdmFsdWVzIGFzIGxvbmcgYXMgdGhlIGxhc3Qga2V5cyBhcmUgdGhlIHNhbWUuIEZvclxuICAgICAgLy8gdGhlIHJlc3QsIHJlY29yZCBzcGFucyBvZiAxLiBVcGRhdGUgdGhlIGluZGljZXMgdG9vLlxuICAgICAgY29uc3QgY3YgPSBhdHRyQXJyW2ldO1xuICAgICAgY29uc3QgZW50ID0gW107XG4gICAgICBsZXQgZGVwdGggPSAwO1xuICAgICAgY29uc3QgbGltaXQgPSBNYXRoLm1pbihsdi5sZW5ndGgsIGN2Lmxlbmd0aCk7XG4gICAgICB3aGlsZSAoZGVwdGggPCBsaW1pdCAmJiBsdltkZXB0aF0gPT09IGN2W2RlcHRoXSkge1xuICAgICAgICBlbnQucHVzaCgtMSk7XG4gICAgICAgIHNwYW5zW2xpW2RlcHRoXV1bZGVwdGhdICs9IDE7XG4gICAgICAgIGRlcHRoICs9IDE7XG4gICAgICB9XG4gICAgICB3aGlsZSAoZGVwdGggPCBjdi5sZW5ndGgpIHtcbiAgICAgICAgbGlbZGVwdGhdID0gaTtcbiAgICAgICAgZW50LnB1c2goMSk7XG4gICAgICAgIGRlcHRoICs9IDE7XG4gICAgICB9XG4gICAgICBzcGFucy5wdXNoKGVudCk7XG4gICAgICBsdiA9IGN2O1xuICAgIH1cbiAgICByZXR1cm4gc3BhbnM7XG4gIH1cblxuICByZW5kZXJDb2xIZWFkZXJSb3coYXR0ck5hbWUsIGF0dHJJZHgsIHBpdm90U2V0dGluZ3MpIHtcbiAgICAvLyBSZW5kZXIgYSBzaW5nbGUgcm93IGluIHRoZSBjb2x1bW4gaGVhZGVyIGF0IHRoZSB0b3Agb2YgdGhlIHBpdm90IHRhYmxlLlxuXG4gICAgY29uc3Qge1xuICAgICAgcm93QXR0cnMsXG4gICAgICBjb2xBdHRycyxcbiAgICAgIGNvbEtleXMsXG4gICAgICB2aXNpYmxlQ29sS2V5cyxcbiAgICAgIGNvbEF0dHJTcGFucyxcbiAgICAgIHJvd1RvdGFscyxcbiAgICAgIGFycm93RXhwYW5kZWQsXG4gICAgICBhcnJvd0NvbGxhcHNlZCxcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheSxcbiAgICAgIG1heENvbFZpc2libGUsXG4gICAgICBwaXZvdERhdGEsXG4gICAgICBuYW1lc01hcHBpbmcsXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XG4gICAgY29uc3Qge1xuICAgICAgaGlnaGxpZ2h0SGVhZGVyQ2VsbHNPbkhvdmVyLFxuICAgICAgb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3VwcyA9IFtdLFxuICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyxcbiAgICAgIGRhdGVGb3JtYXR0ZXJzLFxuICAgIH0gPSB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucztcblxuICAgIGNvbnN0IHNwYWNlQ2VsbCA9XG4gICAgICBhdHRySWR4ID09PSAwICYmIHJvd0F0dHJzLmxlbmd0aCAhPT0gMCA/IChcbiAgICAgICAgPHRoXG4gICAgICAgICAga2V5PVwicGFkZGluZ1wiXG4gICAgICAgICAgY29sU3Bhbj17cm93QXR0cnMubGVuZ3RofVxuICAgICAgICAgIHJvd1NwYW49e2NvbEF0dHJzLmxlbmd0aH1cbiAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAvPlxuICAgICAgKSA6IG51bGw7XG5cbiAgICBjb25zdCBuZWVkVG9nZ2xlID1cbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheS5lbmFibGVkICYmIGF0dHJJZHggIT09IGNvbEF0dHJzLmxlbmd0aCAtIDE7XG4gICAgbGV0IGFycm93Q2xpY2tIYW5kbGUgPSBudWxsO1xuICAgIGxldCBzdWJBcnJvdyA9IG51bGw7XG4gICAgaWYgKG5lZWRUb2dnbGUpIHtcbiAgICAgIGFycm93Q2xpY2tIYW5kbGUgPVxuICAgICAgICBhdHRySWR4ICsgMSA8IG1heENvbFZpc2libGVcbiAgICAgICAgICA/IHRoaXMuY29sbGFwc2VBdHRyKGZhbHNlLCBhdHRySWR4LCBjb2xLZXlzKVxuICAgICAgICAgIDogdGhpcy5leHBhbmRBdHRyKGZhbHNlLCBhdHRySWR4LCBjb2xLZXlzKTtcbiAgICAgIHN1YkFycm93ID0gYXR0cklkeCArIDEgPCBtYXhDb2xWaXNpYmxlID8gYXJyb3dFeHBhbmRlZCA6IGFycm93Q29sbGFwc2VkO1xuICAgIH1cbiAgICBjb25zdCBhdHRyTmFtZUNlbGwgPSAoXG4gICAgICA8dGgga2V5PVwibGFiZWxcIiBjbGFzc05hbWU9XCJwdnRBeGlzTGFiZWxcIj5cbiAgICAgICAge2Rpc3BsYXlIZWFkZXJDZWxsKFxuICAgICAgICAgIG5lZWRUb2dnbGUsXG4gICAgICAgICAgc3ViQXJyb3csXG4gICAgICAgICAgYXJyb3dDbGlja0hhbmRsZSxcbiAgICAgICAgICBhdHRyTmFtZSxcbiAgICAgICAgICBuYW1lc01hcHBpbmcsXG4gICAgICAgICl9XG4gICAgICA8L3RoPlxuICAgICk7XG5cbiAgICBjb25zdCBhdHRyVmFsdWVDZWxscyA9IFtdO1xuICAgIGNvbnN0IHJvd0luY3JTcGFuID0gcm93QXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGNvbHVtbnMuIEp1bXAgb3ZlciBkdXBsaWNhdGUgdmFsdWVzLlxuICAgIGxldCBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHZpc2libGVDb2xLZXlzLmxlbmd0aCkge1xuICAgICAgY29uc3QgY29sS2V5ID0gdmlzaWJsZUNvbEtleXNbaV07XG4gICAgICBjb25zdCBjb2xTcGFuID0gYXR0cklkeCA8IGNvbEtleS5sZW5ndGggPyBjb2xBdHRyU3BhbnNbaV1bYXR0cklkeF0gOiAxO1xuICAgICAgbGV0IGNvbExhYmVsQ2xhc3MgPSAncHZ0Q29sTGFiZWwnO1xuICAgICAgaWYgKGF0dHJJZHggPCBjb2xLZXkubGVuZ3RoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIgJiZcbiAgICAgICAgICAhb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3Vwcy5pbmNsdWRlcyhjb2xBdHRyc1thdHRySWR4XSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29sTGFiZWxDbGFzcyArPSAnIGhvdmVyYWJsZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHMgJiZcbiAgICAgICAgICBBcnJheS5pc0FycmF5KGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbY29sQXR0cnNbYXR0cklkeF1dKSAmJlxuICAgICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbY29sQXR0cnNbYXR0cklkeF1dLmluY2x1ZGVzKGNvbEtleVthdHRySWR4XSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29sTGFiZWxDbGFzcyArPSAnIGFjdGl2ZSc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb3dTcGFuID0gMSArIChhdHRySWR4ID09PSBjb2xBdHRycy5sZW5ndGggLSAxID8gcm93SW5jclNwYW4gOiAwKTtcbiAgICAgICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoY29sS2V5LnNsaWNlKDAsIGF0dHJJZHggKyAxKSk7XG4gICAgICAgIGNvbnN0IG9uQXJyb3dDbGljayA9IG5lZWRUb2dnbGUgPyB0aGlzLnRvZ2dsZUNvbEtleShmbGF0Q29sS2V5KSA6IG51bGw7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyQ2VsbEZvcm1hdHRlZFZhbHVlID1cbiAgICAgICAgICBkYXRlRm9ybWF0dGVycyAmJlxuICAgICAgICAgIGRhdGVGb3JtYXR0ZXJzW2F0dHJOYW1lXSAmJlxuICAgICAgICAgIHR5cGVvZiBkYXRlRm9ybWF0dGVyc1thdHRyTmFtZV0gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gZGF0ZUZvcm1hdHRlcnNbYXR0ck5hbWVdKGNvbEtleVthdHRySWR4XSlcbiAgICAgICAgICAgIDogY29sS2V5W2F0dHJJZHhdO1xuICAgICAgICBhdHRyVmFsdWVDZWxscy5wdXNoKFxuICAgICAgICAgIDx0aFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjb2xMYWJlbENsYXNzfVxuICAgICAgICAgICAga2V5PXtgY29sS2V5LSR7ZmxhdENvbEtleX1gfVxuICAgICAgICAgICAgY29sU3Bhbj17Y29sU3Bhbn1cbiAgICAgICAgICAgIHJvd1NwYW49e3Jvd1NwYW59XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcbiAgICAgICAgICAgICAgcGl2b3REYXRhLFxuICAgICAgICAgICAgICBjb2xLZXksXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuY29scyxcbiAgICAgICAgICAgICAgYXR0cklkeCxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tDb2x1bW5IZWFkZXJDYWxsYmFjayxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2Rpc3BsYXlIZWFkZXJDZWxsKFxuICAgICAgICAgICAgICBuZWVkVG9nZ2xlLFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbGxhcHNlZENvbHNbZmxhdENvbEtleV1cbiAgICAgICAgICAgICAgICA/IGFycm93Q29sbGFwc2VkXG4gICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxuICAgICAgICAgICAgICBvbkFycm93Q2xpY2ssXG4gICAgICAgICAgICAgIGhlYWRlckNlbGxGb3JtYXR0ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L3RoPixcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cklkeCA9PT0gY29sS2V5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCByb3dTcGFuID0gY29sQXR0cnMubGVuZ3RoIC0gY29sS2V5Lmxlbmd0aCArIHJvd0luY3JTcGFuO1xuICAgICAgICBhdHRyVmFsdWVDZWxscy5wdXNoKFxuICAgICAgICAgIDx0aFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtjb2xMYWJlbENsYXNzfSBwdnRTdWJ0b3RhbExhYmVsYH1cbiAgICAgICAgICAgIGtleT17YGNvbEtleUJ1ZmZlci0ke2ZsYXRLZXkoY29sS2V5KX1gfVxuICAgICAgICAgICAgY29sU3Bhbj17Y29sU3Bhbn1cbiAgICAgICAgICAgIHJvd1NwYW49e3Jvd1NwYW59XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcbiAgICAgICAgICAgICAgcGl2b3REYXRhLFxuICAgICAgICAgICAgICBjb2xLZXksXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuY29scyxcbiAgICAgICAgICAgICAgYXR0cklkeCxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tDb2x1bW5IZWFkZXJDYWxsYmFjayxcbiAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgU3VidG90YWxcbiAgICAgICAgICA8L3RoPixcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vIFRoZSBuZXh0IGNvbFNwYW4gY29sdW1ucyB3aWxsIGhhdmUgdGhlIHNhbWUgdmFsdWUgYW55d2F5Li4uXG4gICAgICBpICs9IGNvbFNwYW47XG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxDZWxsID1cbiAgICAgIGF0dHJJZHggPT09IDAgJiYgcm93VG90YWxzID8gKFxuICAgICAgICA8dGhcbiAgICAgICAgICBrZXk9XCJ0b3RhbFwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWxMYWJlbFwiXG4gICAgICAgICAgcm93U3Bhbj17Y29sQXR0cnMubGVuZ3RoICsgTWF0aC5taW4ocm93QXR0cnMubGVuZ3RoLCAxKX1cbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcbiAgICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xzLFxuICAgICAgICAgICAgYXR0cklkeCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtgVG90YWwgKCR7dGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZX0pYH1cbiAgICAgICAgPC90aD5cbiAgICAgICkgOiBudWxsO1xuXG4gICAgY29uc3QgY2VsbHMgPSBbc3BhY2VDZWxsLCBhdHRyTmFtZUNlbGwsIC4uLmF0dHJWYWx1ZUNlbGxzLCB0b3RhbENlbGxdO1xuICAgIHJldHVybiA8dHIga2V5PXtgY29sQXR0ci0ke2F0dHJJZHh9YH0+e2NlbGxzfTwvdHI+O1xuICB9XG5cbiAgcmVuZGVyUm93SGVhZGVyUm93KHBpdm90U2V0dGluZ3MpIHtcbiAgICAvLyBSZW5kZXIganVzdCB0aGUgYXR0cmlidXRlIG5hbWVzIG9mIHRoZSByb3dzICh0aGUgYWN0dWFsIGF0dHJpYnV0ZSB2YWx1ZXNcbiAgICAvLyB3aWxsIHNob3cgdXAgaW4gdGhlIGluZGl2aWR1YWwgcm93cykuXG5cbiAgICBjb25zdCB7XG4gICAgICByb3dBdHRycyxcbiAgICAgIGNvbEF0dHJzLFxuICAgICAgcm93S2V5cyxcbiAgICAgIGFycm93Q29sbGFwc2VkLFxuICAgICAgYXJyb3dFeHBhbmRlZCxcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcbiAgICAgIG1heFJvd1Zpc2libGUsXG4gICAgICBwaXZvdERhdGEsXG4gICAgICBuYW1lc01hcHBpbmcsXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XG4gICAgcmV0dXJuIChcbiAgICAgIDx0ciBrZXk9XCJyb3dIZHJcIj5cbiAgICAgICAge3Jvd0F0dHJzLm1hcCgociwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5lZWRMYWJlbFRvZ2dsZSA9XG4gICAgICAgICAgICByb3dTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCAmJiBpICE9PSByb3dBdHRycy5sZW5ndGggLSAxO1xuICAgICAgICAgIGxldCBhcnJvd0NsaWNrSGFuZGxlID0gbnVsbDtcbiAgICAgICAgICBsZXQgc3ViQXJyb3cgPSBudWxsO1xuICAgICAgICAgIGlmIChuZWVkTGFiZWxUb2dnbGUpIHtcbiAgICAgICAgICAgIGFycm93Q2xpY2tIYW5kbGUgPVxuICAgICAgICAgICAgICBpICsgMSA8IG1heFJvd1Zpc2libGVcbiAgICAgICAgICAgICAgICA/IHRoaXMuY29sbGFwc2VBdHRyKHRydWUsIGksIHJvd0tleXMpXG4gICAgICAgICAgICAgICAgOiB0aGlzLmV4cGFuZEF0dHIodHJ1ZSwgaSwgcm93S2V5cyk7XG4gICAgICAgICAgICBzdWJBcnJvdyA9IGkgKyAxIDwgbWF4Um93VmlzaWJsZSA/IGFycm93RXhwYW5kZWQgOiBhcnJvd0NvbGxhcHNlZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwdnRBeGlzTGFiZWxcIiBrZXk9e2Byb3dBdHRyLSR7aX1gfT5cbiAgICAgICAgICAgICAge2Rpc3BsYXlIZWFkZXJDZWxsKFxuICAgICAgICAgICAgICAgIG5lZWRMYWJlbFRvZ2dsZSxcbiAgICAgICAgICAgICAgICBzdWJBcnJvdyxcbiAgICAgICAgICAgICAgICBhcnJvd0NsaWNrSGFuZGxlLFxuICAgICAgICAgICAgICAgIHIsXG4gICAgICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgICAgPHRoXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWxMYWJlbFwiXG4gICAgICAgICAga2V5PVwicGFkZGluZ1wiXG4gICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXG4gICAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICl9XG4gICAgICAgID5cbiAgICAgICAgICB7Y29sQXR0cnMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICA/IGBUb3RhbCAoJHt0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lfSlgXG4gICAgICAgICAgICA6IG51bGx9XG4gICAgICAgIDwvdGg+XG4gICAgICA8L3RyPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJUYWJsZVJvdyhyb3dLZXksIHJvd0lkeCwgcGl2b3RTZXR0aW5ncykge1xuICAgIC8vIFJlbmRlciBhIHNpbmdsZSByb3cgaW4gdGhlIHBpdm90IHRhYmxlLlxuXG4gICAgY29uc3Qge1xuICAgICAgcm93QXR0cnMsXG4gICAgICBjb2xBdHRycyxcbiAgICAgIHJvd0F0dHJTcGFucyxcbiAgICAgIHZpc2libGVDb2xLZXlzLFxuICAgICAgcGl2b3REYXRhLFxuICAgICAgcm93VG90YWxzLFxuICAgICAgcm93U3VidG90YWxEaXNwbGF5LFxuICAgICAgYXJyb3dFeHBhbmRlZCxcbiAgICAgIGFycm93Q29sbGFwc2VkLFxuICAgICAgY2VsbENhbGxiYWNrcyxcbiAgICAgIHJvd1RvdGFsQ2FsbGJhY2tzLFxuICAgICAgbmFtZXNNYXBwaW5nLFxuICAgIH0gPSBwaXZvdFNldHRpbmdzO1xuXG4gICAgY29uc3Qge1xuICAgICAgaGlnaGxpZ2h0SGVhZGVyQ2VsbHNPbkhvdmVyLFxuICAgICAgb21pdHRlZEhpZ2hsaWdodEhlYWRlckdyb3VwcyA9IFtdLFxuICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyxcbiAgICAgIGNlbGxDb2xvckZvcm1hdHRlcnMsXG4gICAgICBkYXRlRm9ybWF0dGVycyxcbiAgICB9ID0gdGhpcy5wcm9wcy50YWJsZU9wdGlvbnM7XG4gICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkocm93S2V5KTtcblxuICAgIGNvbnN0IGNvbEluY3JTcGFuID0gY29sQXR0cnMubGVuZ3RoICE9PSAwID8gMSA6IDA7XG4gICAgY29uc3QgYXR0clZhbHVlQ2VsbHMgPSByb3dLZXkubWFwKChyLCBpKSA9PiB7XG4gICAgICBsZXQgdmFsdWVDZWxsQ2xhc3NOYW1lID0gJ3B2dFJvd0xhYmVsJztcbiAgICAgIGlmIChcbiAgICAgICAgaGlnaGxpZ2h0SGVhZGVyQ2VsbHNPbkhvdmVyICYmXG4gICAgICAgICFvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzLmluY2x1ZGVzKHJvd0F0dHJzW2ldKVxuICAgICAgKSB7XG4gICAgICAgIHZhbHVlQ2VsbENsYXNzTmFtZSArPSAnIGhvdmVyYWJsZSc7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHMgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShoaWdobGlnaHRlZEhlYWRlckNlbGxzW3Jvd0F0dHJzW2ldXSkgJiZcbiAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tyb3dBdHRyc1tpXV0uaW5jbHVkZXMocilcbiAgICAgICkge1xuICAgICAgICB2YWx1ZUNlbGxDbGFzc05hbWUgKz0gJyBhY3RpdmUnO1xuICAgICAgfVxuICAgICAgY29uc3Qgcm93U3BhbiA9IHJvd0F0dHJTcGFuc1tyb3dJZHhdW2ldO1xuICAgICAgaWYgKHJvd1NwYW4gPiAwKSB7XG4gICAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleS5zbGljZSgwLCBpICsgMSkpO1xuICAgICAgICBjb25zdCBjb2xTcGFuID0gMSArIChpID09PSByb3dBdHRycy5sZW5ndGggLSAxID8gY29sSW5jclNwYW4gOiAwKTtcbiAgICAgICAgY29uc3QgbmVlZFJvd1RvZ2dsZSA9XG4gICAgICAgICAgcm93U3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgaSAhPT0gcm93QXR0cnMubGVuZ3RoIC0gMTtcbiAgICAgICAgY29uc3Qgb25BcnJvd0NsaWNrID0gbmVlZFJvd1RvZ2dsZVxuICAgICAgICAgID8gdGhpcy50b2dnbGVSb3dLZXkoZmxhdFJvd0tleSlcbiAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyQ2VsbEZvcm1hdHRlZFZhbHVlID1cbiAgICAgICAgICBkYXRlRm9ybWF0dGVycyAmJiBkYXRlRm9ybWF0dGVyc1tyb3dBdHRyc1tpXV1cbiAgICAgICAgICAgID8gZGF0ZUZvcm1hdHRlcnNbcm93QXR0cnNbaV1dKHIpXG4gICAgICAgICAgICA6IHI7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPHRoXG4gICAgICAgICAgICBrZXk9e2Byb3dLZXlMYWJlbC0ke2l9YH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17dmFsdWVDZWxsQ2xhc3NOYW1lfVxuICAgICAgICAgICAgcm93U3Bhbj17cm93U3Bhbn1cbiAgICAgICAgICAgIGNvbFNwYW49e2NvbFNwYW59XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcbiAgICAgICAgICAgICAgcGl2b3REYXRhLFxuICAgICAgICAgICAgICByb3dLZXksXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcbiAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2Rpc3BsYXlIZWFkZXJDZWxsKFxuICAgICAgICAgICAgICBuZWVkUm93VG9nZ2xlLFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbGxhcHNlZFJvd3NbZmxhdFJvd0tleV1cbiAgICAgICAgICAgICAgICA/IGFycm93Q29sbGFwc2VkXG4gICAgICAgICAgICAgICAgOiBhcnJvd0V4cGFuZGVkLFxuICAgICAgICAgICAgICBvbkFycm93Q2xpY2ssXG4gICAgICAgICAgICAgIGhlYWRlckNlbGxGb3JtYXR0ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgbmFtZXNNYXBwaW5nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L3RoPlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG5cbiAgICBjb25zdCBhdHRyVmFsdWVQYWRkaW5nQ2VsbCA9XG4gICAgICByb3dLZXkubGVuZ3RoIDwgcm93QXR0cnMubGVuZ3RoID8gKFxuICAgICAgICA8dGhcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRSb3dMYWJlbCBwdnRTdWJ0b3RhbExhYmVsXCJcbiAgICAgICAgICBrZXk9XCJyb3dLZXlCdWZmZXJcIlxuICAgICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aCAtIHJvd0tleS5sZW5ndGggKyBjb2xJbmNyU3Bhbn1cbiAgICAgICAgICByb3dTcGFuPXsxfVxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxuICAgICAgICAgICAgcGl2b3REYXRhLFxuICAgICAgICAgICAgcm93S2V5LFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxuICAgICAgICAgICAgcm93S2V5Lmxlbmd0aCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrUm93SGVhZGVyQ2FsbGJhY2ssXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICl9XG4gICAgICAgID5cbiAgICAgICAgICBTdWJ0b3RhbFxuICAgICAgICA8L3RoPlxuICAgICAgKSA6IG51bGw7XG5cbiAgICBjb25zdCByb3dDbGlja0hhbmRsZXJzID0gY2VsbENhbGxiYWNrc1tmbGF0Um93S2V5XSB8fCB7fTtcbiAgICBjb25zdCB2YWx1ZUNlbGxzID0gdmlzaWJsZUNvbEtleXMubWFwKGNvbEtleSA9PiB7XG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3Iocm93S2V5LCBjb2xLZXkpO1xuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcblxuICAgICAgY29uc3Qga2V5cyA9IFsuLi5yb3dLZXksIC4uLmNvbEtleV07XG4gICAgICBsZXQgYmFja2dyb3VuZENvbG9yO1xuICAgICAgaWYgKGNlbGxDb2xvckZvcm1hdHRlcnMpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhjZWxsQ29sb3JGb3JtYXR0ZXJzKS5mb3JFYWNoKGNlbGxDb2xvckZvcm1hdHRlciA9PiB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbENvbG9yRm9ybWF0dGVyKSkge1xuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2VsbENvbG9yRm9ybWF0dGVyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmb3JtYXR0ZXIgPT4gZm9ybWF0dGVyLmNvbHVtbiA9PT0ga2V5KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZvcm1hdHRlciA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZXJSZXN1bHQgPSBmb3JtYXR0ZXIuZ2V0Q29sb3JGcm9tVmFsdWUoYWdnVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdHRlclJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBmb3JtYXR0ZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdHlsZSA9IGFnZy5pc1N1YnRvdGFsXG4gICAgICAgID8geyBmb250V2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICA6IHsgYmFja2dyb3VuZENvbG9yIH07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDx0ZFxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VmFsXCJcbiAgICAgICAgICBrZXk9e2BwdnRWYWwtJHtmbGF0Q29sS2V5fWB9XG4gICAgICAgICAgb25DbGljaz17cm93Q2xpY2tIYW5kbGVyc1tmbGF0Q29sS2V5XX1cbiAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgID5cbiAgICAgICAgICB7YWdnLmZvcm1hdChhZ2dWYWx1ZSl9XG4gICAgICAgIDwvdGQ+XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgbGV0IHRvdGFsQ2VsbCA9IG51bGw7XG4gICAgaWYgKHJvd1RvdGFscykge1xuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3Iocm93S2V5LCBbXSk7XG4gICAgICBjb25zdCBhZ2dWYWx1ZSA9IGFnZy52YWx1ZSgpO1xuICAgICAgdG90YWxDZWxsID0gKFxuICAgICAgICA8dGRcbiAgICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxuICAgICAgICAgIGtleT1cInRvdGFsXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbFwiXG4gICAgICAgICAgb25DbGljaz17cm93VG90YWxDYWxsYmFja3NbZmxhdFJvd0tleV19XG4gICAgICAgID5cbiAgICAgICAgICB7YWdnLmZvcm1hdChhZ2dWYWx1ZSl9XG4gICAgICAgIDwvdGQ+XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHJvd0NlbGxzID0gW1xuICAgICAgLi4uYXR0clZhbHVlQ2VsbHMsXG4gICAgICBhdHRyVmFsdWVQYWRkaW5nQ2VsbCxcbiAgICAgIC4uLnZhbHVlQ2VsbHMsXG4gICAgICB0b3RhbENlbGwsXG4gICAgXTtcblxuICAgIHJldHVybiA8dHIga2V5PXtga2V5Um93LSR7ZmxhdFJvd0tleX1gfT57cm93Q2VsbHN9PC90cj47XG4gIH1cblxuICByZW5kZXJUb3RhbHNSb3cocGl2b3RTZXR0aW5ncykge1xuICAgIC8vIFJlbmRlciB0aGUgZmluYWwgdG90YWxzIHJvd3MgdGhhdCBoYXMgdGhlIHRvdGFscyBmb3IgYWxsIHRoZSBjb2x1bW5zLlxuXG4gICAgY29uc3Qge1xuICAgICAgcm93QXR0cnMsXG4gICAgICBjb2xBdHRycyxcbiAgICAgIHZpc2libGVDb2xLZXlzLFxuICAgICAgcm93VG90YWxzLFxuICAgICAgcGl2b3REYXRhLFxuICAgICAgY29sVG90YWxDYWxsYmFja3MsXG4gICAgICBncmFuZFRvdGFsQ2FsbGJhY2ssXG4gICAgfSA9IHBpdm90U2V0dGluZ3M7XG5cbiAgICBjb25zdCB0b3RhbExhYmVsQ2VsbCA9IChcbiAgICAgIDx0aFxuICAgICAgICBrZXk9XCJsYWJlbFwiXG4gICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsTGFiZWwgcHZ0Um93VG90YWxMYWJlbFwiXG4gICAgICAgIGNvbFNwYW49e3Jvd0F0dHJzLmxlbmd0aCArIE1hdGgubWluKGNvbEF0dHJzLmxlbmd0aCwgMSl9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxuICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICBbXSxcbiAgICAgICAgICB0aGlzLnByb3BzLnJvd3MsXG4gICAgICAgICAgMCxcbiAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIHtgVG90YWwgKCR7dGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZX0pYH1cbiAgICAgIDwvdGg+XG4gICAgKTtcblxuICAgIGNvbnN0IHRvdGFsVmFsdWVDZWxscyA9IHZpc2libGVDb2xLZXlzLm1hcChjb2xLZXkgPT4ge1xuICAgICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoY29sS2V5KTtcbiAgICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKFtdLCBjb2xLZXkpO1xuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPHRkXG4gICAgICAgICAgcm9sZT1cImdyaWRjZWxsXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbCBwdnRSb3dUb3RhbFwiXG4gICAgICAgICAga2V5PXtgdG90YWwtJHtmbGF0Q29sS2V5fWB9XG4gICAgICAgICAgb25DbGljaz17Y29sVG90YWxDYWxsYmFja3NbZmxhdENvbEtleV19XG4gICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogJzVweCcgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cbiAgICAgICAgPC90ZD5cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBsZXQgZ3JhbmRUb3RhbENlbGwgPSBudWxsO1xuICAgIGlmIChyb3dUb3RhbHMpIHtcbiAgICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKFtdLCBbXSk7XG4gICAgICBjb25zdCBhZ2dWYWx1ZSA9IGFnZy52YWx1ZSgpO1xuICAgICAgZ3JhbmRUb3RhbENlbGwgPSAoXG4gICAgICAgIDx0ZFxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgICAga2V5PVwidG90YWxcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dEdyYW5kVG90YWwgcHZ0Um93VG90YWxcIlxuICAgICAgICAgIG9uQ2xpY2s9e2dyYW5kVG90YWxDYWxsYmFja31cbiAgICAgICAgPlxuICAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cbiAgICAgICAgPC90ZD5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxDZWxscyA9IFt0b3RhbExhYmVsQ2VsbCwgLi4udG90YWxWYWx1ZUNlbGxzLCBncmFuZFRvdGFsQ2VsbF07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPHRyIGtleT1cInRvdGFsXCIgY2xhc3NOYW1lPVwicHZ0Um93VG90YWxzXCI+XG4gICAgICAgIHt0b3RhbENlbGxzfVxuICAgICAgPC90cj5cbiAgICApO1xuICB9XG5cbiAgdmlzaWJsZUtleXMoa2V5cywgY29sbGFwc2VkLCBudW1BdHRycywgc3VidG90YWxEaXNwbGF5KSB7XG4gICAgcmV0dXJuIGtleXMuZmlsdGVyKFxuICAgICAga2V5ID0+XG4gICAgICAgIC8vIElzIHRoZSBrZXkgaGlkZGVuIGJ5IG9uZSBvZiBpdHMgcGFyZW50cz9cbiAgICAgICAgIWtleS5zb21lKChrLCBqKSA9PiBjb2xsYXBzZWRbZmxhdEtleShrZXkuc2xpY2UoMCwgaikpXSkgJiZcbiAgICAgICAgLy8gTGVhZiBrZXkuXG4gICAgICAgIChrZXkubGVuZ3RoID09PSBudW1BdHRycyB8fFxuICAgICAgICAgIC8vIENoaWxkcmVuIGhpZGRlbi4gTXVzdCBzaG93IHRvdGFsLlxuICAgICAgICAgIGZsYXRLZXkoa2V5KSBpbiBjb2xsYXBzZWQgfHxcbiAgICAgICAgICAvLyBEb24ndCBoaWRlIHRvdGFscy5cbiAgICAgICAgICAhc3VidG90YWxEaXNwbGF5LmhpZGVPbkV4cGFuZCksXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5jYWNoZWRQcm9wcyAhPT0gdGhpcy5wcm9wcykge1xuICAgICAgdGhpcy5jYWNoZWRQcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICB0aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzID0gdGhpcy5nZXRCYXNlUGl2b3RTZXR0aW5ncygpO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBjb2xBdHRycyxcbiAgICAgIHJvd0F0dHJzLFxuICAgICAgcm93S2V5cyxcbiAgICAgIGNvbEtleXMsXG4gICAgICBjb2xUb3RhbHMsXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXG4gICAgfSA9IHRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3M7XG5cbiAgICAvLyBOZWVkIHRvIGFjY291bnQgZm9yIGV4Y2x1c2lvbnMgdG8gY29tcHV0ZSB0aGUgZWZmZWN0aXZlIHJvd1xuICAgIC8vIGFuZCBjb2x1bW4ga2V5cy5cbiAgICBjb25zdCB2aXNpYmxlUm93S2V5cyA9IHRoaXMudmlzaWJsZUtleXMoXG4gICAgICByb3dLZXlzLFxuICAgICAgdGhpcy5zdGF0ZS5jb2xsYXBzZWRSb3dzLFxuICAgICAgcm93QXR0cnMubGVuZ3RoLFxuICAgICAgcm93U3VidG90YWxEaXNwbGF5LFxuICAgICk7XG4gICAgY29uc3QgdmlzaWJsZUNvbEtleXMgPSB0aGlzLnZpc2libGVLZXlzKFxuICAgICAgY29sS2V5cyxcbiAgICAgIHRoaXMuc3RhdGUuY29sbGFwc2VkQ29scyxcbiAgICAgIGNvbEF0dHJzLmxlbmd0aCxcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheSxcbiAgICApO1xuXG4gICAgY29uc3QgcGl2b3RTZXR0aW5ncyA9IHtcbiAgICAgIHZpc2libGVSb3dLZXlzLFxuICAgICAgbWF4Um93VmlzaWJsZTogTWF0aC5tYXgoLi4udmlzaWJsZVJvd0tleXMubWFwKGsgPT4gay5sZW5ndGgpKSxcbiAgICAgIHZpc2libGVDb2xLZXlzLFxuICAgICAgbWF4Q29sVmlzaWJsZTogTWF0aC5tYXgoLi4udmlzaWJsZUNvbEtleXMubWFwKGsgPT4gay5sZW5ndGgpKSxcbiAgICAgIHJvd0F0dHJTcGFuczogdGhpcy5jYWxjQXR0clNwYW5zKHZpc2libGVSb3dLZXlzLCByb3dBdHRycy5sZW5ndGgpLFxuICAgICAgY29sQXR0clNwYW5zOiB0aGlzLmNhbGNBdHRyU3BhbnModmlzaWJsZUNvbEtleXMsIGNvbEF0dHJzLmxlbmd0aCksXG4gICAgICAuLi50aGlzLmNhY2hlZEJhc2VQaXZvdFNldHRpbmdzLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFN0eWxlcz5cbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInB2dFRhYmxlXCIgcm9sZT1cImdyaWRcIj5cbiAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICB7Y29sQXR0cnMubWFwKChjLCBqKSA9PlxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbEhlYWRlclJvdyhjLCBqLCBwaXZvdFNldHRpbmdzKSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7cm93QXR0cnMubGVuZ3RoICE9PSAwICYmIHRoaXMucmVuZGVyUm93SGVhZGVyUm93KHBpdm90U2V0dGluZ3MpfVxuICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAge3Zpc2libGVSb3dLZXlzLm1hcCgociwgaSkgPT5cbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYWJsZVJvdyhyLCBpLCBwaXZvdFNldHRpbmdzKSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7Y29sVG90YWxzICYmIHRoaXMucmVuZGVyVG90YWxzUm93KHBpdm90U2V0dGluZ3MpfVxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L1N0eWxlcz5cbiAgICApO1xuICB9XG59XG5cblRhYmxlUmVuZGVyZXIucHJvcFR5cGVzID0ge1xuICAuLi5QaXZvdERhdGEucHJvcFR5cGVzLFxuICB0YWJsZU9wdGlvbnM6IFByb3BUeXBlcy5vYmplY3QsXG59O1xuVGFibGVSZW5kZXJlci5kZWZhdWx0UHJvcHMgPSB7IC4uLlBpdm90RGF0YS5kZWZhdWx0UHJvcHMsIHRhYmxlT3B0aW9uczoge30gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js":
/*!****************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"aggregatorTemplates\": () => (/* binding */ aggregatorTemplates),\n/* harmony export */   \"sortAs\": () => (/* binding */ sortAs),\n/* harmony export */   \"flatKey\": () => (/* binding */ flatKey),\n/* harmony export */   \"PivotData\": () => (/* binding */ PivotData)\n/* harmony export */ });\n/* unused harmony exports aggregators, derivers, locales, naturalSort, numberFormat, getSort */\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ \"./node_modules/core-js/modules/es.string.replace.js\");\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\nconst addSeparators = function (nStr, thousandsSep, decimalSep) {\n  const x = String(nStr).split('.');\n  let x1 = x[0];\n  const x2 = x.length > 1 ? decimalSep + x[1] : '';\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, `$1${thousandsSep}$2`);\n  }\n  return x1 + x2;\n};\n\nconst numberFormat = function (optsIn) {\n  const defaults = {\n    digitsAfterDecimal: 2,\n    scaler: 1,\n    thousandsSep: ',',\n    decimalSep: '.',\n    prefix: '',\n    suffix: '' };\n\n  const opts = { ...defaults, ...optsIn };\n  return function (x) {\n    if (Number.isNaN(x) || !Number.isFinite(x)) {\n      return '';\n    }\n    const result = addSeparators(\n    (opts.scaler * x).toFixed(opts.digitsAfterDecimal),\n    opts.thousandsSep,\n    opts.decimalSep);\n\n    return `${opts.prefix}${result}${opts.suffix}`;\n  };\n};\n\nconst rx = /(\\d+)|(\\D+)/g;\nconst rd = /\\d/;\nconst rz = /^0/;\nconst naturalSort = (as, bs) => {\n  // nulls first\n  if (bs !== null && as === null) {\n    return -1;\n  }\n  if (as !== null && bs === null) {\n    return 1;\n  }\n\n  // then raw NaNs\n  if (typeof as === 'number' && Number.isNaN(as)) {\n    return -1;\n  }\n  if (typeof bs === 'number' && Number.isNaN(bs)) {\n    return 1;\n  }\n\n  // numbers and numbery strings group together\n  const nas = Number(as);\n  const nbs = Number(bs);\n  if (nas < nbs) {\n    return -1;\n  }\n  if (nas > nbs) {\n    return 1;\n  }\n\n  // within that, true numbers before numbery strings\n  if (typeof as === 'number' && typeof bs !== 'number') {\n    return -1;\n  }\n  if (typeof bs === 'number' && typeof as !== 'number') {\n    return 1;\n  }\n  if (typeof as === 'number' && typeof bs === 'number') {\n    return 0;\n  }\n\n  // 'Infinity' is a textual number, so less than 'A'\n  if (Number.isNaN(nbs) && !Number.isNaN(nas)) {\n    return -1;\n  }\n  if (Number.isNaN(nas) && !Number.isNaN(nbs)) {\n    return 1;\n  }\n\n  // finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n  let a = String(as);\n  let b = String(bs);\n  if (a === b) {\n    return 0;\n  }\n  if (!rd.test(a) || !rd.test(b)) {\n    return a > b ? 1 : -1;\n  }\n\n  // special treatment for strings containing digits\n  a = a.match(rx);\n  b = b.match(rx);\n  while (a.length && b.length) {\n    const a1 = a.shift();\n    const b1 = b.shift();\n    if (a1 !== b1) {\n      if (rd.test(a1) && rd.test(b1)) {\n        return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n      }\n      return a1 > b1 ? 1 : -1;\n    }\n  }\n  return a.length - b.length;\n};\n\nconst sortAs = function (order) {\n  const mapping = {};\n\n  // sort lowercased keys similarly\n  const lMapping = {};\n  order.forEach((element, i) => {\n    mapping[element] = i;\n    if (typeof element === 'string') {\n      lMapping[element.toLowerCase()] = i;\n    }\n  });\n  return function (a, b) {\n    if (a in mapping && b in mapping) {\n      return mapping[a] - mapping[b];\n    }\n    if (a in mapping) {\n      return -1;\n    }\n    if (b in mapping) {\n      return 1;\n    }\n    if (a in lMapping && b in lMapping) {\n      return lMapping[a] - lMapping[b];\n    }\n    if (a in lMapping) {\n      return -1;\n    }\n    if (b in lMapping) {\n      return 1;\n    }\n    return naturalSort(a, b);\n  };\n};\n\nconst getSort = function (sorters, attr) {\n  if (sorters) {\n    if (typeof sorters === 'function') {\n      const sort = sorters(attr);\n      if (typeof sort === 'function') {\n        return sort;\n      }\n    } else if (attr in sorters) {\n      return sorters[attr];\n    }\n  }\n  return naturalSort;\n};\n\n// aggregator templates default to US number formatting but this is overrideable\nconst usFmt = numberFormat();\nconst usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\nconst usFmtPct = numberFormat({\n  digitsAfterDecimal: 1,\n  scaler: 100,\n  suffix: '%' });\n\n\nconst baseAggregatorTemplates = {\n  count(formatter = usFmtInt) {\n    return () =>\n    function () {\n      return {\n        count: 0,\n        push() {\n          this.count += 1;\n        },\n        value() {\n          return this.count;\n        },\n        format: formatter };\n\n    };\n  },\n\n  uniques(fn, formatter = usFmtInt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          uniq: [],\n          push(record) {\n            if (!Array.from(this.uniq).includes(record[attr])) {\n              this.uniq.push(record[attr]);\n            }\n          },\n          value() {\n            return fn(this.uniq);\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  sum(formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          sum: 0,\n          push(record) {\n            if (!Number.isNaN(parseFloat(record[attr]))) {\n              this.sum += parseFloat(record[attr]);\n            }\n          },\n          value() {\n            return this.sum;\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  extremes(mode, formatter = usFmt) {\n    return function ([attr]) {\n      return function (data) {\n        return {\n          val: null,\n          sorter: getSort(\n          typeof data !== 'undefined' ? data.sorters : null,\n          attr),\n\n          push(record) {\n            let x = record[attr];\n            if (['min', 'max'].includes(mode)) {\n              x = parseFloat(x);\n              if (!Number.isNaN(x)) {\n                this.val = Math[mode](x, this.val !== null ? this.val : x);\n              }\n            }\n            if (\n            mode === 'first' &&\n            this.sorter(x, this.val !== null ? this.val : x) <= 0)\n            {\n              this.val = x;\n            }\n            if (\n            mode === 'last' &&\n            this.sorter(x, this.val !== null ? this.val : x) >= 0)\n            {\n              this.val = x;\n            }\n          },\n          value() {\n            return this.val;\n          },\n          format(x) {\n            if (Number.isNaN(x)) {\n              return x;\n            }\n            return formatter(x);\n          },\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  quantile(q, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          vals: [],\n          push(record) {\n            const x = parseFloat(record[attr]);\n            if (!Number.isNaN(x)) {\n              this.vals.push(x);\n            }\n          },\n          value() {\n            if (this.vals.length === 0) {\n              return null;\n            }\n            this.vals.sort((a, b) => a - b);\n            const i = (this.vals.length - 1) * q;\n            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  runningStat(mode = 'mean', ddof = 1, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          n: 0.0,\n          m: 0.0,\n          s: 0.0,\n          push(record) {\n            const x = parseFloat(record[attr]);\n            if (Number.isNaN(x)) {\n              return;\n            }\n            this.n += 1.0;\n            if (this.n === 1.0) {\n              this.m = x;\n            }\n            const mNew = this.m + (x - this.m) / this.n;\n            this.s += (x - this.m) * (x - mNew);\n            this.m = mNew;\n          },\n          value() {\n            if (mode === 'mean') {\n              if (this.n === 0) {\n                return 0 / 0;\n              }\n              return this.m;\n            }\n            if (this.n <= ddof) {\n              return 0;\n            }\n            switch (mode) {\n              case 'var':\n                return this.s / (this.n - ddof);\n              case 'stdev':\n                return Math.sqrt(this.s / (this.n - ddof));\n              default:\n                throw new Error('unknown mode for runningStat');}\n\n          },\n          format: formatter,\n          numInputs: typeof attr !== 'undefined' ? 0 : 1 };\n\n      };\n    };\n  },\n\n  sumOverSum(formatter = usFmt) {\n    return function ([num, denom]) {\n      return function () {\n        return {\n          sumNum: 0,\n          sumDenom: 0,\n          push(record) {\n            if (!Number.isNaN(parseFloat(record[num]))) {\n              this.sumNum += parseFloat(record[num]);\n            }\n            if (!Number.isNaN(parseFloat(record[denom]))) {\n              this.sumDenom += parseFloat(record[denom]);\n            }\n          },\n          value() {\n            return this.sumNum / this.sumDenom;\n          },\n          format: formatter,\n          numInputs:\n          typeof num !== 'undefined' && typeof denom !== 'undefined' ? 0 : 2 };\n\n      };\n    };\n  },\n\n  fractionOf(wrapped, type = 'total', formatter = usFmtPct) {\n    return (...x) =>\n    function (data, rowKey, colKey) {\n      return {\n        selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[\n        type],\n\n        inner: wrapped(...Array.from(x || []))(data, rowKey, colKey),\n        push(record) {\n          this.inner.push(record);\n        },\n        format: formatter,\n        value() {\n          return (\n            this.inner.value() /\n            data.\n            getAggregator(...Array.from(this.selector || [])).\n            inner.value());\n\n        },\n        numInputs: wrapped(...Array.from(x || []))().numInputs };\n\n    };\n  } };\n\n\nconst extendedAggregatorTemplates = {\n  countUnique(f) {\n    return baseAggregatorTemplates.uniques((x) => x.length, f);\n  },\n  listUnique(s, f) {\n    return baseAggregatorTemplates.uniques((x) => x.join(s), f || ((x) => x));\n  },\n  max(f) {\n    return baseAggregatorTemplates.extremes('max', f);\n  },\n  min(f) {\n    return baseAggregatorTemplates.extremes('min', f);\n  },\n  first(f) {\n    return baseAggregatorTemplates.extremes('first', f);\n  },\n  last(f) {\n    return baseAggregatorTemplates.extremes('last', f);\n  },\n  median(f) {\n    return baseAggregatorTemplates.quantile(0.5, f);\n  },\n  average(f) {\n    return baseAggregatorTemplates.runningStat('mean', 1, f);\n  },\n  var(ddof, f) {\n    return baseAggregatorTemplates.runningStat('var', ddof, f);\n  },\n  stdev(ddof, f) {\n    return baseAggregatorTemplates.runningStat('stdev', ddof, f);\n  } };\n\n\nconst aggregatorTemplates = {\n  ...baseAggregatorTemplates,\n  ...extendedAggregatorTemplates };\n\n\n// default aggregators & renderers use US naming and number formatting\nconst aggregators = ((tpl) => ({\n  Count: tpl.count(usFmtInt),\n  'Count Unique Values': tpl.countUnique(usFmtInt),\n  'List Unique Values': tpl.listUnique(', '),\n  Sum: tpl.sum(usFmt),\n  'Integer Sum': tpl.sum(usFmtInt),\n  Average: tpl.average(usFmt),\n  Median: tpl.median(usFmt),\n  'Sample Variance': tpl.var(1, usFmt),\n  'Sample Standard Deviation': tpl.stdev(1, usFmt),\n  Minimum: tpl.min(usFmt),\n  Maximum: tpl.max(usFmt),\n  First: tpl.first(usFmt),\n  Last: tpl.last(usFmt),\n  'Sum over Sum': tpl.sumOverSum(usFmt),\n  'Sum as Fraction of Total': tpl.fractionOf(tpl.sum(), 'total', usFmtPct),\n  'Sum as Fraction of Rows': tpl.fractionOf(tpl.sum(), 'row', usFmtPct),\n  'Sum as Fraction of Columns': tpl.fractionOf(tpl.sum(), 'col', usFmtPct),\n  'Count as Fraction of Total': tpl.fractionOf(tpl.count(), 'total', usFmtPct),\n  'Count as Fraction of Rows': tpl.fractionOf(tpl.count(), 'row', usFmtPct),\n  'Count as Fraction of Columns': tpl.fractionOf(tpl.count(), 'col', usFmtPct) }))(\naggregatorTemplates);\n\nconst locales = {\n  en: {\n    aggregators,\n    localeStrings: {\n      renderError: 'An error occurred rendering the PivotTable results.',\n      computeError: 'An error occurred computing the PivotTable results.',\n      uiRenderError: 'An error occurred rendering the PivotTable UI.',\n      selectAll: 'Select All',\n      selectNone: 'Select None',\n      tooMany: '(too many to list)',\n      filterResults: 'Filter values',\n      apply: 'Apply',\n      cancel: 'Cancel',\n      totals: 'Totals',\n      vs: 'vs',\n      by: 'by' } } };\n\n\n\n\n// dateFormat deriver l10n requires month and day names to be passed in directly\nconst mthNamesEn = [\n'Jan',\n'Feb',\n'Mar',\n'Apr',\n'May',\n'Jun',\n'Jul',\n'Aug',\n'Sep',\n'Oct',\n'Nov',\n'Dec'];\n\nconst dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst zeroPad = (number) => `0${number}`.substr(-2, 2); // eslint-disable-line no-magic-numbers\n\nconst derivers = {\n  bin(col, binWidth) {\n    return (record) => record[col] - record[col] % binWidth;\n  },\n  dateFormat(\n  col,\n  formatString,\n  utcOutput = false,\n  mthNames = mthNamesEn,\n  dayNames = dayNamesEn)\n  {\n    const utc = utcOutput ? 'UTC' : '';\n    return function (record) {\n      const date = new Date(Date.parse(record[col]));\n      if (Number.isNaN(date)) {\n        return '';\n      }\n      return formatString.replace(/%(.)/g, function (m, p) {\n        switch (p) {\n          case 'y':\n            return date[`get${utc}FullYear`]();\n          case 'm':\n            return zeroPad(date[`get${utc}Month`]() + 1);\n          case 'n':\n            return mthNames[date[`get${utc}Month`]()];\n          case 'd':\n            return zeroPad(date[`get${utc}Date`]());\n          case 'w':\n            return dayNames[date[`get${utc}Day`]()];\n          case 'x':\n            return date[`get${utc}Day`]();\n          case 'H':\n            return zeroPad(date[`get${utc}Hours`]());\n          case 'M':\n            return zeroPad(date[`get${utc}Minutes`]());\n          case 'S':\n            return zeroPad(date[`get${utc}Seconds`]());\n          default:\n            return `%${p}`;}\n\n      });\n    };\n  } };\n\n\n// Given an array of attribute values, convert to a key that\n// can be used in objects.\nconst flatKey = (attrVals) => attrVals.join(String.fromCharCode(0));\n\n/*\nData Model class\n*/\n\nclass PivotData {\n  constructor(inputProps = {}, subtotals = {}) {\n    this.props = { ...PivotData.defaultProps, ...inputProps };\n    this.processRecord = this.processRecord.bind(this);\n    prop_types__WEBPACK_IMPORTED_MODULE_1___default().checkPropTypes(\n    PivotData.propTypes,\n    this.props,\n    'prop',\n    'PivotData');\n\n\n    this.aggregator = this.props.\n    aggregatorsFactory(this.props.defaultFormatter)[\n    this.props.aggregatorName](this.props.vals);\n    this.formattedAggregators =\n    this.props.customFormatters &&\n    Object.entries(this.props.customFormatters).reduce(\n    (acc, [key, columnFormatter]) => {\n      acc[key] = {};\n      Object.entries(columnFormatter).forEach(([column, formatter]) => {\n        acc[key][column] = this.props.\n        aggregatorsFactory(formatter)[\n        this.props.aggregatorName](this.props.vals);\n      });\n      return acc;\n    },\n    {});\n\n    this.tree = {};\n    this.rowKeys = [];\n    this.colKeys = [];\n    this.rowTotals = {};\n    this.colTotals = {};\n    this.allTotal = this.aggregator(this, [], []);\n    this.subtotals = subtotals;\n    this.sorted = false;\n\n    // iterate through input, accumulating data for cells\n    PivotData.forEachRecord(this.props.data, this.processRecord);\n  }\n\n  getFormattedAggregator(record, totalsKeys) {\n    if (!this.formattedAggregators) {\n      return this.aggregator;\n    }\n    const [groupName, groupValue] =\n    Object.entries(record).find(\n    ([name, value]) =>\n    this.formattedAggregators[name] &&\n    this.formattedAggregators[name][value]) ||\n    [];\n    if (\n    !groupName ||\n    !groupValue ||\n    totalsKeys && !totalsKeys.includes(groupValue))\n    {\n      return this.aggregator;\n    }\n    return this.formattedAggregators[groupName][groupValue] || this.aggregator;\n  }\n\n  arrSort(attrs, partialOnTop, reverse = false) {\n    const sortersArr = attrs.map((a) => getSort(this.props.sorters, a));\n    return function (a, b) {\n      const limit = Math.min(a.length, b.length);\n      for (let i = 0; i < limit; i += 1) {\n        const sorter = sortersArr[i];\n        const comparison = reverse ? sorter(b[i], a[i]) : sorter(a[i], b[i]);\n        if (comparison !== 0) {\n          return comparison;\n        }\n      }\n      return partialOnTop ? a.length - b.length : b.length - a.length;\n    };\n  }\n\n  sortKeys() {\n    if (!this.sorted) {\n      this.sorted = true;\n      const v = (r, c) => this.getAggregator(r, c).value();\n      switch (this.props.rowOrder) {\n        case 'key_z_to_a':\n          this.rowKeys.sort(\n          this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop, true));\n\n          break;\n        case 'value_a_to_z':\n          this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n          break;\n        case 'value_z_to_a':\n          this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n          break;\n        default:\n          this.rowKeys.sort(\n          this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop));}\n\n\n      switch (this.props.colOrder) {\n        case 'key_z_to_a':\n          this.colKeys.sort(\n          this.arrSort(this.props.cols, this.subtotals.colPartialOnTop, true));\n\n          break;\n        case 'value_a_to_z':\n          this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n          break;\n        case 'value_z_to_a':\n          this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n          break;\n        default:\n          this.colKeys.sort(\n          this.arrSort(this.props.cols, this.subtotals.colPartialOnTop));}\n\n\n    }\n  }\n\n  getColKeys() {\n    this.sortKeys();\n    return this.colKeys;\n  }\n\n  getRowKeys() {\n    this.sortKeys();\n    return this.rowKeys;\n  }\n\n  processRecord(record) {\n    // this code is called in a tight loop\n    const colKey = [];\n    const rowKey = [];\n    this.props.cols.forEach((col) => {\n      colKey.push(col in record ? record[col] : 'null');\n    });\n    this.props.rows.forEach((row) => {\n      rowKey.push(row in record ? record[row] : 'null');\n    });\n\n    this.allTotal.push(record);\n\n    const rowStart = this.subtotals.rowEnabled ? 1 : Math.max(1, rowKey.length);\n    const colStart = this.subtotals.colEnabled ? 1 : Math.max(1, colKey.length);\n\n    let isRowSubtotal;\n    let isColSubtotal;\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.rowTotals[flatRowKey]) {\n        this.rowKeys.push(fRowKey);\n        this.rowTotals[flatRowKey] = this.getFormattedAggregator(\n        record,\n        rowKey)(\n        this, fRowKey, []);\n      }\n      this.rowTotals[flatRowKey].push(record);\n      this.rowTotals[flatRowKey].isSubtotal = isRowSubtotal;\n    }\n\n    for (let ci = colStart; ci <= colKey.length; ci += 1) {\n      isColSubtotal = ci < colKey.length;\n      const fColKey = colKey.slice(0, ci);\n      const flatColKey = flatKey(fColKey);\n      if (!this.colTotals[flatColKey]) {\n        this.colKeys.push(fColKey);\n        this.colTotals[flatColKey] = this.getFormattedAggregator(\n        record,\n        colKey)(\n        this, [], fColKey);\n      }\n      this.colTotals[flatColKey].push(record);\n      this.colTotals[flatColKey].isSubtotal = isColSubtotal;\n    }\n\n    // And now fill in for all the sub-cells.\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.tree[flatRowKey]) {\n        this.tree[flatRowKey] = {};\n      }\n      for (let ci = colStart; ci <= colKey.length; ci += 1) {\n        isColSubtotal = ci < colKey.length;\n        const fColKey = colKey.slice(0, ci);\n        const flatColKey = flatKey(fColKey);\n        if (!this.tree[flatRowKey][flatColKey]) {\n          this.tree[flatRowKey][flatColKey] = this.getFormattedAggregator(\n          record)(\n          this, fRowKey, fColKey);\n        }\n        this.tree[flatRowKey][flatColKey].push(record);\n\n        this.tree[flatRowKey][flatColKey].isRowSubtotal = isRowSubtotal;\n        this.tree[flatRowKey][flatColKey].isColSubtotal = isColSubtotal;\n        this.tree[flatRowKey][flatColKey].isSubtotal =\n        isRowSubtotal || isColSubtotal;\n      }\n    }\n  }\n\n  getAggregator(rowKey, colKey) {\n    let agg;\n    const flatRowKey = flatKey(rowKey);\n    const flatColKey = flatKey(colKey);\n    if (rowKey.length === 0 && colKey.length === 0) {\n      agg = this.allTotal;\n    } else if (rowKey.length === 0) {\n      agg = this.colTotals[flatColKey];\n    } else if (colKey.length === 0) {\n      agg = this.rowTotals[flatRowKey];\n    } else {\n      agg = this.tree[flatRowKey][flatColKey];\n    }\n    return (\n      agg || {\n        value() {\n          return null;\n        },\n        format() {\n          return '';\n        } });\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\n// can handle arrays or jQuery selections of tables\nPivotData.forEachRecord = function (input, processRecord) {\n  if (Array.isArray(input)) {\n    // array of objects\n    return input.map((record) => processRecord(record));\n  }\n  throw new Error((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Unknown input format'));\n};\n\nPivotData.defaultProps = {\n  aggregators,\n  cols: [],\n  rows: [],\n  vals: [],\n  aggregatorName: 'Count',\n  sorters: {},\n  rowOrder: 'key_a_to_z',\n  colOrder: 'key_a_to_z' };\n\n\nPivotData.propTypes = {\n  data: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_1___default().array), (prop_types__WEBPACK_IMPORTED_MODULE_1___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func)]).\n  isRequired,\n  aggregatorName: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),\n  cols: prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)),\n  rows: prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)),\n  vals: prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)),\n  valueFilter: prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool))),\n  sorters: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([\n  (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func),\n  prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().func))]),\n\n  derivedAttributes: prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().func)),\n  rowOrder: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']),\n\n  colOrder: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']) };\n\n\n\n;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(addSeparators, \"addSeparators\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(numberFormat, \"numberFormat\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(rx, \"rx\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(rd, \"rd\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(rz, \"rz\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(naturalSort, \"naturalSort\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(sortAs, \"sortAs\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(getSort, \"getSort\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(usFmt, \"usFmt\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(usFmtInt, \"usFmtInt\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(usFmtPct, \"usFmtPct\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(baseAggregatorTemplates, \"baseAggregatorTemplates\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(extendedAggregatorTemplates, \"extendedAggregatorTemplates\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(aggregatorTemplates, \"aggregatorTemplates\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(aggregators, \"aggregators\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(locales, \"locales\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(mthNamesEn, \"mthNamesEn\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(dayNamesEn, \"dayNamesEn\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(zeroPad, \"zeroPad\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(derivers, \"derivers\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(flatKey, \"flatKey\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(PivotData, \"PivotData\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFqT0E7QUFBQTtBQW9PQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQWNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanM/YmY1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuXG5jb25zdCBhZGRTZXBhcmF0b3JzID0gZnVuY3Rpb24gKG5TdHIsIHRob3VzYW5kc1NlcCwgZGVjaW1hbFNlcCkge1xuICBjb25zdCB4ID0gU3RyaW5nKG5TdHIpLnNwbGl0KCcuJyk7XG4gIGxldCB4MSA9IHhbMF07XG4gIGNvbnN0IHgyID0geC5sZW5ndGggPiAxID8gZGVjaW1hbFNlcCArIHhbMV0gOiAnJztcbiAgY29uc3Qgcmd4ID0gLyhcXGQrKShcXGR7M30pLztcbiAgd2hpbGUgKHJneC50ZXN0KHgxKSkge1xuICAgIHgxID0geDEucmVwbGFjZShyZ3gsIGAkMSR7dGhvdXNhbmRzU2VwfSQyYCk7XG4gIH1cbiAgcmV0dXJuIHgxICsgeDI7XG59O1xuXG5jb25zdCBudW1iZXJGb3JtYXQgPSBmdW5jdGlvbiAob3B0c0luKSB7XG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGRpZ2l0c0FmdGVyRGVjaW1hbDogMixcbiAgICBzY2FsZXI6IDEsXG4gICAgdGhvdXNhbmRzU2VwOiAnLCcsXG4gICAgZGVjaW1hbFNlcDogJy4nLFxuICAgIHByZWZpeDogJycsXG4gICAgc3VmZml4OiAnJyxcbiAgfTtcbiAgY29uc3Qgb3B0cyA9IHsgLi4uZGVmYXVsdHMsIC4uLm9wdHNJbiB9O1xuICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHgpIHx8ICFOdW1iZXIuaXNGaW5pdGUoeCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYWRkU2VwYXJhdG9ycyhcbiAgICAgIChvcHRzLnNjYWxlciAqIHgpLnRvRml4ZWQob3B0cy5kaWdpdHNBZnRlckRlY2ltYWwpLFxuICAgICAgb3B0cy50aG91c2FuZHNTZXAsXG4gICAgICBvcHRzLmRlY2ltYWxTZXAsXG4gICAgKTtcbiAgICByZXR1cm4gYCR7b3B0cy5wcmVmaXh9JHtyZXN1bHR9JHtvcHRzLnN1ZmZpeH1gO1xuICB9O1xufTtcblxuY29uc3QgcnggPSAvKFxcZCspfChcXEQrKS9nO1xuY29uc3QgcmQgPSAvXFxkLztcbmNvbnN0IHJ6ID0gL14wLztcbmNvbnN0IG5hdHVyYWxTb3J0ID0gKGFzLCBicykgPT4ge1xuICAvLyBudWxscyBmaXJzdFxuICBpZiAoYnMgIT09IG51bGwgJiYgYXMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKGFzICE9PSBudWxsICYmIGJzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvLyB0aGVuIHJhdyBOYU5zXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIE51bWJlci5pc05hTihhcykpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHR5cGVvZiBicyA9PT0gJ251bWJlcicgJiYgTnVtYmVyLmlzTmFOKGJzKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgLy8gbnVtYmVycyBhbmQgbnVtYmVyeSBzdHJpbmdzIGdyb3VwIHRvZ2V0aGVyXG4gIGNvbnN0IG5hcyA9IE51bWJlcihhcyk7XG4gIGNvbnN0IG5icyA9IE51bWJlcihicyk7XG4gIGlmIChuYXMgPCBuYnMpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKG5hcyA+IG5icykge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgLy8gd2l0aGluIHRoYXQsIHRydWUgbnVtYmVycyBiZWZvcmUgbnVtYmVyeSBzdHJpbmdzXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIHR5cGVvZiBicyAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHR5cGVvZiBicyA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGFzICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiAxO1xuICB9XG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIHR5cGVvZiBicyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vICdJbmZpbml0eScgaXMgYSB0ZXh0dWFsIG51bWJlciwgc28gbGVzcyB0aGFuICdBJ1xuICBpZiAoTnVtYmVyLmlzTmFOKG5icykgJiYgIU51bWJlci5pc05hTihuYXMpKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmIChOdW1iZXIuaXNOYU4obmFzKSAmJiAhTnVtYmVyLmlzTmFOKG5icykpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8vIGZpbmFsbHksIFwic21hcnRcIiBzdHJpbmcgc29ydGluZyBwZXIgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDM3MzQyMS8xMTI4NzFcbiAgbGV0IGEgPSBTdHJpbmcoYXMpO1xuICBsZXQgYiA9IFN0cmluZyhicyk7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgaWYgKCFyZC50ZXN0KGEpIHx8ICFyZC50ZXN0KGIpKSB7XG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IC0xO1xuICB9XG5cbiAgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIHN0cmluZ3MgY29udGFpbmluZyBkaWdpdHNcbiAgYSA9IGEubWF0Y2gocngpO1xuICBiID0gYi5tYXRjaChyeCk7XG4gIHdoaWxlIChhLmxlbmd0aCAmJiBiLmxlbmd0aCkge1xuICAgIGNvbnN0IGExID0gYS5zaGlmdCgpO1xuICAgIGNvbnN0IGIxID0gYi5zaGlmdCgpO1xuICAgIGlmIChhMSAhPT0gYjEpIHtcbiAgICAgIGlmIChyZC50ZXN0KGExKSAmJiByZC50ZXN0KGIxKSkge1xuICAgICAgICByZXR1cm4gYTEucmVwbGFjZShyeiwgJy4wJykgLSBiMS5yZXBsYWNlKHJ6LCAnLjAnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhMSA+IGIxID8gMSA6IC0xO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYS5sZW5ndGggLSBiLmxlbmd0aDtcbn07XG5cbmNvbnN0IHNvcnRBcyA9IGZ1bmN0aW9uIChvcmRlcikge1xuICBjb25zdCBtYXBwaW5nID0ge307XG5cbiAgLy8gc29ydCBsb3dlcmNhc2VkIGtleXMgc2ltaWxhcmx5XG4gIGNvbnN0IGxNYXBwaW5nID0ge307XG4gIG9yZGVyLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICBtYXBwaW5nW2VsZW1lbnRdID0gaTtcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsTWFwcGluZ1tlbGVtZW50LnRvTG93ZXJDYXNlKCldID0gaTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoYSBpbiBtYXBwaW5nICYmIGIgaW4gbWFwcGluZykge1xuICAgICAgcmV0dXJuIG1hcHBpbmdbYV0gLSBtYXBwaW5nW2JdO1xuICAgIH1cbiAgICBpZiAoYSBpbiBtYXBwaW5nKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlmIChiIGluIG1hcHBpbmcpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBpZiAoYSBpbiBsTWFwcGluZyAmJiBiIGluIGxNYXBwaW5nKSB7XG4gICAgICByZXR1cm4gbE1hcHBpbmdbYV0gLSBsTWFwcGluZ1tiXTtcbiAgICB9XG4gICAgaWYgKGEgaW4gbE1hcHBpbmcpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKGIgaW4gbE1hcHBpbmcpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gbmF0dXJhbFNvcnQoYSwgYik7XG4gIH07XG59O1xuXG5jb25zdCBnZXRTb3J0ID0gZnVuY3Rpb24gKHNvcnRlcnMsIGF0dHIpIHtcbiAgaWYgKHNvcnRlcnMpIHtcbiAgICBpZiAodHlwZW9mIHNvcnRlcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnN0IHNvcnQgPSBzb3J0ZXJzKGF0dHIpO1xuICAgICAgaWYgKHR5cGVvZiBzb3J0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzb3J0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXR0ciBpbiBzb3J0ZXJzKSB7XG4gICAgICByZXR1cm4gc29ydGVyc1thdHRyXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5hdHVyYWxTb3J0O1xufTtcblxuLy8gYWdncmVnYXRvciB0ZW1wbGF0ZXMgZGVmYXVsdCB0byBVUyBudW1iZXIgZm9ybWF0dGluZyBidXQgdGhpcyBpcyBvdmVycmlkZWFibGVcbmNvbnN0IHVzRm10ID0gbnVtYmVyRm9ybWF0KCk7XG5jb25zdCB1c0ZtdEludCA9IG51bWJlckZvcm1hdCh7IGRpZ2l0c0FmdGVyRGVjaW1hbDogMCB9KTtcbmNvbnN0IHVzRm10UGN0ID0gbnVtYmVyRm9ybWF0KHtcbiAgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAxLFxuICBzY2FsZXI6IDEwMCxcbiAgc3VmZml4OiAnJScsXG59KTtcblxuY29uc3QgYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMgPSB7XG4gIGNvdW50KGZvcm1hdHRlciA9IHVzRm10SW50KSB7XG4gICAgcmV0dXJuICgpID0+XG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgcHVzaCgpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQgKz0gMTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JtYXQ6IGZvcm1hdHRlcixcbiAgICAgICAgfTtcbiAgICAgIH07XG4gIH0sXG5cbiAgdW5pcXVlcyhmbiwgZm9ybWF0dGVyID0gdXNGbXRJbnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1bmlxOiBbXSxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5mcm9tKHRoaXMudW5pcSkuaW5jbHVkZXMocmVjb3JkW2F0dHJdKSkge1xuICAgICAgICAgICAgICB0aGlzLnVuaXEucHVzaChyZWNvcmRbYXR0cl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4odGhpcy51bmlxKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0sXG5cbiAgc3VtKGZvcm1hdHRlciA9IHVzRm10KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VtOiAwLFxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihwYXJzZUZsb2F0KHJlY29yZFthdHRyXSkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3VtICs9IHBhcnNlRmxvYXQocmVjb3JkW2F0dHJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VtO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSxcblxuICBleHRyZW1lcyhtb2RlLCBmb3JtYXR0ZXIgPSB1c0ZtdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWw6IG51bGwsXG4gICAgICAgICAgc29ydGVyOiBnZXRTb3J0KFxuICAgICAgICAgICAgdHlwZW9mIGRhdGEgIT09ICd1bmRlZmluZWQnID8gZGF0YS5zb3J0ZXJzIDogbnVsbCxcbiAgICAgICAgICAgIGF0dHIsXG4gICAgICAgICAgKSxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgbGV0IHggPSByZWNvcmRbYXR0cl07XG4gICAgICAgICAgICBpZiAoWydtaW4nLCAnbWF4J10uaW5jbHVkZXMobW9kZSkpIHtcbiAgICAgICAgICAgICAgeCA9IHBhcnNlRmxvYXQoeCk7XG4gICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWwgPSBNYXRoW21vZGVdKHgsIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiB4KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBtb2RlID09PSAnZmlyc3QnICYmXG4gICAgICAgICAgICAgIHRoaXMuc29ydGVyKHgsIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiB4KSA8PSAwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdGhpcy52YWwgPSB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBtb2RlID09PSAnbGFzdCcgJiZcbiAgICAgICAgICAgICAgdGhpcy5zb3J0ZXIoeCwgdGhpcy52YWwgIT09IG51bGwgPyB0aGlzLnZhbCA6IHgpID49IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB0aGlzLnZhbCA9IHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdCh4KSB7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHgpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlcih4KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0sXG5cbiAgcXVhbnRpbGUocSwgZm9ybWF0dGVyID0gdXNGbXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKFthdHRyXSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxzOiBbXSxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgY29uc3QgeCA9IHBhcnNlRmxvYXQocmVjb3JkW2F0dHJdKTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHgpKSB7XG4gICAgICAgICAgICAgIHRoaXMudmFscy5wdXNoKHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFscy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICAgICAgICBjb25zdCBpID0gKHRoaXMudmFscy5sZW5ndGggLSAxKSAqIHE7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmFsc1tNYXRoLmZsb29yKGkpXSArIHRoaXMudmFsc1tNYXRoLmNlaWwoaSldKSAvIDIuMDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0sXG5cbiAgcnVubmluZ1N0YXQobW9kZSA9ICdtZWFuJywgZGRvZiA9IDEsIGZvcm1hdHRlciA9IHVzRm10KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbjogMC4wLFxuICAgICAgICAgIG06IDAuMCxcbiAgICAgICAgICBzOiAwLjAsXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSBwYXJzZUZsb2F0KHJlY29yZFthdHRyXSk7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKHgpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubiArPSAxLjA7XG4gICAgICAgICAgICBpZiAodGhpcy5uID09PSAxLjApIHtcbiAgICAgICAgICAgICAgdGhpcy5tID0geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1OZXcgPSB0aGlzLm0gKyAoeCAtIHRoaXMubSkgLyB0aGlzLm47XG4gICAgICAgICAgICB0aGlzLnMgKz0gKHggLSB0aGlzLm0pICogKHggLSBtTmV3KTtcbiAgICAgICAgICAgIHRoaXMubSA9IG1OZXc7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIGlmIChtb2RlID09PSAnbWVhbicpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMubiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwIC8gMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubiA8PSBkZG9mKSB7XG4gICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ3Zhcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucyAvICh0aGlzLm4gLSBkZG9mKTtcbiAgICAgICAgICAgICAgY2FzZSAnc3RkZXYnOlxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5zIC8gKHRoaXMubiAtIGRkb2YpKTtcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gbW9kZSBmb3IgcnVubmluZ1N0YXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0sXG5cbiAgc3VtT3ZlclN1bShmb3JtYXR0ZXIgPSB1c0ZtdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoW251bSwgZGVub21dKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1bU51bTogMCxcbiAgICAgICAgICBzdW1EZW5vbTogMCxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VGbG9hdChyZWNvcmRbbnVtXSkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3VtTnVtICs9IHBhcnNlRmxvYXQocmVjb3JkW251bV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VGbG9hdChyZWNvcmRbZGVub21dKSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdW1EZW5vbSArPSBwYXJzZUZsb2F0KHJlY29yZFtkZW5vbV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdW1OdW0gLyB0aGlzLnN1bURlbm9tO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9ybWF0OiBmb3JtYXR0ZXIsXG4gICAgICAgICAgbnVtSW5wdXRzOlxuICAgICAgICAgICAgdHlwZW9mIG51bSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRlbm9tICE9PSAndW5kZWZpbmVkJyA/IDAgOiAyLFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9LFxuXG4gIGZyYWN0aW9uT2Yod3JhcHBlZCwgdHlwZSA9ICd0b3RhbCcsIGZvcm1hdHRlciA9IHVzRm10UGN0KSB7XG4gICAgcmV0dXJuICguLi54KSA9PlxuICAgICAgZnVuY3Rpb24gKGRhdGEsIHJvd0tleSwgY29sS2V5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2VsZWN0b3I6IHsgdG90YWw6IFtbXSwgW11dLCByb3c6IFtyb3dLZXksIFtdXSwgY29sOiBbW10sIGNvbEtleV0gfVtcbiAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICBdLFxuICAgICAgICAgIGlubmVyOiB3cmFwcGVkKC4uLkFycmF5LmZyb20oeCB8fCBbXSkpKGRhdGEsIHJvd0tleSwgY29sS2V5KSxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgdGhpcy5pbm5lci5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JtYXQ6IGZvcm1hdHRlcixcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIHRoaXMuaW5uZXIudmFsdWUoKSAvXG4gICAgICAgICAgICAgIGRhdGFcbiAgICAgICAgICAgICAgICAuZ2V0QWdncmVnYXRvciguLi5BcnJheS5mcm9tKHRoaXMuc2VsZWN0b3IgfHwgW10pKVxuICAgICAgICAgICAgICAgIC5pbm5lci52YWx1ZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbnVtSW5wdXRzOiB3cmFwcGVkKC4uLkFycmF5LmZyb20oeCB8fCBbXSkpKCkubnVtSW5wdXRzLFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgfSxcbn07XG5cbmNvbnN0IGV4dGVuZGVkQWdncmVnYXRvclRlbXBsYXRlcyA9IHtcbiAgY291bnRVbmlxdWUoZikge1xuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy51bmlxdWVzKHggPT4geC5sZW5ndGgsIGYpO1xuICB9LFxuICBsaXN0VW5pcXVlKHMsIGYpIHtcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMudW5pcXVlcyh4ID0+IHguam9pbihzKSwgZiB8fCAoeCA9PiB4KSk7XG4gIH0sXG4gIG1heChmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdtYXgnLCBmKTtcbiAgfSxcbiAgbWluKGYpIHtcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ21pbicsIGYpO1xuICB9LFxuICBmaXJzdChmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdmaXJzdCcsIGYpO1xuICB9LFxuICBsYXN0KGYpIHtcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZXh0cmVtZXMoJ2xhc3QnLCBmKTtcbiAgfSxcbiAgbWVkaWFuKGYpIHtcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMucXVhbnRpbGUoMC41LCBmKTtcbiAgfSxcbiAgYXZlcmFnZShmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCdtZWFuJywgMSwgZik7XG4gIH0sXG4gIHZhcihkZG9mLCBmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnJ1bm5pbmdTdGF0KCd2YXInLCBkZG9mLCBmKTtcbiAgfSxcbiAgc3RkZXYoZGRvZiwgZikge1xuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5ydW5uaW5nU3RhdCgnc3RkZXYnLCBkZG9mLCBmKTtcbiAgfSxcbn07XG5cbmNvbnN0IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMgPSB7XG4gIC4uLmJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLFxuICAuLi5leHRlbmRlZEFnZ3JlZ2F0b3JUZW1wbGF0ZXMsXG59O1xuXG4vLyBkZWZhdWx0IGFnZ3JlZ2F0b3JzICYgcmVuZGVyZXJzIHVzZSBVUyBuYW1pbmcgYW5kIG51bWJlciBmb3JtYXR0aW5nXG5jb25zdCBhZ2dyZWdhdG9ycyA9ICh0cGwgPT4gKHtcbiAgQ291bnQ6IHRwbC5jb3VudCh1c0ZtdEludCksXG4gICdDb3VudCBVbmlxdWUgVmFsdWVzJzogdHBsLmNvdW50VW5pcXVlKHVzRm10SW50KSxcbiAgJ0xpc3QgVW5pcXVlIFZhbHVlcyc6IHRwbC5saXN0VW5pcXVlKCcsICcpLFxuICBTdW06IHRwbC5zdW0odXNGbXQpLFxuICAnSW50ZWdlciBTdW0nOiB0cGwuc3VtKHVzRm10SW50KSxcbiAgQXZlcmFnZTogdHBsLmF2ZXJhZ2UodXNGbXQpLFxuICBNZWRpYW46IHRwbC5tZWRpYW4odXNGbXQpLFxuICAnU2FtcGxlIFZhcmlhbmNlJzogdHBsLnZhcigxLCB1c0ZtdCksXG4gICdTYW1wbGUgU3RhbmRhcmQgRGV2aWF0aW9uJzogdHBsLnN0ZGV2KDEsIHVzRm10KSxcbiAgTWluaW11bTogdHBsLm1pbih1c0ZtdCksXG4gIE1heGltdW06IHRwbC5tYXgodXNGbXQpLFxuICBGaXJzdDogdHBsLmZpcnN0KHVzRm10KSxcbiAgTGFzdDogdHBsLmxhc3QodXNGbXQpLFxuICAnU3VtIG92ZXIgU3VtJzogdHBsLnN1bU92ZXJTdW0odXNGbXQpLFxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogdHBsLmZyYWN0aW9uT2YodHBsLnN1bSgpLCAndG90YWwnLCB1c0ZtdFBjdCksXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgUm93cyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5zdW0oKSwgJ3JvdycsIHVzRm10UGN0KSxcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogdHBsLmZyYWN0aW9uT2YodHBsLnN1bSgpLCAnY29sJywgdXNGbXRQY3QpLFxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgVG90YWwnOiB0cGwuZnJhY3Rpb25PZih0cGwuY291bnQoKSwgJ3RvdGFsJywgdXNGbXRQY3QpLFxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgUm93cyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAncm93JywgdXNGbXRQY3QpLFxuICAnQ291bnQgYXMgRnJhY3Rpb24gb2YgQ29sdW1ucyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5jb3VudCgpLCAnY29sJywgdXNGbXRQY3QpLFxufSkpKGFnZ3JlZ2F0b3JUZW1wbGF0ZXMpO1xuXG5jb25zdCBsb2NhbGVzID0ge1xuICBlbjoge1xuICAgIGFnZ3JlZ2F0b3JzLFxuICAgIGxvY2FsZVN0cmluZ3M6IHtcbiAgICAgIHJlbmRlckVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQgcmVuZGVyaW5nIHRoZSBQaXZvdFRhYmxlIHJlc3VsdHMuJyxcbiAgICAgIGNvbXB1dGVFcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIGNvbXB1dGluZyB0aGUgUGl2b3RUYWJsZSByZXN1bHRzLicsXG4gICAgICB1aVJlbmRlckVycm9yOiAnQW4gZXJyb3Igb2NjdXJyZWQgcmVuZGVyaW5nIHRoZSBQaXZvdFRhYmxlIFVJLicsXG4gICAgICBzZWxlY3RBbGw6ICdTZWxlY3QgQWxsJyxcbiAgICAgIHNlbGVjdE5vbmU6ICdTZWxlY3QgTm9uZScsXG4gICAgICB0b29NYW55OiAnKHRvbyBtYW55IHRvIGxpc3QpJyxcbiAgICAgIGZpbHRlclJlc3VsdHM6ICdGaWx0ZXIgdmFsdWVzJyxcbiAgICAgIGFwcGx5OiAnQXBwbHknLFxuICAgICAgY2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgIHRvdGFsczogJ1RvdGFscycsXG4gICAgICB2czogJ3ZzJyxcbiAgICAgIGJ5OiAnYnknLFxuICAgIH0sXG4gIH0sXG59O1xuXG4vLyBkYXRlRm9ybWF0IGRlcml2ZXIgbDEwbiByZXF1aXJlcyBtb250aCBhbmQgZGF5IG5hbWVzIHRvIGJlIHBhc3NlZCBpbiBkaXJlY3RseVxuY29uc3QgbXRoTmFtZXNFbiA9IFtcbiAgJ0phbicsXG4gICdGZWInLFxuICAnTWFyJyxcbiAgJ0FwcicsXG4gICdNYXknLFxuICAnSnVuJyxcbiAgJ0p1bCcsXG4gICdBdWcnLFxuICAnU2VwJyxcbiAgJ09jdCcsXG4gICdOb3YnLFxuICAnRGVjJyxcbl07XG5jb25zdCBkYXlOYW1lc0VuID0gWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXTtcbmNvbnN0IHplcm9QYWQgPSBudW1iZXIgPT4gYDAke251bWJlcn1gLnN1YnN0cigtMiwgMik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbWFnaWMtbnVtYmVyc1xuXG5jb25zdCBkZXJpdmVycyA9IHtcbiAgYmluKGNvbCwgYmluV2lkdGgpIHtcbiAgICByZXR1cm4gcmVjb3JkID0+IHJlY29yZFtjb2xdIC0gKHJlY29yZFtjb2xdICUgYmluV2lkdGgpO1xuICB9LFxuICBkYXRlRm9ybWF0KFxuICAgIGNvbCxcbiAgICBmb3JtYXRTdHJpbmcsXG4gICAgdXRjT3V0cHV0ID0gZmFsc2UsXG4gICAgbXRoTmFtZXMgPSBtdGhOYW1lc0VuLFxuICAgIGRheU5hbWVzID0gZGF5TmFtZXNFbixcbiAgKSB7XG4gICAgY29uc3QgdXRjID0gdXRjT3V0cHV0ID8gJ1VUQycgOiAnJztcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UocmVjb3JkW2NvbF0pKTtcbiAgICAgIGlmIChOdW1iZXIuaXNOYU4oZGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZvcm1hdFN0cmluZy5yZXBsYWNlKC8lKC4pL2csIGZ1bmN0aW9uIChtLCBwKSB7XG4gICAgICAgIHN3aXRjaCAocCkge1xuICAgICAgICAgIGNhc2UgJ3knOlxuICAgICAgICAgICAgcmV0dXJuIGRhdGVbYGdldCR7dXRjfUZ1bGxZZWFyYF0oKTtcbiAgICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfU1vbnRoYF0oKSArIDEpO1xuICAgICAgICAgIGNhc2UgJ24nOlxuICAgICAgICAgICAgcmV0dXJuIG10aE5hbWVzW2RhdGVbYGdldCR7dXRjfU1vbnRoYF0oKV07XG4gICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31EYXRlYF0oKSk7XG4gICAgICAgICAgY2FzZSAndyc6XG4gICAgICAgICAgICByZXR1cm4gZGF5TmFtZXNbZGF0ZVtgZ2V0JHt1dGN9RGF5YF0oKV07XG4gICAgICAgICAgY2FzZSAneCc6XG4gICAgICAgICAgICByZXR1cm4gZGF0ZVtgZ2V0JHt1dGN9RGF5YF0oKTtcbiAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgIHJldHVybiB6ZXJvUGFkKGRhdGVbYGdldCR7dXRjfUhvdXJzYF0oKSk7XG4gICAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31NaW51dGVzYF0oKSk7XG4gICAgICAgICAgY2FzZSAnUyc6XG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31TZWNvbmRzYF0oKSk7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBgJSR7cH1gO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9LFxufTtcblxuLy8gR2l2ZW4gYW4gYXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlcywgY29udmVydCB0byBhIGtleSB0aGF0XG4vLyBjYW4gYmUgdXNlZCBpbiBvYmplY3RzLlxuY29uc3QgZmxhdEtleSA9IGF0dHJWYWxzID0+IGF0dHJWYWxzLmpvaW4oU3RyaW5nLmZyb21DaGFyQ29kZSgwKSk7XG5cbi8qXG5EYXRhIE1vZGVsIGNsYXNzXG4qL1xuXG5jbGFzcyBQaXZvdERhdGEge1xuICBjb25zdHJ1Y3RvcihpbnB1dFByb3BzID0ge30sIHN1YnRvdGFscyA9IHt9KSB7XG4gICAgdGhpcy5wcm9wcyA9IHsgLi4uUGl2b3REYXRhLmRlZmF1bHRQcm9wcywgLi4uaW5wdXRQcm9wcyB9O1xuICAgIHRoaXMucHJvY2Vzc1JlY29yZCA9IHRoaXMucHJvY2Vzc1JlY29yZC5iaW5kKHRoaXMpO1xuICAgIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcyhcbiAgICAgIFBpdm90RGF0YS5wcm9wVHlwZXMsXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgJ3Byb3AnLFxuICAgICAgJ1Bpdm90RGF0YScsXG4gICAgKTtcblxuICAgIHRoaXMuYWdncmVnYXRvciA9IHRoaXMucHJvcHNcbiAgICAgIC5hZ2dyZWdhdG9yc0ZhY3RvcnkodGhpcy5wcm9wcy5kZWZhdWx0Rm9ybWF0dGVyKVxuICAgICAgW3RoaXMucHJvcHMuYWdncmVnYXRvck5hbWVdKHRoaXMucHJvcHMudmFscyk7XG4gICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9ycyA9XG4gICAgICB0aGlzLnByb3BzLmN1c3RvbUZvcm1hdHRlcnMgJiZcbiAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMucHJvcHMuY3VzdG9tRm9ybWF0dGVycykucmVkdWNlKFxuICAgICAgICAoYWNjLCBba2V5LCBjb2x1bW5Gb3JtYXR0ZXJdKSA9PiB7XG4gICAgICAgICAgYWNjW2tleV0gPSB7fTtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhjb2x1bW5Gb3JtYXR0ZXIpLmZvckVhY2goKFtjb2x1bW4sIGZvcm1hdHRlcl0pID0+IHtcbiAgICAgICAgICAgIGFjY1trZXldW2NvbHVtbl0gPSB0aGlzLnByb3BzXG4gICAgICAgICAgICAgIC5hZ2dyZWdhdG9yc0ZhY3RvcnkoZm9ybWF0dGVyKVxuICAgICAgICAgICAgICBbdGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZV0odGhpcy5wcm9wcy52YWxzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LFxuICAgICAgICB7fSxcbiAgICAgICk7XG4gICAgdGhpcy50cmVlID0ge307XG4gICAgdGhpcy5yb3dLZXlzID0gW107XG4gICAgdGhpcy5jb2xLZXlzID0gW107XG4gICAgdGhpcy5yb3dUb3RhbHMgPSB7fTtcbiAgICB0aGlzLmNvbFRvdGFscyA9IHt9O1xuICAgIHRoaXMuYWxsVG90YWwgPSB0aGlzLmFnZ3JlZ2F0b3IodGhpcywgW10sIFtdKTtcbiAgICB0aGlzLnN1YnRvdGFscyA9IHN1YnRvdGFscztcbiAgICB0aGlzLnNvcnRlZCA9IGZhbHNlO1xuXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGlucHV0LCBhY2N1bXVsYXRpbmcgZGF0YSBmb3IgY2VsbHNcbiAgICBQaXZvdERhdGEuZm9yRWFjaFJlY29yZCh0aGlzLnByb3BzLmRhdGEsIHRoaXMucHJvY2Vzc1JlY29yZCk7XG4gIH1cblxuICBnZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKHJlY29yZCwgdG90YWxzS2V5cykge1xuICAgIGlmICghdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9ycykge1xuICAgICAgcmV0dXJuIHRoaXMuYWdncmVnYXRvcjtcbiAgICB9XG4gICAgY29uc3QgW2dyb3VwTmFtZSwgZ3JvdXBWYWx1ZV0gPVxuICAgICAgT2JqZWN0LmVudHJpZXMocmVjb3JkKS5maW5kKFxuICAgICAgICAoW25hbWUsIHZhbHVlXSkgPT5cbiAgICAgICAgICB0aGlzLmZvcm1hdHRlZEFnZ3JlZ2F0b3JzW25hbWVdICYmXG4gICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tuYW1lXVt2YWx1ZV0sXG4gICAgICApIHx8IFtdO1xuICAgIGlmIChcbiAgICAgICFncm91cE5hbWUgfHxcbiAgICAgICFncm91cFZhbHVlIHx8XG4gICAgICAodG90YWxzS2V5cyAmJiAhdG90YWxzS2V5cy5pbmNsdWRlcyhncm91cFZhbHVlKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0b3I7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcm1hdHRlZEFnZ3JlZ2F0b3JzW2dyb3VwTmFtZV1bZ3JvdXBWYWx1ZV0gfHwgdGhpcy5hZ2dyZWdhdG9yO1xuICB9XG5cbiAgYXJyU29ydChhdHRycywgcGFydGlhbE9uVG9wLCByZXZlcnNlID0gZmFsc2UpIHtcbiAgICBjb25zdCBzb3J0ZXJzQXJyID0gYXR0cnMubWFwKGEgPT4gZ2V0U29ydCh0aGlzLnByb3BzLnNvcnRlcnMsIGEpKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGltaXQ7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBzb3J0ZXIgPSBzb3J0ZXJzQXJyW2ldO1xuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gcmV2ZXJzZSA/IHNvcnRlcihiW2ldLCBhW2ldKSA6IHNvcnRlcihhW2ldLCBiW2ldKTtcbiAgICAgICAgaWYgKGNvbXBhcmlzb24gIT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnRpYWxPblRvcCA/IGEubGVuZ3RoIC0gYi5sZW5ndGggOiBiLmxlbmd0aCAtIGEubGVuZ3RoO1xuICAgIH07XG4gIH1cblxuICBzb3J0S2V5cygpIHtcbiAgICBpZiAoIXRoaXMuc29ydGVkKSB7XG4gICAgICB0aGlzLnNvcnRlZCA9IHRydWU7XG4gICAgICBjb25zdCB2ID0gKHIsIGMpID0+IHRoaXMuZ2V0QWdncmVnYXRvcihyLCBjKS52YWx1ZSgpO1xuICAgICAgc3dpdGNoICh0aGlzLnByb3BzLnJvd09yZGVyKSB7XG4gICAgICAgIGNhc2UgJ2tleV96X3RvX2EnOlxuICAgICAgICAgIHRoaXMucm93S2V5cy5zb3J0KFxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMucm93cywgdGhpcy5zdWJ0b3RhbHMucm93UGFydGlhbE9uVG9wLCB0cnVlKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd2YWx1ZV9hX3RvX3onOlxuICAgICAgICAgIHRoaXMucm93S2V5cy5zb3J0KChhLCBiKSA9PiBuYXR1cmFsU29ydCh2KGEsIFtdKSwgdihiLCBbXSkpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndmFsdWVfel90b19hJzpcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydCgoYSwgYikgPT4gLW5hdHVyYWxTb3J0KHYoYSwgW10pLCB2KGIsIFtdKSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMucm93S2V5cy5zb3J0KFxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMucm93cywgdGhpcy5zdWJ0b3RhbHMucm93UGFydGlhbE9uVG9wKSxcbiAgICAgICAgICApO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0aGlzLnByb3BzLmNvbE9yZGVyKSB7XG4gICAgICAgIGNhc2UgJ2tleV96X3RvX2EnOlxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KFxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMuY29scywgdGhpcy5zdWJ0b3RhbHMuY29sUGFydGlhbE9uVG9wLCB0cnVlKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd2YWx1ZV9hX3RvX3onOlxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KChhLCBiKSA9PiBuYXR1cmFsU29ydCh2KFtdLCBhKSwgdihbXSwgYikpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndmFsdWVfel90b19hJzpcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydCgoYSwgYikgPT4gLW5hdHVyYWxTb3J0KHYoW10sIGEpLCB2KFtdLCBiKSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuY29sS2V5cy5zb3J0KFxuICAgICAgICAgICAgdGhpcy5hcnJTb3J0KHRoaXMucHJvcHMuY29scywgdGhpcy5zdWJ0b3RhbHMuY29sUGFydGlhbE9uVG9wKSxcbiAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldENvbEtleXMoKSB7XG4gICAgdGhpcy5zb3J0S2V5cygpO1xuICAgIHJldHVybiB0aGlzLmNvbEtleXM7XG4gIH1cblxuICBnZXRSb3dLZXlzKCkge1xuICAgIHRoaXMuc29ydEtleXMoKTtcbiAgICByZXR1cm4gdGhpcy5yb3dLZXlzO1xuICB9XG5cbiAgcHJvY2Vzc1JlY29yZChyZWNvcmQpIHtcbiAgICAvLyB0aGlzIGNvZGUgaXMgY2FsbGVkIGluIGEgdGlnaHQgbG9vcFxuICAgIGNvbnN0IGNvbEtleSA9IFtdO1xuICAgIGNvbnN0IHJvd0tleSA9IFtdO1xuICAgIHRoaXMucHJvcHMuY29scy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb2xLZXkucHVzaChjb2wgaW4gcmVjb3JkID8gcmVjb3JkW2NvbF0gOiAnbnVsbCcpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICByb3dLZXkucHVzaChyb3cgaW4gcmVjb3JkID8gcmVjb3JkW3Jvd10gOiAnbnVsbCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hbGxUb3RhbC5wdXNoKHJlY29yZCk7XG5cbiAgICBjb25zdCByb3dTdGFydCA9IHRoaXMuc3VidG90YWxzLnJvd0VuYWJsZWQgPyAxIDogTWF0aC5tYXgoMSwgcm93S2V5Lmxlbmd0aCk7XG4gICAgY29uc3QgY29sU3RhcnQgPSB0aGlzLnN1YnRvdGFscy5jb2xFbmFibGVkID8gMSA6IE1hdGgubWF4KDEsIGNvbEtleS5sZW5ndGgpO1xuXG4gICAgbGV0IGlzUm93U3VidG90YWw7XG4gICAgbGV0IGlzQ29sU3VidG90YWw7XG4gICAgZm9yIChsZXQgcmkgPSByb3dTdGFydDsgcmkgPD0gcm93S2V5Lmxlbmd0aDsgcmkgKz0gMSkge1xuICAgICAgaXNSb3dTdWJ0b3RhbCA9IHJpIDwgcm93S2V5Lmxlbmd0aDtcbiAgICAgIGNvbnN0IGZSb3dLZXkgPSByb3dLZXkuc2xpY2UoMCwgcmkpO1xuICAgICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkoZlJvd0tleSk7XG4gICAgICBpZiAoIXRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldKSB7XG4gICAgICAgIHRoaXMucm93S2V5cy5wdXNoKGZSb3dLZXkpO1xuICAgICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XSA9IHRoaXMuZ2V0Rm9ybWF0dGVkQWdncmVnYXRvcihcbiAgICAgICAgICByZWNvcmQsXG4gICAgICAgICAgcm93S2V5LFxuICAgICAgICApKHRoaXMsIGZSb3dLZXksIFtdKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldLnB1c2gocmVjb3JkKTtcbiAgICAgIHRoaXMucm93VG90YWxzW2ZsYXRSb3dLZXldLmlzU3VidG90YWwgPSBpc1Jvd1N1YnRvdGFsO1xuICAgIH1cblxuICAgIGZvciAobGV0IGNpID0gY29sU3RhcnQ7IGNpIDw9IGNvbEtleS5sZW5ndGg7IGNpICs9IDEpIHtcbiAgICAgIGlzQ29sU3VidG90YWwgPSBjaSA8IGNvbEtleS5sZW5ndGg7XG4gICAgICBjb25zdCBmQ29sS2V5ID0gY29sS2V5LnNsaWNlKDAsIGNpKTtcbiAgICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGZDb2xLZXkpO1xuICAgICAgaWYgKCF0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XSkge1xuICAgICAgICB0aGlzLmNvbEtleXMucHVzaChmQ29sS2V5KTtcbiAgICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXG4gICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgIGNvbEtleSxcbiAgICAgICAgKSh0aGlzLCBbXSwgZkNvbEtleSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XS5wdXNoKHJlY29yZCk7XG4gICAgICB0aGlzLmNvbFRvdGFsc1tmbGF0Q29sS2V5XS5pc1N1YnRvdGFsID0gaXNDb2xTdWJ0b3RhbDtcbiAgICB9XG5cbiAgICAvLyBBbmQgbm93IGZpbGwgaW4gZm9yIGFsbCB0aGUgc3ViLWNlbGxzLlxuICAgIGZvciAobGV0IHJpID0gcm93U3RhcnQ7IHJpIDw9IHJvd0tleS5sZW5ndGg7IHJpICs9IDEpIHtcbiAgICAgIGlzUm93U3VidG90YWwgPSByaSA8IHJvd0tleS5sZW5ndGg7XG4gICAgICBjb25zdCBmUm93S2V5ID0gcm93S2V5LnNsaWNlKDAsIHJpKTtcbiAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KGZSb3dLZXkpO1xuICAgICAgaWYgKCF0aGlzLnRyZWVbZmxhdFJvd0tleV0pIHtcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldID0ge307XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBjaSA9IGNvbFN0YXJ0OyBjaSA8PSBjb2xLZXkubGVuZ3RoOyBjaSArPSAxKSB7XG4gICAgICAgIGlzQ29sU3VidG90YWwgPSBjaSA8IGNvbEtleS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGZDb2xLZXkgPSBjb2xLZXkuc2xpY2UoMCwgY2kpO1xuICAgICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShmQ29sS2V5KTtcbiAgICAgICAgaWYgKCF0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0pIHtcbiAgICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXG4gICAgICAgICAgICByZWNvcmQsXG4gICAgICAgICAgKSh0aGlzLCBmUm93S2V5LCBmQ29sS2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0ucHVzaChyZWNvcmQpO1xuXG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5pc1Jvd1N1YnRvdGFsID0gaXNSb3dTdWJ0b3RhbDtcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLmlzQ29sU3VidG90YWwgPSBpc0NvbFN1YnRvdGFsO1xuICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0uaXNTdWJ0b3RhbCA9XG4gICAgICAgICAgaXNSb3dTdWJ0b3RhbCB8fCBpc0NvbFN1YnRvdGFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEFnZ3JlZ2F0b3Iocm93S2V5LCBjb2xLZXkpIHtcbiAgICBsZXQgYWdnO1xuICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleSk7XG4gICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoY29sS2V5KTtcbiAgICBpZiAocm93S2V5Lmxlbmd0aCA9PT0gMCAmJiBjb2xLZXkubGVuZ3RoID09PSAwKSB7XG4gICAgICBhZ2cgPSB0aGlzLmFsbFRvdGFsO1xuICAgIH0gZWxzZSBpZiAocm93S2V5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWdnID0gdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV07XG4gICAgfSBlbHNlIGlmIChjb2xLZXkubGVuZ3RoID09PSAwKSB7XG4gICAgICBhZ2cgPSB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWdnID0gdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgYWdnIHx8IHtcbiAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGZvcm1hdCgpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBjYW4gaGFuZGxlIGFycmF5cyBvciBqUXVlcnkgc2VsZWN0aW9ucyBvZiB0YWJsZXNcblBpdm90RGF0YS5mb3JFYWNoUmVjb3JkID0gZnVuY3Rpb24gKGlucHV0LCBwcm9jZXNzUmVjb3JkKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIC8vIGFycmF5IG9mIG9iamVjdHNcbiAgICByZXR1cm4gaW5wdXQubWFwKHJlY29yZCA9PiBwcm9jZXNzUmVjb3JkKHJlY29yZCkpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcih0KCdVbmtub3duIGlucHV0IGZvcm1hdCcpKTtcbn07XG5cblBpdm90RGF0YS5kZWZhdWx0UHJvcHMgPSB7XG4gIGFnZ3JlZ2F0b3JzLFxuICBjb2xzOiBbXSxcbiAgcm93czogW10sXG4gIHZhbHM6IFtdLFxuICBhZ2dyZWdhdG9yTmFtZTogJ0NvdW50JyxcbiAgc29ydGVyczoge30sXG4gIHJvd09yZGVyOiAna2V5X2FfdG9feicsXG4gIGNvbE9yZGVyOiAna2V5X2FfdG9feicsXG59O1xuXG5QaXZvdERhdGEucHJvcFR5cGVzID0ge1xuICBkYXRhOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXksIFByb3BUeXBlcy5vYmplY3QsIFByb3BUeXBlcy5mdW5jXSlcbiAgICAuaXNSZXF1aXJlZCxcbiAgYWdncmVnYXRvck5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICByb3dzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgdmFsczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gIHZhbHVlRmlsdGVyOiBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5ib29sKSksXG4gIHNvcnRlcnM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5mdW5jLFxuICAgIFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuZnVuYyksXG4gIF0pLFxuICBkZXJpdmVkQXR0cmlidXRlczogUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5mdW5jKSxcbiAgcm93T3JkZXI6IFByb3BUeXBlcy5vbmVPZihbXG4gICAgJ2tleV9hX3RvX3onLFxuICAgICdrZXlfel90b19hJyxcbiAgICAndmFsdWVfYV90b196JyxcbiAgICAndmFsdWVfel90b19hJyxcbiAgXSksXG4gIGNvbE9yZGVyOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICdrZXlfYV90b196JyxcbiAgICAna2V5X3pfdG9fYScsXG4gICAgJ3ZhbHVlX2FfdG9feicsXG4gICAgJ3ZhbHVlX3pfdG9fYScsXG4gIF0pLFxufTtcblxuZXhwb3J0IHtcbiAgYWdncmVnYXRvclRlbXBsYXRlcyxcbiAgYWdncmVnYXRvcnMsXG4gIGRlcml2ZXJzLFxuICBsb2NhbGVzLFxuICBuYXR1cmFsU29ydCxcbiAgbnVtYmVyRm9ybWF0LFxuICBnZXRTb3J0LFxuICBzb3J0QXMsXG4gIGZsYXRLZXksXG4gIFBpdm90RGF0YSxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx":
/*!******************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PivotTableChart)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/types/Column.ts\");\n/* harmony import */ var _superset_ui_chart_controls__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @superset-ui/chart-controls */ \"./packages/superset-ui-chart-controls/src/types.ts\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types */ \"./plugins/plugin-chart-pivot-table/src/types.ts\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  ${({ height, width, margin }) => `\n      margin: ${margin}px;\n      height: ${height - margin * 2}px;\n      width: ${typeof width === 'string' ? parseInt(width, 10) : width - margin * 2}px;\n `}\n`;\nconst PivotTableWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  height: 100%;\n  max-width: fit-content;\n  overflow: auto;\n`;\nconst METRIC_KEY = 'metric';\nconst iconStyle = { stroke: 'black', strokeWidth: '16px' };\nconst vals = ['value'];\nconst aggregatorsFactory = (formatter) => ({\n  Count: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(formatter),\n  'Count Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.countUnique(formatter),\n  'List Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.listUnique(', ', formatter),\n  Sum: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(formatter),\n  Average: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.average(formatter),\n  Median: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.median(formatter),\n  'Sample Variance': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates[\"var\"](1, formatter),\n  'Sample Standard Deviation': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.stdev(1, formatter),\n  Minimum: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.min(formatter),\n  Maximum: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.max(formatter),\n  First: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.first(formatter),\n  Last: _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.last(formatter),\n  'Sum as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(), 'total', formatter),\n  'Sum as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(), 'row', formatter),\n  'Sum as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.sum(), 'col', formatter),\n  'Count as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(), 'total', formatter),\n  'Count as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(), 'row', formatter),\n  'Count as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.aggregatorTemplates.count(), 'col', formatter) });\n\n/* If you change this logic, please update the corresponding Python\n * function (https://github.com/apache/superset/blob/master/superset/charts/post_processing.py),\n * or reach out to @betodealmeida.\n */\nfunction PivotTableChart(props) {\n  const { data, height, width, groupbyRows: groupbyRowsRaw, groupbyColumns: groupbyColumnsRaw, metrics, colOrder, rowOrder, aggregateFunction, transposePivot, combineMetric, rowSubtotalPosition, colSubtotalPosition, colTotals, rowTotals, valueFormat, emitFilter, setDataMask, selectedFilters, verboseMap, columnFormats, metricsLayout, metricColorFormatters, dateFormatters } = props;\n  const theme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme)();\n  const defaultFormatter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.getNumberFormatter)(valueFormat), [valueFormat]);\n  const columnFormatsArray = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => Object.entries(columnFormats), [columnFormats]);\n  const hasCustomMetricFormatters = columnFormatsArray.length > 0;\n  const metricFormatters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => hasCustomMetricFormatters ?\n  {\n    [METRIC_KEY]: Object.fromEntries(columnFormatsArray.map(([metric, format]) => [\n    metric,\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.getNumberFormatter)(format)])) } :\n\n\n  undefined, [columnFormatsArray, hasCustomMetricFormatters]);\n  const metricNames = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => metrics.map((metric) => typeof metric === 'string' ? metric : metric.label), [metrics]);\n  const unpivotedData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => data.reduce((acc, record) => [\n  ...acc,\n  ...metricNames.\n  map((name) => ({\n    ...record,\n    [METRIC_KEY]: name,\n    value: record[name] })).\n\n  filter((record) => record.value !== null)],\n  []), [data, metricNames]);\n  const groupbyRows = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyRowsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"]), [groupbyRowsRaw]);\n  const groupbyColumns = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyColumnsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"]), [groupbyColumnsRaw]);\n  const sorters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    [METRIC_KEY]: (0,_react_pivottable__WEBPACK_IMPORTED_MODULE_2__.sortAs)(metricNames) }),\n  [metricNames]);\n  const [rows, cols] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let [rows_, cols_] = transposePivot ?\n    [groupbyColumns, groupbyRows] :\n    [groupbyRows, groupbyColumns];\n    if (metricsLayout === _types__WEBPACK_IMPORTED_MODULE_5__.MetricsLayoutEnum.ROWS) {\n      rows_ = combineMetric ? [...rows_, METRIC_KEY] : [METRIC_KEY, ...rows_];\n    } else\n    {\n      cols_ = combineMetric ? [...cols_, METRIC_KEY] : [METRIC_KEY, ...cols_];\n    }\n    return [rows_, cols_];\n  }, [\n  combineMetric,\n  groupbyColumns,\n  groupbyRows,\n  metricsLayout,\n  transposePivot]);\n\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((filters) => {\n    const filterKeys = Object.keys(filters);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    setDataMask({\n      extraFormData: {\n        filters: filterKeys.length === 0 ?\n        undefined :\n        filterKeys.map((key) => {var _groupby$find;\n          const val = filters == null ? void 0 : filters[key];\n          const col = (_groupby$find = groupby.find((item) => {\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_6__.isPhysicalColumn)(item)) {\n              return item === key;\n            }\n            if ((0,_superset_ui_chart_controls__WEBPACK_IMPORTED_MODULE_7__.isAdhocColumn)(item)) {\n              return item.label === key;\n            }\n            return false;\n          })) != null ? _groupby$find : '';\n          if (val === null || val === undefined)\n          return {\n            col,\n            op: 'IS NULL' };\n\n          return {\n            col,\n            op: 'IN',\n            val: val };\n\n        }) },\n\n      filterState: {\n        value: filters && Object.keys(filters).length ?\n        Object.values(filters) :\n        null,\n        selectedFilters: filters && Object.keys(filters).length ? filters : null } });\n\n\n  }, [groupbyColumnsRaw, groupbyRowsRaw, setDataMask]);\n  const toggleFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, value, filters, pivotData, isSubtotal, isGrandTotal) => {\n    if (isSubtotal || isGrandTotal || !emitFilter) {\n      return;\n    }\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key;return !!selectedFilters && ((_selectedFilters$key = selectedFilters[key]) == null ? void 0 : _selectedFilters$key.includes(val));};\n    const filtersCopy = { ...filters };\n    delete filtersCopy[METRIC_KEY];\n    const filtersEntries = Object.entries(filtersCopy);\n    if (filtersEntries.length === 0) {\n      return;\n    }\n    const [key, val] = filtersEntries[filtersEntries.length - 1];\n    let updatedFilters = { ...(selectedFilters || {}) };\n    // multi select\n    // if (selectedFilters && isActiveFilterValue(key, val)) {\n    //   updatedFilters[key] = selectedFilters[key].filter((x: DataRecordValue) => x !== val);\n    // } else {\n    //   updatedFilters[key] = [...(selectedFilters?.[key] || []), val];\n    // }\n    // single select\n    if (selectedFilters && isActiveFilterValue(key, val)) {\n      updatedFilters = {};\n    } else\n    {\n      updatedFilters = {\n        [key]: [val] };\n\n    }\n    if (Array.isArray(updatedFilters[key]) &&\n    updatedFilters[key].length === 0) {\n      delete updatedFilters[key];\n    }\n    handleChange(updatedFilters);\n  }, [emitFilter, selectedFilters, handleChange]);\n  const tableOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    clickRowHeaderCallback: toggleFilter,\n    clickColumnHeaderCallback: toggleFilter,\n    colTotals,\n    rowTotals,\n    highlightHeaderCellsOnHover: emitFilter,\n    highlightedHeaderCells: selectedFilters,\n    omittedHighlightHeaderGroups: [METRIC_KEY],\n    cellColorFormatters: { [METRIC_KEY]: metricColorFormatters },\n    dateFormatters }),\n  [\n  colTotals,\n  dateFormatters,\n  emitFilter,\n  metricColorFormatters,\n  rowTotals,\n  selectedFilters,\n  toggleFilter]);\n\n  const subtotalOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    colSubtotalDisplay: { displayOnTop: colSubtotalPosition },\n    rowSubtotalDisplay: { displayOnTop: rowSubtotalPosition },\n    arrowCollapsed: (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { style: iconStyle }),\n    arrowExpanded: (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__[\"default\"], { style: iconStyle }) }),\n  [colSubtotalPosition, rowSubtotalPosition]);\n  return (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(Styles, { height: height, width: width, margin: theme.gridUnit * 4 },\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(PivotTableWrapper, null,\n  (0,_emotion_react__WEBPACK_IMPORTED_MODULE_8__.jsx)(_react_pivottable__WEBPACK_IMPORTED_MODULE_11__[\"default\"], { data: unpivotedData, rows: rows, cols: cols, aggregatorsFactory: aggregatorsFactory, defaultFormatter: defaultFormatter, customFormatters: metricFormatters, aggregatorName: aggregateFunction, vals: vals, colOrder: colOrder, rowOrder: rowOrder, sorters: sorters, tableOptions: tableOptions, subtotalOptions: subtotalOptions, namesMapping: verboseMap })));\n\n\n}__signature__(PivotTableChart, \"useTheme{theme}\\nuseMemo{defaultFormatter}\\nuseMemo{columnFormatsArray}\\nuseMemo{metricFormatters}\\nuseMemo{metricNames}\\nuseMemo{unpivotedData}\\nuseMemo{groupbyRows}\\nuseMemo{groupbyColumns}\\nuseMemo{sorters}\\nuseMemo{[rows, cols]}\\nuseCallback{handleChange}\\nuseCallback{toggleFilter}\\nuseMemo{tableOptions}\\nuseMemo{subtotalOptions}\", () => [_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(PivotTableWrapper, \"PivotTableWrapper\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(METRIC_KEY, \"METRIC_KEY\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(iconStyle, \"iconStyle\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(vals, \"vals\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(aggregatorsFactory, \"aggregatorsFactory\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(PivotTableChart, \"PivotTableChart\", \"/Users/chenming/PycharmProjects/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvUGl2b3RUYWJsZUNoYXJ0LnRzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBS0E7QUFLQTtBQUtBOztBQU9BOzs7QUFHQTtBQUNBO0FBQ0E7QUEyQkE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBOzs7QUFJQTtBQUlBO0FBUUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUlBO0FBSUE7QUFLQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUlBO0FBSUE7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7OztBQW1CQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL1Bpdm90VGFibGVDaGFydC50c3g/N2QzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQbHVzU3F1YXJlT3V0bGluZWQsIE1pbnVzU3F1YXJlT3V0bGluZWQgfSBmcm9tICdAYW50LWRlc2lnbi9pY29ucyc7XG5pbXBvcnQge1xuICBBZGhvY01ldHJpYyxcbiAgRGF0YVJlY29yZFZhbHVlLFxuICBnZXRDb2x1bW5MYWJlbCxcbiAgZ2V0TnVtYmVyRm9ybWF0dGVyLFxuICBpc1BoeXNpY2FsQ29sdW1uLFxuICBOdW1iZXJGb3JtYXR0ZXIsXG4gIHN0eWxlZCxcbiAgdXNlVGhlbWUsXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IGlzQWRob2NDb2x1bW4gfSBmcm9tICdAc3VwZXJzZXQtdWkvY2hhcnQtY29udHJvbHMnO1xuaW1wb3J0IHsgUGl2b3RUYWJsZSwgc29ydEFzLCBhZ2dyZWdhdG9yVGVtcGxhdGVzIH0gZnJvbSAnLi9yZWFjdC1waXZvdHRhYmxlJztcbmltcG9ydCB7XG4gIEZpbHRlclR5cGUsXG4gIE1ldHJpY3NMYXlvdXRFbnVtLFxuICBQaXZvdFRhYmxlUHJvcHMsXG4gIFBpdm90VGFibGVTdHlsZXNQcm9wcyxcbiAgU2VsZWN0ZWRGaWx0ZXJzVHlwZSxcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IFN0eWxlcyA9IHN0eWxlZC5kaXY8UGl2b3RUYWJsZVN0eWxlc1Byb3BzPmBcbiAgJHsoeyBoZWlnaHQsIHdpZHRoLCBtYXJnaW4gfSkgPT4gYFxuICAgICAgbWFyZ2luOiAke21hcmdpbn1weDtcbiAgICAgIGhlaWdodDogJHtoZWlnaHQgLSBtYXJnaW4gKiAyfXB4O1xuICAgICAgd2lkdGg6ICR7XG4gICAgICAgIHR5cGVvZiB3aWR0aCA9PT0gJ3N0cmluZycgPyBwYXJzZUludCh3aWR0aCwgMTApIDogd2lkdGggLSBtYXJnaW4gKiAyXG4gICAgICB9cHg7XG4gYH1cbmA7XG5cbmNvbnN0IFBpdm90VGFibGVXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgaGVpZ2h0OiAxMDAlO1xuICBtYXgtd2lkdGg6IGZpdC1jb250ZW50O1xuICBvdmVyZmxvdzogYXV0bztcbmA7XG5cbmNvbnN0IE1FVFJJQ19LRVkgPSAnbWV0cmljJztcbmNvbnN0IGljb25TdHlsZSA9IHsgc3Ryb2tlOiAnYmxhY2snLCBzdHJva2VXaWR0aDogJzE2cHgnIH07XG5jb25zdCB2YWxzID0gWyd2YWx1ZSddO1xuXG5jb25zdCBhZ2dyZWdhdG9yc0ZhY3RvcnkgPSAoZm9ybWF0dGVyOiBOdW1iZXJGb3JtYXR0ZXIpID0+ICh7XG4gIENvdW50OiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KGZvcm1hdHRlciksXG4gICdDb3VudCBVbmlxdWUgVmFsdWVzJzogYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudFVuaXF1ZShmb3JtYXR0ZXIpLFxuICAnTGlzdCBVbmlxdWUgVmFsdWVzJzogYWdncmVnYXRvclRlbXBsYXRlcy5saXN0VW5pcXVlKCcsICcsIGZvcm1hdHRlciksXG4gIFN1bTogYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oZm9ybWF0dGVyKSxcbiAgQXZlcmFnZTogYWdncmVnYXRvclRlbXBsYXRlcy5hdmVyYWdlKGZvcm1hdHRlciksXG4gIE1lZGlhbjogYWdncmVnYXRvclRlbXBsYXRlcy5tZWRpYW4oZm9ybWF0dGVyKSxcbiAgJ1NhbXBsZSBWYXJpYW5jZSc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMudmFyKDEsIGZvcm1hdHRlciksXG4gICdTYW1wbGUgU3RhbmRhcmQgRGV2aWF0aW9uJzogYWdncmVnYXRvclRlbXBsYXRlcy5zdGRldigxLCBmb3JtYXR0ZXIpLFxuICBNaW5pbXVtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLm1pbihmb3JtYXR0ZXIpLFxuICBNYXhpbXVtOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLm1heChmb3JtYXR0ZXIpLFxuICBGaXJzdDogYWdncmVnYXRvclRlbXBsYXRlcy5maXJzdChmb3JtYXR0ZXIpLFxuICBMYXN0OiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmxhc3QoZm9ybWF0dGVyKSxcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZnJhY3Rpb25PZihcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bSgpLFxuICAgICd0b3RhbCcsXG4gICAgZm9ybWF0dGVyLFxuICApLFxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFJvd3MnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcbiAgICAncm93JyxcbiAgICBmb3JtYXR0ZXIsXG4gICksXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgQ29sdW1ucyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZnJhY3Rpb25PZihcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLnN1bSgpLFxuICAgICdjb2wnLFxuICAgIGZvcm1hdHRlcixcbiAgKSxcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoKSxcbiAgICAndG90YWwnLFxuICAgIGZvcm1hdHRlcixcbiAgKSxcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFJvd3MnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudCgpLFxuICAgICdyb3cnLFxuICAgIGZvcm1hdHRlcixcbiAgKSxcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIENvbHVtbnMnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudCgpLFxuICAgICdjb2wnLFxuICAgIGZvcm1hdHRlcixcbiAgKSxcbn0pO1xuXG4vKiBJZiB5b3UgY2hhbmdlIHRoaXMgbG9naWMsIHBsZWFzZSB1cGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgUHl0aG9uXG4gKiBmdW5jdGlvbiAoaHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9zdXBlcnNldC9ibG9iL21hc3Rlci9zdXBlcnNldC9jaGFydHMvcG9zdF9wcm9jZXNzaW5nLnB5KSxcbiAqIG9yIHJlYWNoIG91dCB0byBAYmV0b2RlYWxtZWlkYS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGl2b3RUYWJsZUNoYXJ0KHByb3BzOiBQaXZvdFRhYmxlUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRhdGEsXG4gICAgaGVpZ2h0LFxuICAgIHdpZHRoLFxuICAgIGdyb3VwYnlSb3dzOiBncm91cGJ5Um93c1JhdyxcbiAgICBncm91cGJ5Q29sdW1uczogZ3JvdXBieUNvbHVtbnNSYXcsXG4gICAgbWV0cmljcyxcbiAgICBjb2xPcmRlcixcbiAgICByb3dPcmRlcixcbiAgICBhZ2dyZWdhdGVGdW5jdGlvbixcbiAgICB0cmFuc3Bvc2VQaXZvdCxcbiAgICBjb21iaW5lTWV0cmljLFxuICAgIHJvd1N1YnRvdGFsUG9zaXRpb24sXG4gICAgY29sU3VidG90YWxQb3NpdGlvbixcbiAgICBjb2xUb3RhbHMsXG4gICAgcm93VG90YWxzLFxuICAgIHZhbHVlRm9ybWF0LFxuICAgIGVtaXRGaWx0ZXIsXG4gICAgc2V0RGF0YU1hc2ssXG4gICAgc2VsZWN0ZWRGaWx0ZXJzLFxuICAgIHZlcmJvc2VNYXAsXG4gICAgY29sdW1uRm9ybWF0cyxcbiAgICBtZXRyaWNzTGF5b3V0LFxuICAgIG1ldHJpY0NvbG9yRm9ybWF0dGVycyxcbiAgICBkYXRlRm9ybWF0dGVycyxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgZGVmYXVsdEZvcm1hdHRlciA9IHVzZU1lbW8oXG4gICAgKCkgPT4gZ2V0TnVtYmVyRm9ybWF0dGVyKHZhbHVlRm9ybWF0KSxcbiAgICBbdmFsdWVGb3JtYXRdLFxuICApO1xuICBjb25zdCBjb2x1bW5Gb3JtYXRzQXJyYXkgPSB1c2VNZW1vKFxuICAgICgpID0+IE9iamVjdC5lbnRyaWVzKGNvbHVtbkZvcm1hdHMpLFxuICAgIFtjb2x1bW5Gb3JtYXRzXSxcbiAgKTtcbiAgY29uc3QgaGFzQ3VzdG9tTWV0cmljRm9ybWF0dGVycyA9IGNvbHVtbkZvcm1hdHNBcnJheS5sZW5ndGggPiAwO1xuICBjb25zdCBtZXRyaWNGb3JtYXR0ZXJzID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgaGFzQ3VzdG9tTWV0cmljRm9ybWF0dGVyc1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIFtNRVRSSUNfS0VZXTogT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgICAgICBjb2x1bW5Gb3JtYXRzQXJyYXkubWFwKChbbWV0cmljLCBmb3JtYXRdKSA9PiBbXG4gICAgICAgICAgICAgICAgbWV0cmljLFxuICAgICAgICAgICAgICAgIGdldE51bWJlckZvcm1hdHRlcihmb3JtYXQpLFxuICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICBbY29sdW1uRm9ybWF0c0FycmF5LCBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzXSxcbiAgKTtcblxuICBjb25zdCBtZXRyaWNOYW1lcyA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIG1ldHJpY3MubWFwKChtZXRyaWM6IHN0cmluZyB8IEFkaG9jTWV0cmljKSA9PlxuICAgICAgICB0eXBlb2YgbWV0cmljID09PSAnc3RyaW5nJyA/IG1ldHJpYyA6IChtZXRyaWMubGFiZWwgYXMgc3RyaW5nKSxcbiAgICAgICksXG4gICAgW21ldHJpY3NdLFxuICApO1xuXG4gIGNvbnN0IHVucGl2b3RlZERhdGEgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBkYXRhLnJlZHVjZShcbiAgICAgICAgKGFjYzogUmVjb3JkPHN0cmluZywgYW55PltdLCByZWNvcmQ6IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IFtcbiAgICAgICAgICAuLi5hY2MsXG4gICAgICAgICAgLi4ubWV0cmljTmFtZXNcbiAgICAgICAgICAgIC5tYXAoKG5hbWU6IHN0cmluZykgPT4gKHtcbiAgICAgICAgICAgICAgLi4ucmVjb3JkLFxuICAgICAgICAgICAgICBbTUVUUklDX0tFWV06IG5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiByZWNvcmRbbmFtZV0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5maWx0ZXIocmVjb3JkID0+IHJlY29yZC52YWx1ZSAhPT0gbnVsbCksXG4gICAgICAgIF0sXG4gICAgICAgIFtdLFxuICAgICAgKSxcbiAgICBbZGF0YSwgbWV0cmljTmFtZXNdLFxuICApO1xuICBjb25zdCBncm91cGJ5Um93cyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gZ3JvdXBieVJvd3NSYXcubWFwKGdldENvbHVtbkxhYmVsKSxcbiAgICBbZ3JvdXBieVJvd3NSYXddLFxuICApO1xuICBjb25zdCBncm91cGJ5Q29sdW1ucyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gZ3JvdXBieUNvbHVtbnNSYXcubWFwKGdldENvbHVtbkxhYmVsKSxcbiAgICBbZ3JvdXBieUNvbHVtbnNSYXddLFxuICApO1xuXG4gIGNvbnN0IHNvcnRlcnMgPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBbTUVUUklDX0tFWV06IHNvcnRBcyhtZXRyaWNOYW1lcyksXG4gICAgfSksXG4gICAgW21ldHJpY05hbWVzXSxcbiAgKTtcblxuICBjb25zdCBbcm93cywgY29sc10gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgW3Jvd3NfLCBjb2xzX10gPSB0cmFuc3Bvc2VQaXZvdFxuICAgICAgPyBbZ3JvdXBieUNvbHVtbnMsIGdyb3VwYnlSb3dzXVxuICAgICAgOiBbZ3JvdXBieVJvd3MsIGdyb3VwYnlDb2x1bW5zXTtcblxuICAgIGlmIChtZXRyaWNzTGF5b3V0ID09PSBNZXRyaWNzTGF5b3V0RW51bS5ST1dTKSB7XG4gICAgICByb3dzXyA9IGNvbWJpbmVNZXRyaWMgPyBbLi4ucm93c18sIE1FVFJJQ19LRVldIDogW01FVFJJQ19LRVksIC4uLnJvd3NfXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29sc18gPSBjb21iaW5lTWV0cmljID8gWy4uLmNvbHNfLCBNRVRSSUNfS0VZXSA6IFtNRVRSSUNfS0VZLCAuLi5jb2xzX107XG4gICAgfVxuICAgIHJldHVybiBbcm93c18sIGNvbHNfXTtcbiAgfSwgW1xuICAgIGNvbWJpbmVNZXRyaWMsXG4gICAgZ3JvdXBieUNvbHVtbnMsXG4gICAgZ3JvdXBieVJvd3MsXG4gICAgbWV0cmljc0xheW91dCxcbiAgICB0cmFuc3Bvc2VQaXZvdCxcbiAgXSk7XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKGZpbHRlcnM6IFNlbGVjdGVkRmlsdGVyc1R5cGUpID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcktleXMgPSBPYmplY3Qua2V5cyhmaWx0ZXJzKTtcbiAgICAgIGNvbnN0IGdyb3VwYnkgPSBbLi4uZ3JvdXBieVJvd3NSYXcsIC4uLmdyb3VwYnlDb2x1bW5zUmF3XTtcbiAgICAgIHNldERhdGFNYXNrKHtcbiAgICAgICAgZXh0cmFGb3JtRGF0YToge1xuICAgICAgICAgIGZpbHRlcnM6XG4gICAgICAgICAgICBmaWx0ZXJLZXlzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA6IGZpbHRlcktleXMubWFwKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBmaWx0ZXJzPy5ba2V5XTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbCA9XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwYnkuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNQaHlzaWNhbENvbHVtbihpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IGtleTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRob2NDb2x1bW4oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmxhYmVsID09PSBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSkgPz8gJyc7XG4gICAgICAgICAgICAgICAgICBpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lTIE5VTEwnLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgICAgICAgICBvcDogJ0lOJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiB2YWwgYXMgKHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pW10sXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgICAgICBmaWx0ZXJTdGF0ZToge1xuICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgZmlsdGVycyAmJiBPYmplY3Qua2V5cyhmaWx0ZXJzKS5sZW5ndGhcbiAgICAgICAgICAgICAgPyBPYmplY3QudmFsdWVzKGZpbHRlcnMpXG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICBzZWxlY3RlZEZpbHRlcnM6XG4gICAgICAgICAgICBmaWx0ZXJzICYmIE9iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aCA/IGZpbHRlcnMgOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBbZ3JvdXBieUNvbHVtbnNSYXcsIGdyb3VwYnlSb3dzUmF3LCBzZXREYXRhTWFza10sXG4gICk7XG5cbiAgY29uc3QgdG9nZ2xlRmlsdGVyID0gdXNlQ2FsbGJhY2soXG4gICAgKFxuICAgICAgZTogTW91c2VFdmVudCxcbiAgICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgICBmaWx0ZXJzOiBGaWx0ZXJUeXBlLFxuICAgICAgcGl2b3REYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgICAgaXNTdWJ0b3RhbDogYm9vbGVhbixcbiAgICAgIGlzR3JhbmRUb3RhbDogYm9vbGVhbixcbiAgICApID0+IHtcbiAgICAgIGlmIChpc1N1YnRvdGFsIHx8IGlzR3JhbmRUb3RhbCB8fCAhZW1pdEZpbHRlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzQWN0aXZlRmlsdGVyVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbDogRGF0YVJlY29yZFZhbHVlKSA9PlxuICAgICAgICAhIXNlbGVjdGVkRmlsdGVycyAmJiBzZWxlY3RlZEZpbHRlcnNba2V5XT8uaW5jbHVkZXModmFsKTtcblxuICAgICAgY29uc3QgZmlsdGVyc0NvcHkgPSB7IC4uLmZpbHRlcnMgfTtcbiAgICAgIGRlbGV0ZSBmaWx0ZXJzQ29weVtNRVRSSUNfS0VZXTtcblxuICAgICAgY29uc3QgZmlsdGVyc0VudHJpZXMgPSBPYmplY3QuZW50cmllcyhmaWx0ZXJzQ29weSk7XG4gICAgICBpZiAoZmlsdGVyc0VudHJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgW2tleSwgdmFsXSA9IGZpbHRlcnNFbnRyaWVzW2ZpbHRlcnNFbnRyaWVzLmxlbmd0aCAtIDFdO1xuXG4gICAgICBsZXQgdXBkYXRlZEZpbHRlcnMgPSB7IC4uLihzZWxlY3RlZEZpbHRlcnMgfHwge30pIH07XG4gICAgICAvLyBtdWx0aSBzZWxlY3RcbiAgICAgIC8vIGlmIChzZWxlY3RlZEZpbHRlcnMgJiYgaXNBY3RpdmVGaWx0ZXJWYWx1ZShrZXksIHZhbCkpIHtcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IHNlbGVjdGVkRmlsdGVyc1trZXldLmZpbHRlcigoeDogRGF0YVJlY29yZFZhbHVlKSA9PiB4ICE9PSB2YWwpO1xuICAgICAgLy8gfSBlbHNlIHtcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IFsuLi4oc2VsZWN0ZWRGaWx0ZXJzPy5ba2V5XSB8fCBbXSksIHZhbF07XG4gICAgICAvLyB9XG4gICAgICAvLyBzaW5nbGUgc2VsZWN0XG4gICAgICBpZiAoc2VsZWN0ZWRGaWx0ZXJzICYmIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWwpKSB7XG4gICAgICAgIHVwZGF0ZWRGaWx0ZXJzID0ge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVkRmlsdGVycyA9IHtcbiAgICAgICAgICBba2V5XTogW3ZhbF0sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIEFycmF5LmlzQXJyYXkodXBkYXRlZEZpbHRlcnNba2V5XSkgJiZcbiAgICAgICAgdXBkYXRlZEZpbHRlcnNba2V5XS5sZW5ndGggPT09IDBcbiAgICAgICkge1xuICAgICAgICBkZWxldGUgdXBkYXRlZEZpbHRlcnNba2V5XTtcbiAgICAgIH1cbiAgICAgIGhhbmRsZUNoYW5nZSh1cGRhdGVkRmlsdGVycyk7XG4gICAgfSxcbiAgICBbZW1pdEZpbHRlciwgc2VsZWN0ZWRGaWx0ZXJzLCBoYW5kbGVDaGFuZ2VdLFxuICApO1xuXG4gIGNvbnN0IHRhYmxlT3B0aW9ucyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIGNsaWNrUm93SGVhZGVyQ2FsbGJhY2s6IHRvZ2dsZUZpbHRlcixcbiAgICAgIGNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2s6IHRvZ2dsZUZpbHRlcixcbiAgICAgIGNvbFRvdGFscyxcbiAgICAgIHJvd1RvdGFscyxcbiAgICAgIGhpZ2hsaWdodEhlYWRlckNlbGxzT25Ib3ZlcjogZW1pdEZpbHRlcixcbiAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHM6IHNlbGVjdGVkRmlsdGVycyxcbiAgICAgIG9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHM6IFtNRVRSSUNfS0VZXSxcbiAgICAgIGNlbGxDb2xvckZvcm1hdHRlcnM6IHsgW01FVFJJQ19LRVldOiBtZXRyaWNDb2xvckZvcm1hdHRlcnMgfSxcbiAgICAgIGRhdGVGb3JtYXR0ZXJzLFxuICAgIH0pLFxuICAgIFtcbiAgICAgIGNvbFRvdGFscyxcbiAgICAgIGRhdGVGb3JtYXR0ZXJzLFxuICAgICAgZW1pdEZpbHRlcixcbiAgICAgIG1ldHJpY0NvbG9yRm9ybWF0dGVycyxcbiAgICAgIHJvd1RvdGFscyxcbiAgICAgIHNlbGVjdGVkRmlsdGVycyxcbiAgICAgIHRvZ2dsZUZpbHRlcixcbiAgICBdLFxuICApO1xuXG4gIGNvbnN0IHN1YnRvdGFsT3B0aW9ucyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheTogeyBkaXNwbGF5T25Ub3A6IGNvbFN1YnRvdGFsUG9zaXRpb24gfSxcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheTogeyBkaXNwbGF5T25Ub3A6IHJvd1N1YnRvdGFsUG9zaXRpb24gfSxcbiAgICAgIGFycm93Q29sbGFwc2VkOiA8UGx1c1NxdWFyZU91dGxpbmVkIHN0eWxlPXtpY29uU3R5bGV9IC8+LFxuICAgICAgYXJyb3dFeHBhbmRlZDogPE1pbnVzU3F1YXJlT3V0bGluZWQgc3R5bGU9e2ljb25TdHlsZX0gLz4sXG4gICAgfSksXG4gICAgW2NvbFN1YnRvdGFsUG9zaXRpb24sIHJvd1N1YnRvdGFsUG9zaXRpb25dLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPFN0eWxlcyBoZWlnaHQ9e2hlaWdodH0gd2lkdGg9e3dpZHRofSBtYXJnaW49e3RoZW1lLmdyaWRVbml0ICogNH0+XG4gICAgICA8UGl2b3RUYWJsZVdyYXBwZXI+XG4gICAgICAgIDxQaXZvdFRhYmxlXG4gICAgICAgICAgZGF0YT17dW5waXZvdGVkRGF0YX1cbiAgICAgICAgICByb3dzPXtyb3dzfVxuICAgICAgICAgIGNvbHM9e2NvbHN9XG4gICAgICAgICAgYWdncmVnYXRvcnNGYWN0b3J5PXthZ2dyZWdhdG9yc0ZhY3Rvcnl9XG4gICAgICAgICAgZGVmYXVsdEZvcm1hdHRlcj17ZGVmYXVsdEZvcm1hdHRlcn1cbiAgICAgICAgICBjdXN0b21Gb3JtYXR0ZXJzPXttZXRyaWNGb3JtYXR0ZXJzfVxuICAgICAgICAgIGFnZ3JlZ2F0b3JOYW1lPXthZ2dyZWdhdGVGdW5jdGlvbn1cbiAgICAgICAgICB2YWxzPXt2YWxzfVxuICAgICAgICAgIGNvbE9yZGVyPXtjb2xPcmRlcn1cbiAgICAgICAgICByb3dPcmRlcj17cm93T3JkZXJ9XG4gICAgICAgICAgc29ydGVycz17c29ydGVyc31cbiAgICAgICAgICB0YWJsZU9wdGlvbnM9e3RhYmxlT3B0aW9uc31cbiAgICAgICAgICBzdWJ0b3RhbE9wdGlvbnM9e3N1YnRvdGFsT3B0aW9uc31cbiAgICAgICAgICBuYW1lc01hcHBpbmc9e3ZlcmJvc2VNYXB9XG4gICAgICAgIC8+XG4gICAgICA8L1Bpdm90VGFibGVXcmFwcGVyPlxuICAgIDwvU3R5bGVzPlxuICApO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\n");

/***/ })

}]);