(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[64],{9354:(e,t,i)=>{"use strict";i.d(t,{nx:()=>s,iw:()=>a});var l=i(2322),o=i.n(l),n=i(9176);const s=function(e){return o().process({text:e,removeMisalignedTags:!1,addInLineBreaks:!0}).html},a=function(e){let t=new n._("full",{html:!0,xhtmlOut:!1,breaks:!1,langPrefix:"language-",typographer:!1,quotes:"“”‘’",highlight:function(){return""}});return t.render(e)}},4190:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var l=i(4434),o=i(7689);const n=function(e){let t=null,i=!0,n=null,s=null;const a=function(){function d(i){i?null===t&&(t=l.Z.create({timeout:0,spinner:!0,color:"warning",position:"top",message:e("notifications.backendConnectionWarning"),icon:"report_problem"})):"function"===typeof t&&t()}function c(){if("undefined"===typeof o.ZP.ws||null===o.ZP.ws){let e,t=window.location;e="https:"===t.protocol?"wss:":"ws:",e+="//"+t.host+"/unmanic/websocket",o.ZP.ws=new WebSocket(e)}}function u(){o.ZP.ws=null,o.ZP.websocketEventListeners={},n=setTimeout((()=>{console.debug("Attempting reconnect to Unmanic server..."),a()}),4e3)}function p(e){"undefined"!==typeof o.ZP.frontendMessage&&("function"===typeof o.ZP.frontendMessage[e]&&(o.ZP.frontendMessage[e](),"undefined"!==typeof o.ZP.ws&&null!==o.ZP.ws&&o.ZP.ws.send(JSON.stringify({command:"dismiss_message",params:{message_id:e}}))),"undefined"!==typeof o.ZP.frontendMessage[e]&&delete o.ZP.frontendMessage[e])}function m(e,t,i,n,s,a){let r="notifications.serverMessages."+n,d=e(r);if(d===r&&(d=e("notifications.serverMessages.defaults."+i)),s)d=d+"<br>"+s;else{let t="notifications.serverMessages."+n+"Message",i=e(t);i!==t&&(s=e("notifications.serverMessages."+n+"Message"),d=d+"<br>"+s)}d='<span style="display:block;min-height:50px;white-space:pre;">'+d+"</span>";t in o.ZP.frontendMessage?o.ZP.frontendMessage[t]({message:d,html:!0}):o.ZP.frontendMessage[t]=l.Z.create({group:!1,type:"ongoing",position:"bottom-left",message:d,html:!0})}function g(e,t,i,n,s,a){if(!(t in o.ZP.frontendMessage)){let r="notifications.serverMessages."+n,d=e(r);d===r&&(d=e("notifications.serverMessages.defaults."+i)),s&&(d=d+" - "+s);let c="info",u="announcement";"error"===i?(c="negative",u="error"):"warning"===i?(c="warning",u="warning"):"success"===i&&(c="positive",u="thumb_up"),o.ZP.frontendMessage[t]=l.Z.create({timeout:a,color:c,position:"bottom-right",message:d,icon:u,actions:[{icon:"close",color:"white",handler:()=>{p(t)}}]})}}function h(t){"undefined"===typeof o.ZP.frontendMessage&&(o.ZP.frontendMessage={});let i=[];for(let l=0;l<t.length;l++){let o=t[l].id,n=t[l].type,s=t[l].code,a=t[l].message,r=t[l].timeout;"status"===n?m(e,o,n,s,a,r):g(e,o,n,s,a,r),i[i.length]=o}for(let e in o.ZP.frontendMessage)i.includes(e)||p(e)}return"undefined"!==typeof o.ZP.ws&&null!==o.ZP.ws||(console.debug("Starting connection to websocket server"),c()),r("open","start_frontend_messages",(function(e){clearTimeout(n),d(!1),o.ZP.ws.send(JSON.stringify({command:"start_frontend_messages",params:{}}))})),r("message","handle_frontend_messages",(function(e){if("string"===typeof e.data){d(!1);let t=JSON.parse(e.data);if(t.success)switch(null===s?s=t.server_id:t.server_id!==s&&(console.debug("Unmanic server has restarted. Reloading page..."),location.reload()),t.type){case"frontend_message":h(t.data);break}else console.error("WebSocket Error: Received contained errors - ",e.data)}else console.error("WebSocket Error: Received data was not a string - ",e.data)})),r("error","websocket_error",(function(e){console.error("WebSocket Error: ",e),d(!0)})),r("close","websocket_close",(function(e){i&&u()})),o.ZP.ws},r=function(e,t,i){"undefined"!==typeof o.ZP.ws&&null!==o.ZP.ws&&("undefined"===typeof o.ZP.websocketEventListeners&&(o.ZP.websocketEventListeners={}),t in o.ZP.websocketEventListeners||(o.ZP.ws.addEventListener(e,i),o.ZP.websocketEventListeners[t]=!0))},d=function(){"undefined"!==typeof o.ZP.ws&&null!==o.ZP.ws&&(console.debug("Closing connection to websocket server"),i=!1,o.ZP.ws.close(),o.ZP.ws=null,o.ZP.websocketEventListeners={})};return{serverId:s,init:function(){return a()},close:function(){d()},addEventListener:function(e,t,i){r(e,t,i)}}}},5625:(e,t,i)=>{"use strict";i.d(t,{Z:()=>j});var l=i(3673),o=i(2323);const n={class:"row items-center no-wrap"},s={key:0,class:"col"},a={class:"col"},r={class:"text-h6 text-blue-10"},d={key:1,class:"col-auto"},c={class:"q-pa-md"};function u(e,t,i,u,p,m){const g=(0,l.up)("q-btn"),h=(0,l.up)("q-tooltip"),f=(0,l.up)("q-card-section"),w=(0,l.up)("q-icon"),v=(0,l.up)("q-input"),b=(0,l.up)("q-separator"),y=(0,l.up)("q-item-section"),_=(0,l.up)("q-item-label"),W=(0,l.up)("q-item"),k=(0,l.up)("q-list"),q=(0,l.up)("q-card"),P=(0,l.up)("q-dialog"),Z=(0,l.Q2)("close-popup"),x=(0,l.Q2)("ripple"),I=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(P,{ref:"directoryBrowserDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:m.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(q,{style:[e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",n,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)("div",s,[(0,l.wy)((0,l.Wm)(g,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[Z]])])):(0,l.kq)("",!0),(0,l.Wm)("div",a,[(0,l.Wm)("div",r,(0,o.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("div",d,[(0,l.wy)((0,l.Wm)(g,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512),[[Z]])]))])])),_:1}),(0,l.Wm)(f,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",c,[(0,l.Wm)(q,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{disable:"",readonly:"",borderless:"",modelValue:this.currentPath,"onUpdate:modelValue":t[1]||(t[1]=e=>this.currentPath=e)},{before:(0,l.w5)((()=>[(0,l.Wm)(w,{name:"folder_open"})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(b),(0,l.Wm)(f,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{bordered:"",padding:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.directories,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(W,{key:t,clickable:"",onClick:t=>m.fetchDirectoryListing(e.full_path)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{color:"primary",name:"folder_open"})])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[x]]))),128))])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},8,["style"]),[[I,m.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var p=i(52),m=i.n(p),g=i(7689),h=i(1959);const f={name:"DirectoryBrowserDialog",props:{dialogHeader:{type:String,default:" --- header --- "},initialPath:{type:String,default:" --- initial path --- "},listType:{type:String,default:" --- list type --- "}},emits:["ok","hide","path"],methods:{show(){this.$refs.directoryBrowserDialogRef.show(),this.fetchDirectoryListing(this.initialPath)},hide(){this.$refs.directoryBrowserDialogRef.hide()},onDialogHide(){this.$emit("ok",{selectedPath:this.currentPath}),this.$emit("hide")},fetchDirectoryListing:function(e){this.currentPath=e;let t={current_path:this.currentPath,list_type:this.listType};m()({method:"post",url:(0,g.J4)("v2","filebrowser/list"),data:t}).then((e=>{this.directories=e.data.directories,this.files=e.data.files}))}},watch:{initialPath(e){e.length>0&&(this.currentPath=this.initialPath)}},data:function(){return{maximizedToggle:!0,currentPath:(0,h.iH)(null),directories:(0,h.iH)([]),files:(0,h.iH)([])}}};var w=i(6778),v=i(151),b=i(5589),y=i(2165),_=i(8870),W=i(4842),k=i(4554),q=i(5869),P=i(7011),Z=i(3414),x=i(2035),I=i(2350),$=i(8020),S=i(677),Q=i(6489),R=i(7518),H=i.n(R);f.render=u;const j=f;H()(f,"components",{QDialog:w.Z,QCard:v.Z,QCardSection:b.Z,QBtn:y.Z,QTooltip:_.Z,QInput:W.Z,QIcon:k.Z,QSeparator:q.Z,QList:P.Z,QItem:Z.Z,QItemSection:x.Z,QItemLabel:I.Z}),H()(f,"directives",{TouchSwipe:$.Z,ClosePopup:S.Z,Ripple:Q.Z})},2295:(e,t,i)=>{"use strict";i.d(t,{Z:()=>le});i(246);var l=i(3673),o=i(2323);const n={class:"row items-center no-wrap"},s={class:"col"},a={class:"text-h6 text-secondary"},r={class:"col-auto"},d={class:"row"},c={key:0,class:"col col-md-auto col-12 q-pa-xs"},u={class:"col col-md-grow col-12 q-pa-xs"},p=(0,l.Wm)("b",null,"Name:",-1),m=(0,l.Wm)("b",null,"Author:",-1),g=(0,l.Wm)("b",null,"Version:",-1),h=(0,l.Wm)("b",null,"Changelog:",-1),f={class:"row"},w={class:"col col-12 q-pa-xs"},v={class:"plugin-info-description"},b=(0,l.Wm)("div",{class:"row q-mt-sm"},[(0,l.Wm)("b",null,"Description:")],-1),y={class:"row q-mt-md"},_={class:"row"},W={class:"col col-12 q-pa-xs"},k={key:0,class:"q-mt-md float-right"};function q(e,t,i,q,P,Z){const x=(0,l.up)("q-icon"),I=(0,l.up)("q-tooltip"),$=(0,l.up)("q-btn"),S=(0,l.up)("q-card-section"),Q=(0,l.up)("q-tab"),R=(0,l.up)("q-tabs"),H=(0,l.up)("q-separator"),j=(0,l.up)("q-skeleton"),V=(0,l.up)("q-img"),C=(0,l.up)("q-avatar"),z=(0,l.up)("q-item-section"),U=(0,l.up)("q-item"),D=(0,l.up)("q-list"),L=(0,l.up)("q-scroll-area"),M=(0,l.up)("q-card"),T=(0,l.up)("q-tab-panel"),A=(0,l.up)("q-input"),B=(0,l.up)("q-checkbox"),N=(0,l.up)("q-select"),F=(0,l.up)("q-slider"),J=(0,l.up)("q-tab-panels"),E=(0,l.up)("q-dialog"),O=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(E,{modelValue:P.pluginInfoShowDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>P.pluginInfoShowDialog=e),"full-height":"",maximized:e.$q.platform.is.mobile,"transition-show":e.$q.platform.is.mobile?"slide-left":"scale","transition-hide":e.$q.platform.is.mobile?"slide-right":"scale",position:e.$q.platform.is.mobile?"right":"standard",onBeforeHide:Z.beforeDialogHide,onHide:Z.onDialogHide},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{style:{width:"1200px","max-width":"95vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",n,[(0,l.Wm)("div",s,[(0,l.Wm)("div",a,[(0,l.Wm)(x,{name:"extension"}),(0,l.Uk)(" "+(0,o.zw)(P.header),1)])]),(0,l.Wm)("div",r,[e.$q.platform.is.mobile?(0,l.wy)(((0,l.wg)(),(0,l.j4)($,{key:1,color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512)),[[O]]):(0,l.wy)(((0,l.wg)(),(0,l.j4)($,{key:0,color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512)),[[O]])])])])),_:1}),P.settings.length>0?((0,l.wg)(),(0,l.j4)(R,{key:0,modelValue:P.tab,"onUpdate:modelValue":t[3]||(t[3]=e=>P.tab=e),align:"left",class:"text-primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{label:e.$t("navigation.info"),name:"info",onClick:t[1]||(t[1]=e=>Z.setHeader("info"))},null,8,["label"]),(0,l.Wm)(Q,{label:e.$t("navigation.settings"),name:"settings",onClick:t[2]||(t[2]=e=>Z.setHeader("settings"))},null,8,["label"])])),_:1},8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(H),(0,l.Wm)(J,{modelValue:P.tab,"onUpdate:modelValue":t[5]||(t[5]=e=>P.tab=e),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{name:"info"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",d,[e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("div",c,[P.icon?((0,l.wg)(),(0,l.j4)(C,{key:1,rounded:"",size:"350px","font-size":"82px","text-color":"white",class:"shadow-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{src:P.icon,class:"",style:{"max-width":"300px"}},null,8,["src"])])),_:1})):((0,l.wg)(),(0,l.j4)(j,{key:0,width:"350px",height:"350px",class:"shadow-1"}))])),(0,l.Wm)("div",u,[P.name?((0,l.wg)(),(0,l.j4)(M,{key:1,style:e.$q.platform.is.mobile&&0===P.changelog.length?"height: 128px;":""},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{style:{"max-height":"128px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(U,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(z,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(P.name),1)])),_:1})])),_:1}),(0,l.Wm)(U,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(z,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(P.author),1)])),_:1})])),_:1}),(0,l.Wm)(U,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[g])),_:1}),(0,l.Wm)(z,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(P.version),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(H),e.$q.platform.is.mobile&&P.changelog.length>0||!e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)(S,{key:0,style:{"max-height":"222px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[h])),_:1})])),_:1})])),_:1}),(0,l.Wm)(L,{style:{height:"150px","max-width":"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)("span",{class:"plugin-changelog",innerHTML:P.changelog},null,8,["innerHTML"])])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["style"])):((0,l.wg)(),(0,l.j4)(j,{key:0,width:"100%","max-height":"350px",class:"shadow-1"}))])]),(0,l.Wm)("div",f,[(0,l.Wm)("div",w,[(0,l.Wm)("div",v,[(0,l.Wm)(M,{style:{width:"100%"}},{default:(0,l.w5)((()=>[P.description?((0,l.wg)(),(0,l.j4)(S,{key:1,class:"q-pa-md"},{default:(0,l.w5)((()=>[b,(0,l.Wm)("div",y,[(0,l.Wm)("span",{class:"plugin-description",innerHTML:P.description},null,8,["innerHTML"])])])),_:1})):((0,l.wg)(),(0,l.j4)(j,{key:0,width:"100%",height:"550px",class:"shadow-1"}))])),_:1})])])])])),_:1}),(0,l.Wm)(T,{name:"settings"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",_,[(0,l.Wm)("div",W,[(0,l.Wm)("div",null,[(0,l.Wm)(M,{flat:"",bordered:"",class:"q-pa-sm",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"q-pt-none"},{default:(0,l.w5)((()=>[P.settings.length>0?((0,l.wg)(),(0,l.j4)(D,{key:0,separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(P.settings,(t=>((0,l.wg)(),(0,l.j4)(U,(0,l.dG)({class:[t.display,"q-py-lg"],key:t.key_id},t),{default:(0,l.w5)((()=>["text"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{filled:"",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:t.label,placeholder:t.label},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])])),_:2},1024)):(0,l.kq)("",!0),"textarea"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{filled:"",type:"textarea",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:t.label},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)):(0,l.kq)("",!0),"checkbox"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:2,onClick:e=>t.value=!t.value},{default:(0,l.w5)((()=>[(0,l.Wm)("div",{style:e.$q.dark.isActive?"background:rgba(255,255,255,.07)":"background:rgba(0, 0, 0, 0.05);",class:"q-pa-sm rounded-borders"},[(0,l.Wm)(B,{"onUpdate:modelValue":[Z.savePluginSettings,e=>t.value=e],modelValue:t.value,label:t.label},null,8,["onUpdate:modelValue","modelValue","label"])],4)])),_:2},1032,["onClick"])):(0,l.kq)("",!0),"select"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{"onUpdate:modelValue":[Z.savePluginSettings,e=>t.value=e],filled:"",modelValue:t.value,"emit-value":"","map-options":"",options:t.select_options,"option-value":e=>Object(e)===e&&"value"in e?e.value:null,"option-label":e=>Object(e)===e&&"label"in e?e.label:"- Null -",label:t.label},null,8,["onUpdate:modelValue","modelValue","options","option-value","option-label","label"])])),_:2},1024)):(0,l.kq)("",!0),"slider"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:4,class:t.display,avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{color:"primary",name:"chevron_right"})])),_:2},1032,["class"])):(0,l.kq)("",!0),"slider"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:5,class:t.display},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,min:Number(t.slider_options.min),max:Number(t.slider_options.max),step:Number(t.slider_options.step),label:"","label-value":t.label+": "+t.value+t.slider_options.suffix,"label-always":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","min","max","step","label-value"])])),_:2},1032,["class"])):(0,l.kq)("",!0),"slider"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:6,class:t.display,avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{color:"primary",name:"chevron_left"})])),_:2},1032,["class"])):(0,l.kq)("",!0),"browse_directory"===t.input_type?((0,l.wg)(),(0,l.j4)(z,{key:7},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{readonly:"",filled:"",color:"primary",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:t.label,placeholder:t.label,onClick:e=>Z.updateWithDirectoryBrowser(t)},{append:(0,l.w5)((()=>[(0,l.Wm)(x,{onClick:e=>Z.updateWithDirectoryBrowser(t),class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","label","placeholder","onClick"])])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1040,["class"])))),128))])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),i.libraryId?((0,l.wg)(),(0,l.j4)("div",k,[(0,l.Wm)($,{label:e.$t("components.plugins.resetConfiguration"),color:"secondary",onClick:t[4]||(t[4]=e=>Z.resetPluginLibraryConfig())},null,8,["label"])])):(0,l.kq)("",!0)])])])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","maximized","transition-show","transition-hide","position","onBeforeHide","onHide"])}var P=i(1959),Z=i(52),x=i.n(Z),I=i(7689),$=i(9354),S=i(5625);const Q={name:"PluginInfo",components:{},data(){return{header:(0,P.iH)(""),pluginInfoShowDialog:(0,P.iH)(!1),tab:(0,P.iH)("info"),id:(0,P.iH)(null),pluginId:(0,P.iH)(""),icon:(0,P.iH)(null),name:(0,P.iH)(null),description:(0,P.iH)(null),tags:(0,P.iH)(null),author:(0,P.iH)(null),version:(0,P.iH)(null),changelog:(0,P.iH)(null),status:(0,P.iH)(null),settings:(0,P.iH)([]),originalSettings:(0,P.iH)([])}},watch:{showPluginInfo(e){e.length>0?(this.selectedPluginId=e,this.setHeader("info"),this.fetchPluginInfo(),this.pluginInfoShowDialog=!0):(this.pluginInfoShowDialog=!1,this.resetData())},showPluginSettings(e){e.length>0?(this.selectedPluginId=e,this.tab="settings",this.setHeader("settings"),this.fetchPluginInfo(),this.pluginInfoShowDialog=!0):(this.pluginInfoShowDialog=!1,this.resetData())}},methods:{resetData(){this.selectedPluginId="",this.tab="info",this.id=null,this.pluginId="",this.icon=null,this.name=null,this.description=null,this.tags=null,this.author=null,this.version=null,this.changelog=null,this.status=null,this.settings=[],this.currentSettings=[]},setHeader(e){"info"===e?this.header=this.$t("headers.pluginInfo"):this.libraryId?this.header=this.$t("headers.libraryPluginConfig"):this.header=this.$t("headers.globalPluginConfig")},resetPluginLibraryConfig(){let e={plugin_id:this.pluginId};this.libraryId&&(e.library_id=this.libraryId),x()({method:"post",url:(0,I.J4)("v2","plugins/settings/reset"),data:e}).then((e=>{this.fetchPluginInfo(),this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.SavedPluginSettings"),icon:"check_circle",timeout:200,actions:[{icon:"close",color:"white"}]}),this.$emit("hide")})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSavePluginSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchPluginInfo(){console.debug("Fetching info for "+this.selectedPluginId);let e={plugin_id:this.selectedPluginId,prefer_local:!0};this.viewingRemoteInfo&&(e.prefer_local=!1),this.libraryId&&(e.library_id=this.libraryId),x()({method:"post",url:(0,I.J4)("v2","plugins/info"),data:e}).then((e=>{this.id=e.data.id,this.pluginId=e.data.plugin_id,this.icon=e.data.icon,this.name=e.data.name,this.tags=e.data.tags,this.author=e.data.author,this.version=e.data.version,this.changelog=e.data.changelog,this.status=e.data.status,this.viewingRemoteInfo||(this.settings=e.data.settings,this.currentSettings=JSON.parse(JSON.stringify(e.data.settings))),this.changelog=(0,$.iw)(e.data.changelog),this.description=(0,$.iw)(e.data.description)}))},settingsHaveBeenModified(){let e={};for(let t=0;t<this.settings.length;t++)e[this.settings[t].key_id]=this.settings[t].value;for(let t=0;t<this.currentSettings.length;t++)if(e[this.currentSettings[t].key_id]!==this.currentSettings[t].value)return!0;return!1},beforeDialogHide(){"undefined"!==typeof this.currentSettings&&this.currentSettings.length>0&&this.settingsHaveBeenModified()&&this.savePluginSettings()},onDialogHide(){this.$emit("hide")},savePluginSettings:function(){console.debug("Fetching info for "+this.pluginId);let e={plugin_id:this.pluginId,settings:this.settings};this.libraryId&&(e.library_id=this.libraryId),x()({method:"post",url:(0,I.J4)("v2","plugins/settings/update"),data:e}).then((e=>{this.fetchPluginInfo(),this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.SavedPluginSettings"),icon:"check_circle",timeout:200,actions:[{icon:"close",color:"white"}]})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSavePluginSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},updateWithDirectoryBrowser:function(e){this.$q.dialog({component:S.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:e.value,listType:"directories"}}).onOk((t=>{"undefined"!==typeof t.selectedPath&&null!==t.selectedPath&&(e.value=t.selectedPath)})).onDismiss((()=>{}))}},props:{showPluginInfo:{type:String,required:!1},showPluginSettings:{type:String,required:!1},viewingRemoteInfo:{type:Boolean,required:!1},libraryId:{type:Number,required:!1}},setup(){return{}}};var R=i(6778),H=i(151),j=i(5589),V=i(4554),C=i(2165),z=i(8870),U=i(7547),D=i(3269),L=i(5869),M=i(5906),T=i(6602),A=i(4103),B=i(5096),N=i(4027),F=i(7011),J=i(3414),E=i(2035),O=i(7704),Y=i(4842),G=i(5735),K=i(8516),X=i(2064),ee=i(677),te=i(7518),ie=i.n(te);Q.render=q;const le=Q;ie()(Q,"components",{QDialog:R.Z,QCard:H.Z,QCardSection:j.Z,QIcon:V.Z,QBtn:C.Z,QTooltip:z.Z,QTabs:U.Z,QTab:D.Z,QSeparator:L.Z,QTabPanels:M.Z,QTabPanel:T.Z,QSkeleton:A.ZP,QAvatar:B.Z,QImg:N.Z,QList:F.Z,QItem:J.Z,QItemSection:E.Z,QScrollArea:O.Z,QInput:Y.Z,QCheckbox:G.Z,QSelect:K.Z,QSlider:X.Z}),ie()(Q,"directives",{ClosePopup:ee.Z})},1626:(e,t,i)=>{"use strict";i.d(t,{Z:()=>$e});var l=i(3673),o=i(2323);const n={class:"row items-center no-wrap"},s={class:"col-auto"},a={class:"col"},r={class:"text-h6 text-primary"},d={class:"q-pa-md"},c={class:"row q-col-gutter-xs q-ma-xs"},u={key:0,class:"col-auto"},p={class:"col-auto"},m={class:"col-auto"},g={class:"row q-col-gutter-xs q-ma-xs"},h={class:"col-auto"},f={class:"full-width row flex-center text-accent q-gutter-sm"},w={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},v={class:"row"},b={style:{overflow:"hidden","white-space":"nowrap"}},y={class:"row float-right"},_=(0,l.Uk)(" Update Available "),W=(0,l.Uk)(" Installed "),k={class:"row q-col-gutter-md"},q={class:"col-auto"},P={class:"absolute-full flex flex-center bg-negative text-white text-caption"},Z={class:"col"},x={class:"row q-col-gutter-md"},I={class:"col-4 self-start"},$={class:"col self-end"},S={class:"row q-col-gutter-md"},Q={class:"col-4 self-start"},R={class:"col self-end"},H={class:"row q-col-gutter-md"},j={class:"col-4 self-start"},V={class:"col self-end"},C={class:"row"},z={class:"col-auto items-end"},U={class:"row justify-center q-mt-md"};function D(e,t,i,D,L,M){const T=(0,l.up)("q-tooltip"),A=(0,l.up)("q-btn"),B=(0,l.up)("q-icon"),N=(0,l.up)("q-card-section"),F=(0,l.up)("PluginInstallerManageRepos"),J=(0,l.up)("q-input"),E=(0,l.up)("q-select"),O=(0,l.up)("q-item-label"),Y=(0,l.up)("q-separator"),G=(0,l.up)("q-skeleton"),K=(0,l.up)("q-img"),X=(0,l.up)("q-avatar"),ee=(0,l.up)("q-spinner"),te=(0,l.up)("q-inner-loading"),ie=(0,l.up)("q-card"),le=(0,l.up)("q-table"),oe=(0,l.up)("q-pagination"),ne=(0,l.up)("PluginInfo"),se=(0,l.up)("q-dialog"),ae=(0,l.Q2)("close-popup"),re=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(se,{ref:"dialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"slide-right","transition-hide":"slide-left","full-height":"",position:"left",onHide:M.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(ie,{style:[e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"2000px"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",n,[(0,l.Wm)("div",s,[(0,l.wy)((0,l.Wm)(A,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.back")),1)])),_:1})])),_:1},512),[[ae]])]),(0,l.Wm)("div",a,[(0,l.Wm)("div",r,[(0,l.Wm)(B,{name:"extension"}),(0,l.Uk)(" "+(0,o.zw)(e.$t("headers.pluginInstaller")),1)])])])])),_:1}),(0,l.Wm)(N,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",d,[(0,l.Wm)(le,{grid:"","card-class":"bg-primary text-white",rows:e.rows,columns:e.columns,"row-key":"name",filter:e.filter,"hide-header":"",pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t),"hide-pagination":""},(0,l.Nv)({"top-left":(0,l.w5)((()=>[(0,l.Wm)("div",c,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)("div",u,[(0,l.Wm)(F)])):(0,l.kq)("",!0),(0,l.Wm)("div",p,[(0,l.Wm)(J,{filled:"",class:"shadow-1",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),placeholder:e.$t("navigation.search")},{append:(0,l.w5)((()=>[(0,l.Wm)(B,{name:"search"})])),_:1},8,["modelValue","placeholder"])]),(0,l.Wm)("div",m,[(0,l.Wm)(E,{filled:"",class:"shadow-1","onUpdate:modelValue":[M.loadInstallablePlugins,t[2]||(t[2]=t=>e.tagFilter=t)],dense:"",label:e.$t("components.plugins.categoryFilter"),modelValue:e.tagFilter,options:e.tags,style:{"min-width":"300px"}},{append:(0,l.w5)((()=>[(0,l.Wm)(B,{name:"style"})])),_:1},8,["onUpdate:modelValue","label","modelValue","options"])])])])),"no-data":(0,l.w5)((()=>[(0,l.Wm)("div",f,[(0,l.Wm)(B,{size:"2em",name:"sentiment_dissatisfied"}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("headers.listEmpty")),1)])),_:1}),(0,l.Wm)(B,{size:"2em",name:"priority_high"})])])),item:(0,l.w5)((t=>[(0,l.Wm)("div",w,[(0,l.Wm)(ie,{style:{"min-height":"220px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{style:{"min-height":"80px"}},{default:(0,l.w5)((()=>[(0,l.Wm)("div",v,[(0,l.Wm)("span",b,[(0,l.Wm)("strong",null,(0,o.zw)(t.row.name),1)])]),(0,l.Wm)("div",y,[t.row.update_available?((0,l.wg)(),(0,l.j4)(A,{key:0,color:"warning",dense:"",round:"",flat:"",icon:"check_circle"},{default:(0,l.w5)((()=>[_])),_:1})):t.row.installed?((0,l.wg)(),(0,l.j4)(A,{key:1,color:"positive",dense:"",round:"",flat:"",icon:"check_circle"},{default:(0,l.w5)((()=>[W])),_:1})):(0,l.kq)("",!0)])])),_:2},1024),t.row.update_available?((0,l.wg)(),(0,l.j4)(Y,{key:0,color:"warning"})):t.row.installed?((0,l.wg)(),(0,l.j4)(Y,{key:1,color:"positive"})):((0,l.wg)(),(0,l.j4)(Y,{key:2})),(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",k,[(0,l.Wm)("div",q,[t.row.icon?((0,l.wg)(),(0,l.j4)(X,{key:1,rounded:"",size:"100px"},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{src:t.row.icon,style:{height:"100%","max-width":"100px"}},{error:(0,l.w5)((()=>[(0,l.Wm)("div",P,(0,o.zw)(e.$t("status.cannotLoadImage")),1)])),_:2},1032,["src"])])),_:2},1024)):((0,l.wg)(),(0,l.j4)(G,{key:0,width:"100px",height:"100px"}))]),(0,l.Wm)("div",Z,[(0,l.Wm)("div",x,[(0,l.Wm)("div",I,(0,o.zw)(e.$t("components.plugins.author")),1),(0,l.Wm)("div",$,(0,o.zw)(t.row.author),1)]),(0,l.Wm)("div",S,[(0,l.Wm)("div",Q,(0,o.zw)(e.$t("components.plugins.version")),1),(0,l.Wm)("div",R,(0,o.zw)(t.row.version),1)]),(0,l.Wm)("div",H,[(0,l.Wm)("div",j,(0,o.zw)(e.$t("components.plugins.repo")),1),(0,l.Wm)("div",V,(0,o.zw)(t.row.repo_name),1)])])])])),_:2},1024),(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",C,[(0,l.Wm)("div",z,[t.row.update_available?((0,l.wg)(),(0,l.j4)(A,{key:0,onClick:e=>M.installPlugin(t.row.plugin_id,t.row.repo_id),color:"accent",dense:"",round:"",flat:"",icon:"update"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.update")),1)])),_:1})])),_:2},1032,["onClick"])):t.row.installed?((0,l.wg)(),(0,l.j4)(A,{key:1,onClick:e=>M.installPlugin(t.row.plugin_id,t.row.repo_id),color:"accent",dense:"",round:"",flat:"",icon:"download_for_offline"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.reinstall")),1)])),_:1})])),_:2},1032,["onClick"])):((0,l.wg)(),(0,l.j4)(A,{key:2,onClick:e=>M.installPlugin(t.row.plugin_id,t.row.repo_id),color:"accent",dense:"",round:"",flat:"",icon:"download_for_offline"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.install")),1)])),_:1})])),_:2},1032,["onClick"])),(0,l.Wm)(A,{onClick:i=>e.showPluginInfo=t.row.plugin_id,color:"secondary",dense:"",round:"",flat:"",icon:"info"},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("tooltips.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"])])])])),_:2},1024),(0,l.Wm)(te,{showing:e.pluginInstalling[t.row.repo_id+t.row.plugin_id]},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{size:"100px",color:"secondary"})])),_:2},1032,["showing"])])),_:2},1024)])])),_:2},[e.$q.platform.is.mobile?void 0:{name:"top-right",fn:(0,l.w5)((()=>[(0,l.Wm)("div",g,[(0,l.Wm)("div",h,[(0,l.Wm)(F,{onRepoReloaded:M.reloadPluginsPostRepoReloaded},null,8,["onRepoReloaded"])])])]))}]),1032,["rows","columns","filter","pagination"]),(0,l.Wm)("div",U,[(0,l.Wm)(oe,{modelValue:e.pagination.page,"onUpdate:modelValue":t[4]||(t[4]=t=>e.pagination.page=t),color:"secondary",max:e.pagesNumber,size:"md","direction-links":"","boundary-links":""},null,8,["modelValue","max"])])])])),_:1})])),_:1},8,["style"]),[[re,M.hide,void 0,{touch:!0,left:!0}]]),(0,l.Wm)(ne,{showPluginInfo:e.showPluginInfo,viewingRemoteInfo:e.viewingRemoteInfo,onHide:M.closePluginInfo},null,8,["showPluginInfo","viewingRemoteInfo","onHide"])])),_:1},8,["maximized","onHide"])}i(7280),i(6801),i(246),i(7098);var L=i(52),M=i.n(L),T=i(7689),A=i(1959),B=i(2295);const N={class:"row no-wrap q-pa-md"},F={class:"column"},J={class:"row no-wrap q-pa-md"},E={class:"column"},O={class:"text-h6 q-mb-md"},Y={class:"column items-center"};function G(e,t,i,n,s,a){const r=(0,l.up)("q-btn"),d=(0,l.up)("q-input"),c=(0,l.up)("q-btn-dropdown"),u=(0,l.up)("q-item-label"),p=(0,l.up)("q-item-section"),m=(0,l.up)("q-item"),g=(0,l.up)("q-list"),h=(0,l.up)("q-separator"),f=(0,l.up)("q-skeleton"),w=(0,l.up)("q-avatar"),v=(0,l.up)("q-btn-group");return(0,l.wg)(),(0,l.j4)(l.HY,null,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)(r,{key:0,onClick:t[1]||(t[1]=e=>a.reloadAllReposData()),class:"q-mb-xs",color:"secondary",label:e.$t("components.plugins.refreshRepositories")},null,8,["label"])):(0,l.kq)("",!0),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:0,onClick:t[2]||(t[2]=e=>a.reloadAllReposData()),color:"secondary",label:e.$t("components.plugins.refreshRepositories")},null,8,["label"])),(0,l.Wm)(c,{color:"secondary",label:e.$t("components.plugins.addRepository")},{default:(0,l.w5)((()=>[(0,l.Wm)("div",null,[(0,l.Wm)("div",N,[(0,l.Wm)("div",F,[(0,l.Wm)(d,{style:{"min-width":"400px"},filled:"",type:"textarea",modelValue:s.newRepo,"onUpdate:modelValue":t[3]||(t[3]=e=>s.newRepo=e),label:e.$t("components.plugins.newRepository")},null,8,["modelValue","label"]),(0,l.Wm)(r,{onClick:t[4]||(t[4]=e=>a.saveNewRepo()),color:"secondary",label:e.$t("navigation.save")},null,8,["label"])])])])])),_:1},8,["label"]),(0,l.Wm)(c,{"auto-close":"",color:"secondary",label:e.$t("components.plugins.repoList")},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(s.repoList,(t=>((0,l.wg)(),(0,l.j4)("div",(0,l.dG)({key:t.id},t),[(0,l.Wm)("div",J,[(0,l.Wm)("div",E,[(0,l.Wm)("div",O,(0,o.zw)(e.$t("headers.information"))+":",1),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("components.plugins.repoName")),1)])),_:1}),(0,l.Wm)(u,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("components.plugins.repoSource")),1)])),_:1}),(0,l.Wm)(u,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)("span",{class:"cursor-pointer clickable",onClick:e=>a.goToRepoSource(t.path)},(0,o.zw)(t.path),9,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)]),(0,l.Wm)(h,{vertical:"",inset:"",class:"q-mx-lg"}),(0,l.Wm)("div",Y,[t.icon?((0,l.wg)(),(0,l.j4)(w,{key:1,rounded:"",size:"72px"},{default:(0,l.w5)((()=>[(0,l.Wm)("img",{src:t.icon},null,8,["src"])])),_:2},1024)):((0,l.wg)(),(0,l.j4)(f,{key:0,width:"72px",height:"72px"})),(0,l.Wm)(r,{class:"q-ma-xs",color:"negative",label:"Remove",push:"",size:"sm",onClick:e=>a.removeRepo(t.path)},null,8,["onClick"])])])],16)))),128))])),_:1},8,["label"])])),_:1})],64)}var K=i(3437);const X={data(){return{repoList:[],newRepo:""}},methods:{goToRepoSource:function(e){(0,K.Z)(e,null)},getRepoInfo:function(){M()({method:"get",url:(0,T.J4)("v2","plugins/repos/list")}).then((e=>{let t=[];for(let i=0;i<e.data.repos.length;i++){let l=e.data.repos[i];t[t.length]={id:l.id,name:l.name,icon:l.icon,path:l.path}}this.repoList=t})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:"Failed to fetch the list of plugin repos.",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},updateRepoList:function(e){let t={repos_list:e};return M()({method:"post",url:(0,T.J4)("v2","plugins/repos/update"),data:t})},reloadAllReposData:function(){M()({method:"post",url:(0,T.J4)("v2","plugins/repos/reload")}).then((e=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.reposRefreshSuccess"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),this.getRepoInfo(),this.$emit("repoReloaded")})).catch((()=>{this.$q.notify({color:"warning",position:"top",message:this.$t("notifications.reposRefreshFailure"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},saveNewRepo:function(){if(this.newRepo.length>0){let e=[];for(let t=0;t<this.repoList.length;t++){let i=this.repoList[t].path;if(this.newRepo.trim()===i)return void this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.repoAlreadyExists")+' "'+this.newRepo.trim()+'"',icon:"report_problem",actions:[{icon:"close",color:"white"}]});e[e.length]=i}e[e.length]=this.newRepo.trim(),this.updateRepoList(e).then((e=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.saved"),icon:"cloud_done",actions:[{icon:"close",color:"white"}]}),this.newRepo="",this.reloadAllReposData(),this.$emit("repoReloaded",!0)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.newRepoAddFailed"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},removeRepo:function(e){let t=[];for(let i=0;i<this.repoList.length;i++){let l=this.repoList[i];e.trim()!==l.path&&(t[t.length]=l.path)}this.updateRepoList(t).then((t=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.repoRemovedSuccess")+' "'+e.trim()+'"',icon:"check_circle",actions:[{icon:"close",color:"white"}]}),this.reloadAllReposData(),this.$emit("repoReloaded")})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.repoRemovedFailed"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},created(){this.getRepoInfo()},emits:["repoReloaded"]};var ee=i(2165),te=i(6375),ie=i(2226),le=i(4842),oe=i(7011),ne=i(3414),se=i(2035),ae=i(2350),re=i(5869),de=i(4103),ce=i(5096),ue=i(7518),pe=i.n(ue);X.render=G;const me=X;pe()(X,"components",{QBtn:ee.Z,QBtnGroup:te.Z,QBtnDropdown:ie.Z,QInput:le.Z,QList:oe.Z,QItem:ne.Z,QItemSection:se.Z,QItemLabel:ae.Z,QSeparator:re.Z,QSkeleton:de.ZP,QAvatar:ce.Z});const ge=[{name:"icon",required:!0,label:"",align:"left",field:"icon",sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"author",align:"center",label:"Author",field:"author",sortable:!1},{name:"version",align:"center",label:"Version",field:"version",sortable:!1}],he={name:"PluginInstallerDialog",props:{},emits:["ok","hide","path"],components:{PluginInstallerManageRepos:me,PluginInfo:B.Z},methods:{show(){this.$refs.dialogRef.show()},hide(){this.$refs.dialogRef.hide()},onDialogHide(){this.$emit("hide")},installPlugin:function(e,t){console.debug("Installing plugin by Plugin ID: "+e+"from Repo ID - "+t);let i={plugin_id:e,repo_id:t};this.pluginInstalling[t+e]=!0,M()({method:"post",url:(0,T.J4)("v2","plugins/install"),data:i}).then((i=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.installed"),icon:"check_circle",actions:[{icon:"close",color:"white"}]});for(let t=0;t<this.rows.length;t++){let i=this.rows[t];i.plugin_id===e&&(i.installed=!0,i.update_available=!1)}this.pluginInstalling[t+e]=!1})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToInstallPlugin"),icon:"report_problem",actions:[{icon:"close",color:"white"}]}),this.pluginInstalling[t+e]=!1}))},loadInstallablePlugins:function(){M()({method:"get",url:(0,T.J4)("v2","plugins/installable")}).then((e=>{let t=e.data.plugins,i=[],l=[];for(let o=0;o<t.length;o++){let e=t[o],n=e.tags.split(",");for(let t=0;t<n.length;t++){let e=n[t];l.includes(e)||(l[l.length]=e.trim())}("All"===this.tagFilter||e.tags.includes(this.tagFilter))&&(i[i.length]={plugin_id:e.plugin_id,name:e.name,author:e.author,description:e.description,version:e.version,icon:e.icon,tags:e.tags,installed:e.status.installed,update_available:e.status.update_available,package_url:e.package_url,changelog_url:e.changelog_url,repo_name:e.repo_name,repo_id:e.repo_id})}"All"!==this.tagFilter&&(this.pagination.page=1),this.tags=["All"].concat(l.sort()),this.rows=i}))},reloadPluginsPostRepoReloaded:function(){this.pagination.page=1,this.loadInstallablePlugins()},closePluginInfo:function(){this.showPluginInfo=""}},created(){this.loadInstallablePlugins()},data:function(){const e=(0,A.iH)([]),t=(0,A.iH)("All"),i=(0,A.iH)([]),o=(0,A.iH)(""),n=(0,A.iH)({page:1,rowsPerPage:12});return{filter:o,columns:ge,rows:i,pagination:n,pagesNumber:(0,l.Fl)((()=>Math.ceil(i.value.length/n.value.rowsPerPage))),tags:e,tagFilter:t,viewingRemoteInfo:(0,A.iH)(!0),showPluginInfo:(0,A.iH)(""),pluginInstalling:(0,A.iH)({})}}};var fe=i(6778),we=i(151),ve=i(5589),be=i(8870),ye=i(4554),_e=i(6429),We=i(8516),ke=i(4027),qe=i(6941),Pe=i(9754),Ze=i(7300),xe=i(8020),Ie=i(677);he.render=D;const $e=he;pe()(he,"components",{QDialog:fe.Z,QCard:we.Z,QCardSection:ve.Z,QBtn:ee.Z,QTooltip:be.Z,QIcon:ye.Z,QTable:_e.Z,QInput:le.Z,QSelect:We.Z,QItemLabel:ae.Z,QSeparator:re.Z,QSkeleton:de.ZP,QAvatar:ce.Z,QImg:ke.Z,QInnerLoading:qe.Z,QSpinner:Pe.Z,QPagination:Ze.Z}),pe()(he,"directives",{TouchSwipe:xe.Z,ClosePopup:Ie.Z})},1561:(e,t,i)=>{e.exports=i.p+"img/unmanic-logo-white.a3277864.png"}}]);