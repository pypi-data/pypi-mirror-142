(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[51],{9769:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ut});var l=i(3673),n=i(2323);const o={class:"q-pa-none"},a={class:"row"},s={class:"col q-ma-sm"},r={class:"q-pa-md",style:{"max-width":"500px"}},c={class:"q-mb-none"},d={class:"q-gutter-sm"},u={class:"text-grey-8 q-gutter-xs"},m={class:"q-mb-none"},p={class:"q-gutter-sm"},g={key:2,class:"sub-setting"},h={class:"q-gutter-sm"},y={class:"q-gutter-sm"},f={class:"q-gutter-sm"},b={class:"q-mb-none"},w={class:"q-gutter-sm"},_={class:"q-mb-none"},k={class:"q-gutter-sm"},q={key:0},v={class:"row"},W=(0,l.Wm)("div",{class:"col-6 text-center"},null,-1),S={class:"col-6 text-center"};function $(e,t,i,$,P,x){const C=(0,l.up)("q-skeleton"),L=(0,l.up)("q-avatar"),Q=(0,l.up)("q-item-section"),Z=(0,l.up)("q-item-label"),T=(0,l.up)("q-tooltip"),j=(0,l.up)("q-separator"),I=(0,l.up)("q-btn"),H=(0,l.up)("q-item"),D=(0,l.up)("q-list"),z=(0,l.up)("q-space"),F=(0,l.up)("q-bar"),U=(0,l.up)("q-toggle"),V=(0,l.up)("q-input"),O=(0,l.up)("q-slider"),B=(0,l.up)("q-form"),J=(0,l.up)("q-card"),R=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(R,{padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",o,[(0,l.Wm)("div",a,[(0,l.Wm)("div",s,[(0,l.Wm)("div",r,[(0,l.Wm)(B,{onSubmit:x.save,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)("h5",c,(0,n.zw)(e.$t("components.settings.library.pathConfiguration")),1),(0,l.Wm)("div",d,[null===P.libraryPaths?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"text"})):(0,l.kq)("",!0),(0,l.Wm)(D,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(P.libraryPaths,((t,i)=>((0,l.wg)(),(0,l.j4)(H,{key:i,"active-class":"library-path-list-item"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{"text-color":"grey-8",icon:"source"})])),_:1}),(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(Z,{caption:"",lines:"1"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.path),1)])),_:2},1024),(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.path),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(j,{inset:"",vertical:"",class:"q-mx-sm"}),(0,l.Wm)(Q,{center:"",side:""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",u,[(0,l.Wm)(I,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",onClick:e=>x.configureLibraryPath(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.configure")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(I,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"delete",disable:t.locked,onClick:e=>x.deleteLibrary(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.delete")),1)])),_:1})])),_:2},1032,["disable","onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,l.Wm)(F,{class:"bg-transparent"},{default:(0,l.w5)((()=>[(0,l.Wm)(z),(0,l.Wm)(I,{round:"",flat:"",color:"primary",icon:"add",onClick:x.addNewLibraryWithDirectoryBrowser},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.add")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,l.Wm)(j,{class:"q-my-lg"}),(0,l.Wm)("h5",m,(0,n.zw)(e.$t("components.settings.library.libraryScanner")),1),(0,l.Wm)("div",p,[null===P.enableLibraryScanner?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(U,{key:1,modelValue:P.enableLibraryScanner,"onUpdate:modelValue":t[1]||(t[1]=e=>P.enableLibraryScanner=e),label:e.$t("components.settings.library.enableLibraryScanner")},null,8,["modelValue","label"])),P.enableLibraryScanner?((0,l.wg)(),(0,l.j4)("div",g,[(0,l.Wm)("div",h,[null===P.libraryScanSchedule?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"QInput"})):(0,l.kq)("",!0),P.enableLibraryScanner&&null!==P.libraryScanSchedule?((0,l.wg)(),(0,l.j4)(V,{key:1,outlined:"",type:"number",modelValue:P.libraryScanSchedule,"onUpdate:modelValue":t[2]||(t[2]=e=>P.libraryScanSchedule=e),label:e.$t("components.settings.library.libraryScannerSchedule"),"lazy-rules":"",rules:[t=>null!==t&&""!==t||e.$t("components.settings.library.libraryScannerScheduleNotValid"),t=>t>0||e.$t("components.settings.pleaseEnterAValidNumber")]},null,8,["modelValue","label","rules"])):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)]),(0,l.Wm)("div",y,[null===P.runLibraryScanOnStart?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"QToggle"})):(0,l.kq)("",!0),null!==P.runLibraryScanOnStart?((0,l.wg)(),(0,l.j4)(U,{key:1,modelValue:P.runLibraryScanOnStart,"onUpdate:modelValue":t[3]||(t[3]=e=>P.runLibraryScanOnStart=e),label:e.$t("components.settings.library.runLibraryScanOnStart")},null,8,["modelValue","label"])):(0,l.kq)("",!0)]),(0,l.Wm)("div",f,[null===P.libraryScanFollowSymlinks?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"QToggle"})):(0,l.kq)("",!0),null!==P.libraryScanFollowSymlinks?((0,l.wg)(),(0,l.j4)(U,{key:1,modelValue:P.libraryScanFollowSymlinks,"onUpdate:modelValue":t[4]||(t[4]=e=>P.libraryScanFollowSymlinks=e),label:e.$t("components.settings.library.followSymlinks")},null,8,["modelValue","label"])):(0,l.kq)("",!0)]),(0,l.Wm)(j,{class:"q-my-lg"}),(0,l.Wm)("h5",b,(0,n.zw)(e.$t("components.settings.library.fileTesting")),1),(0,l.Wm)("div",w,[null===P.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"QInput"})):(0,l.kq)("",!0),null!==P.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(V,{key:1,readonly:"",outlined:"",color:"primary",modelValue:P.concurrentFileTesters,"onUpdate:modelValue":t[5]||(t[5]=e=>P.concurrentFileTesters=e),label:e.$t("components.settings.library.concurrentFileTesters"),placeholder:P.concurrentFileTesters},null,8,["modelValue","label","placeholder"])):(0,l.kq)("",!0),null===P.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(C,{key:2,type:"QSlider"})):(0,l.kq)("",!0),null!==P.concurrentFileTesters?((0,l.wg)(),(0,l.j4)(O,{key:3,modelValue:P.concurrentFileTesters,"onUpdate:modelValue":t[6]||(t[6]=e=>P.concurrentFileTesters=e),min:1,max:10,step:1,color:"primary"},null,8,["modelValue"])):(0,l.kq)("",!0)]),(0,l.Wm)(j,{class:"q-my-lg"}),(0,l.Wm)("h5",_,(0,n.zw)(e.$t("components.settings.library.pendingTasks")),1),(0,l.Wm)("div",k,[null===P.clearPendingTasksOnStart?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(U,{key:1,modelValue:P.clearPendingTasksOnStart,"onUpdate:modelValue":t[7]||(t[7]=e=>P.clearPendingTasksOnStart=e),label:e.$t("components.settings.library.clearPendingTasksOnStart")},null,8,["modelValue","label"]))]),(0,l.Wm)("div",null,[(0,l.Wm)(I,{label:e.$t("navigation.submit"),type:"submit",color:"secondary"},null,8,["label"])])])),_:1},8,["onSubmit"])])])]),e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)("div",q,[(0,l.Wm)(j,{class:"q-mb-lg"}),(0,l.Wm)("div",v,[W,(0,l.Wm)("div",S,[(0,l.Wm)(J,{flat:"",bordered:"",onClick:t[8]||(t[8]=t=>e.$router.push("/ui/settings-workers")),class:"q-ma-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{"icon-right":"navigate_next",flat:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("navigation.workers")),1)])),_:1})])),_:1})])])])):(0,l.kq)("",!0)])])),_:1})}var P=i(4190),x=i(1959),C=i(8825),L=i(5948),Q=i(5625),Z=i(52),T=i.n(Z),j=i(7689);i(246);const I={class:"row items-center no-wrap"},H={key:0,class:"col"},D={class:"col"},z={class:"text-h6 text-blue-10"},F={key:1,class:"col-auto"},U={class:"row items-center no-wrap q-mb-md"},V={class:"col"},O={class:"text-h5"},B={class:"col-auto"},J={class:"q-pb-sm"},R={class:"q-pb-sm"},N={class:"q-pb-sm"},K={class:"q-pb-sm"},M={class:"row items-center no-wrap q-mb-md"},A={class:"col"},E={class:"text-h6"},Y={class:"q-gutter-sm"},G={class:"text-grey-8 q-gutter-xs"},X={class:"text-h6"};function ee(e,t,i,o,a,s){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-tooltip"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-skeleton"),m=(0,l.up)("q-input"),p=(0,l.up)("q-icon"),g=(0,l.up)("q-item-label"),h=(0,l.up)("q-item-section"),y=(0,l.up)("q-toggle"),f=(0,l.up)("q-item"),b=(0,l.up)("q-separator"),w=(0,l.up)("q-img"),_=(0,l.up)("q-list"),k=(0,l.up)("q-space"),q=(0,l.up)("q-bar"),v=(0,l.up)("LibraryConfigurePluginFlowList"),W=(0,l.up)("q-card"),S=(0,l.up)("PluginInfo"),$=(0,l.up)("q-dialog"),P=(0,l.Q2)("close-popup"),x=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)($,{ref:"libraryConfigureDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"slide-left","transition-hide":"slide-right","full-height":"",position:"right",onBeforeHide:s.beforeDialogHide,onHide:s.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(W,{style:[e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",I,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)("div",H,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[P]])])):(0,l.kq)("",!0),(0,l.Wm)("div",D,[(0,l.Wm)("div",z,(0,n.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("div",F,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512),[[P]])]))])])),_:1}),(0,l.Wm)(d,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",{class:e.$q.platform.is.mobile?"q-px-none":""},[(0,l.Wm)(W,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:e.$q.platform.is.mobile?"q-px-none":""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",U,[(0,l.Wm)("div",V,[(0,l.Wm)("div",O,(0,n.zw)(e.$t("components.settings.library.configuration")),1)]),(0,l.Wm)("div",B,[(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"download",onClick:s.exportPluginConfig},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.exportLibraryConfig")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"publish",onClick:s.importPluginConfig},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.importLibraryConfig")),1)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"content_copy",onClick:s.cloneLibrary},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.cloneLibrary")),1)])),_:1})])),_:1},8,["onClick"]),e.locked?((0,l.wg)(),(0,l.j4)(r,{key:0,round:"",flat:"",color:"negative",icon:"lock",onClick:t[1]||(t[1]=t=>e.locked=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.locked")),1)])),_:1})])),_:1})):((0,l.wg)(),(0,l.j4)(r,{key:1,round:"",flat:"",color:"primary",icon:"lock_open",onClick:t[2]||(t[2]=t=>e.locked=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.unlocked")),1)])),_:1})])),_:1}))])]),(0,l.Wm)("div",J,[null===e.name?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QInput"})):(0,l.kq)("",!0),null!==e.name?((0,l.wg)(),(0,l.j4)(m,{key:1,outlined:"",color:"primary",modelValue:e.name,"onUpdate:modelValue":t[3]||(t[3]=t=>e.name=t),label:e.$t("components.settings.library.name"),placeholder:e.name},null,8,["modelValue","label","placeholder"])):(0,l.kq)("",!0)]),(0,l.Wm)("div",R,[null===e.path?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QInput"})):((0,l.wg)(),(0,l.j4)(m,{key:1,readonly:"",outlined:"",color:"primary",modelValue:e.path,"onUpdate:modelValue":t[4]||(t[4]=t=>e.path=t),label:e.$t("components.settings.library.path"),placeholder:e.path,onClick:s.updateLibraryWithDirectoryBrowser},{append:(0,l.w5)((()=>[(0,l.Wm)(p,{onClick:s.updateLibraryWithDirectoryBrowser,class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:1},8,["modelValue","label","placeholder","onClick"]))]),(0,l.Wm)("div",N,[null===e.enableScanner?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(f,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.enableScanner")),1)])),_:1})])),_:1}),(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:e.enableScanner,"onUpdate:modelValue":t[5]||(t[5]=t=>e.enableScanner=t)},null,8,["modelValue"])])),_:1})])),_:1}))]),(0,l.Wm)("div",K,[null===e.enableInotify?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"QToggle"})):((0,l.wg)(),(0,l.j4)(f,{key:1,tag:"label",class:"border-hover",style:{"padding-left":"12px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.enableInotify")),1)])),_:1})])),_:1}),(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:e.enableInotify,"onUpdate:modelValue":t[6]||(t[6]=t=>e.enableInotify=t)},null,8,["modelValue"])])),_:1})])),_:1}))])])),_:1},8,["class"]),(0,l.Wm)(b),(0,l.Wm)(d,{class:e.$q.platform.is.mobile?"q-px-none":""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",M,[(0,l.Wm)("div",A,[(0,l.Wm)("div",E,(0,n.zw)(e.$t("components.settings.library.plugins")),1)])]),(0,l.Wm)("div",Y,[null===e.enabledPlugins?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"text"})):(0,l.kq)("",!0),(0,l.Wm)(_,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.enabledPlugins,((t,i)=>((0,l.wg)(),(0,l.j4)("div",{key:i},[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{src:t.icon},null,8,["src"])])),_:2},1024),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(g,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.description),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(b,{inset:"",vertical:"",class:"q-mx-sm"}),(0,l.Wm)(h,{center:"",side:""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",G,[(0,l.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"grey-8",icon:"tune",disable:!t.has_config,onClick:i=>e.showPluginSettings=t.plugin_id},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.configure")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,l.Wm)(r,{flat:"",dense:"",round:"",size:"12px",color:"negative",icon:"remove_circle_outline",onClick:e=>s.removePluginFromList(i)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.remove")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)])))),128))])),_:1}),(0,l.Wm)(q,{class:"bg-transparent q-mb-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(k),(0,l.Wm)(r,{round:"",flat:"",color:"primary",icon:"add",onClick:s.selectPluginFromList},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("components.settings.library.addPluginConfig")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,l.Wm)("div",X,(0,n.zw)(e.$t("components.settings.library.pluginFlow")),1),(0,l.Wm)(v,{libraryId:e.currentID,key:e.componentKey},null,8,["libraryId"])])),_:1},8,["class"])])),_:1})],2)])),_:1})])),_:1},8,["style"]),[[x,s.hide,void 0,{touch:!0,right:!0}]]),(0,l.Wm)(S,{showPluginSettings:e.showPluginSettings,libraryId:e.currentID,onHide:s.closePluginInfo},null,8,["showPluginSettings","libraryId","onHide"])])),_:1},8,["maximized","onBeforeHide","onHide"])}i(7098);var te=i(2295);const ie={class:"row items-center no-wrap"},le={key:0,class:"col"},ne={class:"col"},oe={class:"text-h6 text-blue-10"},ae={key:1,class:"col-auto"},se={class:"row q-gutter-xs q-mt-xs justify-between"},re={class:"col-auto"},ce={class:"col-auto",style:{"max-width":"200px"}};function de(e,t,i,o,a,s){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-tooltip"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-icon"),m=(0,l.up)("q-input"),p=(0,l.up)("q-separator"),g=(0,l.up)("q-img"),h=(0,l.up)("q-item-section"),y=(0,l.up)("q-item-label"),f=(0,l.up)("q-item"),b=(0,l.up)("q-list"),w=(0,l.up)("q-card"),_=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup"),q=(0,l.Q2)("ripple"),v=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(_,{ref:"pluginSelectorDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:s.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(w,{style:[e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",ie,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)("div",le,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[k]])])):(0,l.kq)("",!0),(0,l.Wm)("div",ne,[(0,l.Wm)("div",oe,(0,n.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("div",ae,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512),[[k]])]))])])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",se,[(0,l.Wm)("div",re,[(0,l.Wm)(r,{onClick:s.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPlugins")},null,8,["onClick","label"])]),(0,l.Wm)("div",ce,[(0,l.Wm)(m,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),placeholder:e.$t("navigation.search"),onUpdate:s.fetchPluginsList},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search"})])),_:1},8,["modelValue","placeholder","onUpdate"])])])])),_:1}),(0,l.Wm)(d,{class:e.$q.platform.is.mobile?"q-px-none":""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{bordered:"",padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{spaced:"",inset:""}),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.plugins,((e,t)=>((0,l.wg)(),(0,l.j4)("div",{key:t},[(0,l.wy)((0,l.Wm)(f,{clickable:"",onClick:t=>s.selectPlugin(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{src:e.icon},null,8,["src"])])),_:2},1024),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,l.Wm)(y,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),[[q]]),(0,l.Wm)(p,{spaced:"",inset:""})])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1},8,["style"]),[[v,s.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var ue=i(1626);const me={name:"PluginSelectorDialog",props:{dialogHeader:{type:String,default:" --- header --- "},hidePlugins:{type:Array}},emits:["ok","hide","path"],methods:{show(){this.$refs.pluginSelectorDialogRef.show(),this.fetchPluginsList()},hide(){this.$refs.pluginSelectorDialogRef.hide()},onDialogHide(){this.$emit("ok",{selectedPlugin:this.currentPlugin}),this.$emit("hide")},fetchPluginsList:function(){let e={start:0,length:1e3,search_value:this.filter,order_by:"name",order_direction:"asc"};T()({method:"post",url:(0,j.J4)("v2","plugins/installed"),data:e}).then((e=>{let t=e.data.results,i=[];for(let l=0;l<t.length;l++)this.hidePlugins.indexOf(t[l].plugin_id)>-1||(i[i.length]={plugin_id:t[l].plugin_id,name:t[l].name,author:t[l].author,description:t[l].description,version:t[l].version,icon:t[l].icon,tags:t[l].tags,has_config:t[l].has_config});this.plugins=i}))},selectPlugin(e){this.currentPlugin=e,this.hide()},openPluginInstaller(){this.$q.dialog({component:ue.Z,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{this.fetchPluginsList()}))}},watch:{initialPath(e){e.length>0&&(this.currentPlugin=this.initialPath)},filter(e){this.fetchPluginsList()}},data:function(){return{maximizedToggle:!0,currentPlugin:(0,x.iH)(null),plugins:(0,x.iH)([]),filter:(0,x.iH)("")}}};var pe=i(6778),ge=i(151),he=i(5589),ye=i(2165),fe=i(8870),be=i(4842),we=i(4554),_e=i(7011),ke=i(5869),qe=i(3414),ve=i(2035),We=i(4027),Se=i(2350),$e=i(8020),Pe=i(677),xe=i(6489),Ce=i(7518),Le=i.n(Ce);me.render=de;const Qe=me;Le()(me,"components",{QDialog:pe.Z,QCard:ge.Z,QCardSection:he.Z,QBtn:ye.Z,QTooltip:fe.Z,QInput:be.Z,QIcon:we.Z,QList:_e.Z,QSeparator:ke.Z,QItem:qe.Z,QItemSection:ve.Z,QImg:We.Z,QItemLabel:Se.Z}),Le()(me,"directives",{TouchSwipe:$e.Z,ClosePopup:Pe.Z,Ripple:xe.Z});const Ze={class:"q-gutter-sm"},Te={class:"row"},je={class:"text-weight-medium q-ml-sm"},Ie={class:"text-weight-medium"};function He(e,t,i,o,a,s){const r=(0,l.up)("q-tooltip"),c=(0,l.up)("q-icon"),d=(0,l.up)("q-avatar"),u=(0,l.up)("q-item-section"),m=(0,l.up)("q-separator"),p=(0,l.up)("q-skeleton"),g=(0,l.up)("q-img"),h=(0,l.up)("q-item-label"),y=(0,l.up)("q-item"),f=(0,l.up)("draggable"),b=(0,l.up)("q-list"),w=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),k=(0,l.up)("q-expansion-item");return(0,l.wg)(),(0,l.j4)("div",Ze,[(0,l.Wm)(b,{style:{width:"100%"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.pluginTypes,(t=>((0,l.wg)(),(0,l.j4)(k,(0,l.dG)({key:t.type},t,{group:"pluginTypes",icon:"list_alt",label:e.$t(t.labelCode).length<50?e.$t(t.labelCode):e.$t(t.labelCode).substring(0,48)+"..",caption:e.$t(t.labelCode+"Caption")!==t.labelCode+"Caption"?e.$t(t.labelCode+"Caption"):"","caption-lines":"4",class:"text-h8 text-primary"}),{default:(0,l.w5)((()=>[(0,l.Wm)(_,{inline:"",style:{},class:"q-ma-lg-xs q-pa-lg-sm q-pa-sm-none"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",Te,[(0,l.Wm)(w,{class:"col justify-center full-height full-width text-center q-px-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{bordered:"",class:"rounded-borders q-pl-none",style:{}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,(0,l.dG)({class:"library-plugin-flow-group","item-key":"order",tag:"transition-group","component-data":{tag:"ul",name:"flip-list",type:"transition"},modelValue:e.pluginFlowByType[t.type],"onUpdate:modelValue":i=>e.pluginFlowByType[t.type]=i},s.dragOptions,{onEnd:e=>s.savePluginFlow(t.type)}),{item:(0,l.w5)((({element:t,index:i})=>[(0,l.Wm)(y,{key:i,class:"q-px-none rounded-borders","active-class":"library-plugin-flow-item"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{avatar:"",class:"q-px-sm q-mx-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"drag_handle",class:"",style:{"max-width":"30px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.move")),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(m,{inset:"",vertical:"",class:"q-mr-sm"}),(0,l.Wm)(u,{top:"",class:"q-mx-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{lines:"1",class:"text-left"},{default:(0,l.w5)((()=>[t.icon?((0,l.wg)(),(0,l.j4)(d,{key:1,rounded:"",size:"35px"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{src:t.icon,class:"",style:{"max-width":"30px"}},null,8,["src"])])),_:2},1024)):((0,l.wg)(),(0,l.j4)(p,{key:0,width:"35px",height:"35px"})),(0,l.Wm)("span",je,(0,n.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(h,{caption:"",lines:"1",class:"text-left q-ml-sm"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.description),1)])),_:2},1024),(0,l.Wm)(r,{anchor:"center middle",self:"center middle",class:"bg-white text-primary lt-sm"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.name),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(m,{inset:"",vertical:"",class:"gt-xs q-mx-sm"}),(0,l.Wm)(u,{side:"",class:"gt-xs q-px-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{lines:"1",class:"text-left"},{default:(0,l.w5)((()=>[(0,l.Wm)("span",Ie,(0,n.zw)(i+1),1),(0,l.Wm)(r,{anchor:"center right",self:"center left",class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.position")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1040,["modelValue","onUpdate:modelValue","onEnd"])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])),_:2},1040,["label","caption"])))),128))])),_:1})])}i(7280);var De=i(470),ze=i.n(De);const Fe={name:"LibraryConfigurePluginFlowList",components:{draggable:ze()},props:{libraryId:{type:Number,required:!1}},methods:{fetchPluginTypes:function(){T()({method:"get",url:(0,j.J4)("v2","plugins/flow/types")}).then((e=>{let t=e.data.results,i=[];for(let l=0;l<t.length;l++){let e=t[l].split("_").map(((e,t)=>0===t?e:e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");i[i.length]={type:t[l],labelCode:"components.plugins.types."+e}}this.pluginTypes=i,this.fetchPluginFlow()}))},fetchPluginFlow:function(){for(let e=0;e<this.pluginTypes.length;e++){let t={plugin_type:this.pluginTypes[e].type,library_id:this.libraryId};T()({method:"post",url:(0,j.J4)("v2","plugins/flow"),data:t}).then((t=>{this.pluginFlowByType[this.pluginTypes[e].type]=t.data.results}))}},savePluginFlow:function(e){let t={plugin_type:e,plugin_flow:this.pluginFlowByType[e],library_id:this.libraryId};T()({method:"post",url:(0,j.J4)("v2","plugins/flow/save"),data:t}).then((e=>{})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("components.plugins.errorSavingFlow"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},movePluginInFlow:function(e,t,i,l){let n,o=this.pluginFlowByType[e].slice();if("up"===l){if(0===t)return void console.debug("Cannot move up - already at the top");n=t-1}if("down"===l&&(n=t+1,n===o.length))return void console.debug("Cannot move down - already at the bottom");let a=o[t];o.splice(t,1),o.splice(n,0,a),this.pluginFlowByType[e]=o,this.savePluginFlow(e)}},created(){this.fetchPluginTypes()},data:function(){return{options:{dropzoneSelector:".q-list",draggableSelector:".q-item"},pluginTypes:(0,x.iH)([]),pluginFlowByType:(0,x.iH)({}),files:(0,x.iH)([])}},computed:{dragOptions(){return{animation:100,group:"pluginFlow",disabled:!1,ghostClass:"ghost",direction:"vertical",delay:200,delayOnTouchOnly:!0}}},setup(){return{}}};var Ue=i(4615),Ve=i(5096),Oe=i(4103);Fe.render=He;const Be=Fe;Le()(Fe,"components",{QList:_e.Z,QExpansionItem:Ue.Z,QCard:ge.Z,QCardSection:he.Z,QItem:qe.Z,QItemSection:ve.Z,QAvatar:Ve.Z,QIcon:we.Z,QTooltip:fe.Z,QSeparator:ke.Z,QSkeleton:Oe.ZP,QImg:We.Z,QItemLabel:Se.Z});const Je={class:"row items-center no-wrap"},Re={key:0,class:"col"},Ne={class:"col"},Ke={class:"text-h6 text-blue-10"},Me={key:1,class:"col-auto"},Ae={key:0},Ee={class:"q-mt-md float-right"};function Ye(e,t,i,o,a,s){const r=(0,l.up)("q-btn"),c=(0,l.up)("q-tooltip"),d=(0,l.up)("q-card-section"),u=(0,l.up)("q-input"),m=(0,l.up)("q-card"),p=(0,l.up)("q-dialog"),g=(0,l.Q2)("close-popup"),h=(0,l.Q2)("touch-swipe");return(0,l.wg)(),(0,l.j4)(p,{ref:"jsonDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"jump-left","transition-hide":"jump-right","full-height":"",onHide:s.onDialogHide},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(m,{style:[e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"700px"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-card-head"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",Je,[e.$q.platform.is.mobile?((0,l.wg)(),(0,l.j4)("div",Re,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},null,512),[[g]])])):(0,l.kq)("",!0),(0,l.Wm)("div",Ne,[(0,l.Wm)("div",Ke,(0,n.zw)(i.dialogHeader),1)]),e.$q.platform.is.mobile?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("div",Me,[(0,l.wy)((0,l.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512),[[g]])]))])])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{flat:"",bordered:"",class:"q-pa-sm",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"q-pt-none"},{default:(0,l.w5)((()=>["export"===i.mode?((0,l.wg)(),(0,l.j4)("pre",Ae,(0,n.zw)(i.jsonData),1)):((0,l.wg)(),(0,l.j4)(u,{key:1,modelValue:e.importString,"onUpdate:modelValue":t[1]||(t[1]=t=>e.importString=t),rows:"30",type:"textarea"},null,8,["modelValue"]))])),_:1})])),_:1})])),_:1}),(0,l.Wm)(d,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",Ee,["export"===i.mode?((0,l.wg)(),(0,l.j4)(r,{key:0,label:e.$t("navigation.copy"),color:"secondary",onClick:s.copyJson},null,8,["label","onClick"])):((0,l.wg)(),(0,l.j4)(r,{key:1,label:e.$t("navigation.submit"),color:"secondary",onClick:s.hide},null,8,["label","onClick"]))])])),_:1})])),_:1},8,["style"]),[[h,s.hide,void 0,{touch:!0,left:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var Ge=i(1914);const Xe={props:{dialogHeader:{type:String,default:" --- header --- ",required:!0},jsonData:{type:String,default:" --- jsonData --- ",required:!0},mode:{type:String,default:"export",required:!0}},emits:["ok","hide"],methods:{show(){this.$refs.jsonDialogRef.show()},hide(){this.$refs.jsonDialogRef.hide()},onDialogHide(){this.$emit("ok",{importString:this.importString}),this.$emit("hide")},copyJson(){(0,Ge.Z)(this.jsonData).then((()=>{this.$q.notify({color:"secondary",position:"top",message:this.$t("notifications.copied"),timeout:200})})).catch((()=>{}))}},data:function(){return{maximizedToggle:!0,importString:(0,x.iH)(null)}}};Xe.render=Ye;const et=Xe;Le()(Xe,"components",{QDialog:pe.Z,QCard:ge.Z,QCardSection:he.Z,QBtn:ye.Z,QTooltip:fe.Z,QInput:be.Z}),Le()(Xe,"directives",{TouchSwipe:$e.Z,ClosePopup:Pe.Z});var tt=i(6249);const it={name:"LibraryConfigureDialog",components:{LibraryConfigurePluginFlowList:Be,PluginInfo:te.Z},props:{dialogHeader:{type:String,default:" --- header --- "},libraryId:{type:Number,default:0}},emits:["ok","hide","path"],methods:{show(){this.$refs.libraryConfigureDialogRef.show(),this.currentID=this.libraryId,this.fetchLibraryConfig()},hide(){this.$refs.libraryConfigureDialogRef.hide()},onDialogHide(){this.$emit("ok",{}),this.$emit("hide")},beforeDialogHide(){this.saveLibraryConfig()},fetchLibraryConfig:function(){let e={id:this.currentID};T()({method:"post",url:(0,j.J4)("v2","settings/library/read"),data:e}).then((e=>{let t=e.data.library_config;this.name=t.name,this.path=t.path,this.locked=t.locked,this.enableScanner=t.enable_scanner,this.enableInotify=t.enable_inotify,this.enabledPlugins=e.data.plugins.enabled_plugins}))},saveLibraryConfig:function(){let e={library_config:{id:this.currentID,name:this.name,path:this.path,locked:this.locked,enable_scanner:this.enableScanner,enable_inotify:this.enableInotify},plugins:{enabled_plugins:this.enabledPlugins}};T()({method:"post",url:(0,j.J4)("v2","settings/library/write"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.componentKey+=1})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},updateLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:Q.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.path,listType:"directories"}}).onOk((e=>{"undefined"!==typeof e.selectedPath&&null!==e.selectedPath&&(this.path=e.selectedPath)})).onDismiss((()=>{}))},selectPluginFromList:function(){let e=[];for(let t=0;t<this.enabledPlugins.length;t++)e[e.length]=this.enabledPlugins[t].plugin_id;this.$q.dialog({component:Qe,componentProps:{dialogHeader:this.$t("headers.selectPlugin"),hidePlugins:e}}).onOk((e=>{if("undefined"!==typeof e.selectedPlugin&&null!==e.selectedPlugin){let t=this.enabledPlugins;t.push(e.selectedPlugin),t.sort(((e,t)=>e.name.localeCompare(t.name))),this.enabledPlugins=t,this.saveLibraryConfig()}})).onDismiss((()=>{}))},removePluginFromList:function(e){let t=[];for(let i=0;i<this.enabledPlugins.length;i++){let l=this.enabledPlugins[i];i!==e&&(t[t.length]=l)}this.enabledPlugins=t,this.saveLibraryConfig()},closePluginInfo:function(){this.showPluginSettings=""},exportPluginConfig:function(){let e={id:this.currentID};T()({method:"post",url:(0,j.J4)("v2","settings/library/export"),data:e}).then((e=>{this.$q.dialog({component:et,componentProps:{dialogHeader:this.$t("components.settings.library.exportLibraryConfig"),jsonData:JSON.stringify(e.data,null,2),mode:"export"}}).onDismiss((()=>{}))})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},importData:function(e,t){let i=JSON.parse(e);i.library_id=this.currentID,t?this.showLoading=!1:(this.showLoading=!0,tt.Z.show({message:this.$t("components.settings.library.importPluginConfigMessage"),messageColor:"transparent"})),setTimeout((()=>{this.showLoading&&tt.Z.show({message:this.$t("components.settings.library.importPluginConfigMessage"),messageColor:"white"})}),1e3),T()({method:"post",url:(0,j.J4)("v2","settings/library/import"),data:i}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.showLoading=!1,tt.Z.hide(),this.componentKey+=1,this.fetchLibraryConfig()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]}),this.showLoading=!1,tt.Z.hide()}))},importPluginConfig:function(){console.log("importPluginConfig"),this.$q.dialog({component:et,componentProps:{dialogHeader:this.$t("components.settings.library.importLibraryConfig"),jsonData:"",mode:"import"}}).onOk((e=>{"undefined"!==typeof e.importString&&null!==e.importString&&this.importData(e.importString)})).onDismiss((()=>{}))},cloneLibrary:function(){let e={id:this.currentID};T()({method:"post",url:(0,j.J4)("v2","settings/library/export"),data:e}).then((e=>{let t=e.data,i=(Math.random()+1).toString(36).substring(7),l=this.name+" ("+this.$t("navigation.copy")+" - "+i+")";t.library_config={name:l,path:this.path,enable_scanner:this.enableScanner,enable_inotify:this.enableInotify};let n=JSON.stringify(t,null,2);this.currentID=0,this.importData(n,!0),this.currentID=this.libraryId,this.hide()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},watch:{libraryId(e){e.length>0&&(this.currentID=this.libraryId)}},data:function(){return{maximizedToggle:!0,showPluginSettings:(0,x.iH)(""),currentID:(0,x.iH)(null),name:(0,x.iH)(""),path:(0,x.iH)(""),locked:(0,x.iH)(!1),enableScanner:(0,x.iH)(!1),enableInotify:(0,x.iH)(!1),enabledPlugins:(0,x.iH)([]),componentKey:1,showLoading:(0,x.iH)(!1)}}};var lt=i(8886),nt=i(846),ot=i(2025);it.render=ee;const at=it;Le()(it,"components",{QDialog:pe.Z,QCard:ge.Z,QCardSection:he.Z,QBtn:ye.Z,QTooltip:fe.Z,QSkeleton:Oe.ZP,QInput:be.Z,QIcon:we.Z,QItem:qe.Z,QItemSection:ve.Z,QItemLabel:Se.Z,QToggle:lt.Z,QSeparator:ke.Z,QList:_e.Z,QImg:We.Z,QBar:nt.Z,QSpace:ot.Z}),Le()(it,"directives",{TouchSwipe:$e.Z,ClosePopup:Pe.Z});const st={name:"SettingsLibrary",setup(){(0,C.Z)();const{t:e}=(0,L.QT)();let t=null,i=(0,P.A)(e);function n(){t=i.init()}function o(){i.close()}(0,l.bv)((()=>{n()})),(0,l.Ah)((()=>{o()}))},data(){return{libraryPath:(0,x.iH)(null),libraryPaths:(0,x.iH)(null),newLibraryPath:(0,x.iH)(!1),enableLibraryScanner:(0,x.iH)(null),libraryScanSchedule:(0,x.iH)(null),libraryScanFollowSymlinks:(0,x.iH)(null),concurrentFileTesters:(0,x.iH)(null),runLibraryScanOnStart:(0,x.iH)(null),enableLibraryFileMonitor:(0,x.iH)(null),clearPendingTasksOnStart:(0,x.iH)(null)}},methods:{addNewLibraryWithDirectoryBrowser:function(){this.$q.dialog({component:Q.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:this.libraryPath,listType:"directories"}}).onOk((e=>{if("undefined"!==typeof e.selectedPath&&null!==e.selectedPath){let t=(Math.random()+1).toString(36).substring(7),i=this.$t("components.settings.library.newLibrary")+" ("+t+")",l={library_config:{name:i,path:e.selectedPath}};T()({method:"post",url:(0,j.J4)("v2","settings/library/write"),data:l}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchLibraryPathsList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}})).onDismiss((()=>{}))},deleteLibrary:function(e){let t;for(let i=0;i<this.libraryPaths.length;i++)if(i===e){t=this.libraryPaths[i].id;break}1!==t?this.$q.dialog({title:this.$t("headers.confirm"),message:this.$t("components.settings.library.confirmRemove"),cancel:this.$t("navigation.cancel"),ok:this.$t("navigation.yes"),persistent:!0}).onOk((()=>{let e={id:t};T()({method:"delete",url:(0,j.J4)("v2","settings/library/remove"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200}),this.fetchLibraryPathsList()})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))})):this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.cannotRemoveDefaultLibrary"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})},fetchSettings:function(){T()({method:"get",url:(0,j.J4)("v2","settings/read")}).then((e=>{this.libraryPath=e.data.settings.library_path,this.enableLibraryScanner=e.data.settings.enable_library_scanner,this.libraryScanSchedule=e.data.settings.schedule_full_scan_minutes,this.libraryScanFollowSymlinks=e.data.settings.follow_symlinks,this.concurrentFileTesters=e.data.settings.concurrent_file_testers,this.runLibraryScanOnStart=e.data.settings.run_full_scan_on_start,this.enableLibraryFileMonitor=e.data.settings.enable_inotify,this.clearPendingTasksOnStart=e.data.settings.clear_pending_tasks_on_restart})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},save:function(){let e={settings:{library_path:this.libraryPath,enable_library_scanner:this.enableLibraryScanner,schedule_full_scan_minutes:this.libraryScanSchedule,follow_symlinks:this.libraryScanFollowSymlinks,concurrent_file_testers:this.concurrentFileTesters,run_full_scan_on_start:this.runLibraryScanOnStart,enable_inotify:this.enableLibraryFileMonitor,clear_pending_tasks_on_restart:this.clearPendingTasksOnStart}};T()({method:"post",url:(0,j.J4)("v2","settings/write"),data:e}).then((e=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchLibraryPathsList:function(){T()({method:"get",url:(0,j.J4)("v2","settings/libraries")}).then((e=>{let t=[];for(let i=0;i<e.data.libraries.length;i++){let l=e.data.libraries[i];t[t.length]={id:l.id,name:l.name,path:l.path,locked:l.locked}}this.libraryPaths=t})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchLibraryList"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},configureLibraryPath:function(e){let t=this.libraryPaths[e];this.$q.dialog({component:at,componentProps:{dialogHeader:this.$t("headers.configureLibrary"),libraryId:t.id}}).onOk((e=>{})).onDismiss((()=>{this.fetchSettings(),this.fetchLibraryPathsList()}))}},created(){this.fetchSettings(),this.fetchLibraryPathsList()}};var rt=i(4379),ct=i(5269),dt=i(2064);st.render=$;const ut=st;Le()(st,"components",{QPage:rt.Z,QForm:ct.Z,QSkeleton:Oe.ZP,QList:_e.Z,QItem:qe.Z,QItemSection:ve.Z,QAvatar:Ve.Z,QItemLabel:Se.Z,QTooltip:fe.Z,QSeparator:ke.Z,QBtn:ye.Z,QBar:nt.Z,QSpace:ot.Z,QToggle:lt.Z,QInput:be.Z,QSlider:dt.Z,QCard:ge.Z})}}]);