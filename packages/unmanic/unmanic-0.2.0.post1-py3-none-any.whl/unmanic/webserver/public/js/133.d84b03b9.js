(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[133],{133:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>ot});var a=n(3673),o=n(2323),s=n(1561),l=n.n(s);const i={class:"q-pa-none"},m={class:"row"},c={class:"col q-ma-sm"},r={class:"row"},u={class:"col-sm-6 col-xs-12"},d={class:"q-mb-none q-mt-sm"},p={class:"q-gutter-sm"},g={class:"q-pa-md",style:{"max-width":"350px"}},f={class:"col-sm-6 col-xs-12"},w={class:"q-mb-none q-mt-sm"},W={class:"q-gutter-sm"},h={class:"q-pa-md",style:{"max-width":"350px"}},_={class:"q-mb-none q-mt-sm"},y={class:"q-gutter-sm"},b={class:"q-pa-md",style:{"max-width":"350px"}},v={class:"q-pa-md",style:{"max-width":"400px"}},k={class:"q-mb-none q-mt-sm"},q={class:"q-gutter-sm"},$={class:"row"},U={class:"col"},S={class:"row items-center"},z={class:"col-sm-6 col-xs-12"},x={class:"text-h6"},L={class:"text-subtitle2"},Q={class:"col-auto"};function R(t,e,n,s,R,P){const Z=(0,a.up)("q-skeleton"),C=(0,a.up)("q-img"),T=(0,a.up)("q-item-section"),E=(0,a.up)("q-item-label"),j=(0,a.up)("q-item"),V=(0,a.up)("q-separator"),H=(0,a.up)("q-icon"),I=(0,a.up)("q-list"),J=(0,a.up)("q-toggle"),O=(0,a.up)("q-btn"),A=(0,a.up)("q-card-section"),D=(0,a.up)("q-card"),N=(0,a.up)("q-page"),B=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(N,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)("div",i,[(0,a.Wm)("div",m,[(0,a.Wm)("div",c,[(0,a.Wm)("div",r,[(0,a.Wm)("div",u,[(0,a.Wm)("h5",d,(0,o.zw)(t.$t("components.settings.support.configuration")),1),(0,a.Wm)("div",p,[null===R.debugging?((0,a.wg)(),(0,a.j4)(Z,{key:0,type:"QToggle"})):(0,a.kq)("",!0),(0,a.Wm)("div",g,[(0,a.Wm)(I,{padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{src:l()})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.appVersion"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.appVersion),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(V,{spaced:"",inset:"item"}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fab fa-python"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.pythonVersion"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.pythonVersion),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(V,{spaced:"",inset:"item"}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"computer"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.platform"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.platform),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(V,{spaced:"",inset:"item"}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.configPath"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.configPath),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.logsPath"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.logsPath),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fas fa-folder"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.userdataPath"))+":",1)])),_:1}),(0,a.Wm)(E,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.userdataPath),1)])),_:1})])),_:1})])),_:1})])),_:1})])])]),(0,a.Wm)("div",f,[(0,a.Wm)("h5",w,(0,o.zw)(t.$t("components.settings.support.docs")),1),(0,a.Wm)("div",W,[null===R.debugging?((0,a.wg)(),(0,a.j4)(Z,{key:0,type:"QToggle"})):(0,a.kq)("",!0),(0,a.Wm)("div",h,[(0,a.Wm)(I,{dense:"",padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(j,{onClick:e[1]||(e[1]=t=>P.openExternalURL("/unmanic/swagger")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"article"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.apiSpec")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1},512),[[B]]),(0,a.wy)((0,a.Wm)(j,{onClick:e[2]||(e[2]=t=>P.openExternalURL("https://docs.unmanic.app/docs/")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"article"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.applicationDocumentation")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1},512),[[B]])])),_:1})])]),(0,a.Wm)("h5",_,(0,o.zw)(t.$t("components.settings.support.support")),1),(0,a.Wm)("div",y,[null===R.debugging?((0,a.wg)(),(0,a.j4)(Z,{key:0,type:"QToggle"})):(0,a.kq)("",!0),(0,a.Wm)("div",b,[(0,a.Wm)(I,{dense:"",padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(j,{onClick:e[3]||(e[3]=t=>P.openExternalURL("https://github.com/Unmanic/unmanic/issues")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fab fa-github"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.unmanicAppSourceRequests")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1},512),[[B]]),(0,a.wy)((0,a.Wm)(j,{onClick:e[4]||(e[4]=t=>P.openExternalURL("https://github.com/Unmanic/unmanic-frontend/issues")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fab fa-github"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.unmanicFrontendSourceRequests")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1},512),[[B]]),(0,a.wy)((0,a.Wm)(j,{onClick:e[5]||(e[5]=t=>P.openExternalURL("https://github.com/Unmanic/unmanic-plugins/issues")),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{color:"primary",name:"fab fa-github"})])),_:1}),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("components.settings.support.unmanicOfficialPluginRequests")),1)])),_:1}),(0,a.Wm)(E,{caption:""})])),_:1})])),_:1},512),[[B]])])),_:1})])])])]),(0,a.Wm)(V),(0,a.Wm)("div",v,[(0,a.Wm)("h5",k,(0,o.zw)(t.$t("components.settings.support.logs")),1),(0,a.Wm)("div",q,[null===R.debugging?((0,a.wg)(),(0,a.j4)(Z,{key:0,type:"QToggle"})):((0,a.wg)(),(0,a.j4)(J,{key:1,modelValue:R.debugging,"onUpdate:modelValue":[e[6]||(e[6]=t=>R.debugging=t),e[7]||(e[7]=t=>P.toggleDebugging(R.debugging))],label:t.$t("components.settings.support.enableDebugging")},null,8,["modelValue","label"]))])])])]),(0,a.Wm)("div",$,[(0,a.Wm)("div",U,[(0,a.Wm)(D,{flat:"",bordered:"",style:{width:"2000px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)("div",S,[(0,a.Wm)("div",z,[(0,a.Wm)("div",x,(0,o.zw)(t.$t("components.settings.support.currentSystemLogs"))+":",1),(0,a.Wm)("div",L,(0,o.zw)(s.logsPath),1)]),(0,a.Wm)("div",Q,[(0,a.Wm)(O,{onClick:P.downloadLogs,color:"secondary","icon-right":"file_download",label:t.$t("components.settings.support.downloadSystemLogs")},null,8,["onClick","label"])])])])),_:1}),(0,a.Wm)(V),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[0===s.currentLog.length?((0,a.wg)(),(0,a.j4)(Z,{key:0,style:{width:"100%"},type:"text"})):((0,a.wg)(),(0,a.j4)("div",{key:1,class:[t.$q.platform.is.mobile?"":"q-px-lg","system-log-content"]},[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(s.currentLog,((t,e)=>((0,a.wg)(),(0,a.j4)("p",{key:e,innerHTML:t},null,8,["innerHTML"])))),128))],2))])),_:1})])),_:1})])])])])),_:1})}n(7280),n(5363),n(71),n(7965);var P=n(4190),Z=n(1959),C=n(8825),T=n(5948),E=n(52),j=n.n(E),V=n(7689),H=n(3437);const I={name:"SettingsLibrary",setup(){(0,C.Z)();const{t}=(0,T.QT)(),e=(0,Z.iH)([]),n=(0,Z.iH)(""),o=(0,Z.iH)(null),s=(0,Z.iH)(null),l=(0,Z.iH)(null),i=(0,Z.iH)(null),m=(0,Z.iH)(null);let c=null,r=null,u=(0,P.A)(t);function d(t){e.value=t.system_logs;let a=[];for(let e=0;e<t.system_logs.length;e++){let n=t.system_logs[e];n=n.replace(/\/[\/|.|\s|\w|-]+/,"<span style='color:var(--q-secondary);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:DEBUG:[\w(\.|\-)]+/,"<span style='color:var(--q-primary);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:WARNING:[\w(\.|\-)]+/,"<span style='color:var(--q-warning);'>$&</span>"),n=n.replace(/[\d(\-|T|\:)]+\:ERROR:[\w(\.|\-)]+/,"<span style='color:var(--q-negative);'>$&</span>"),a[e]=n}e.value=a,n.value=t.logs_path}function p(){c=u.init(),r=u.serverId,u.addEventListener("open","start_system_logs",(function(t){c.send(JSON.stringify({command:"start_system_logs",params:{}}))})),u.addEventListener("message","handle_system_logs",(function(t){if("string"===typeof t.data){let e=JSON.parse(t.data);if(e.success)switch(e.type){case"system_logs":d(e.data);break}else console.error("WebSocket Error: Received contained errors - "+t.data)}else console.error("WebSocket Error: Received data was not JSON - "+t.data)}))}function g(){u.close()}return(0,a.bv)((()=>{p()})),(0,a.Ah)((()=>{g()})),{currentLog:e,logsPath:n,appVersion:o,pythonVersion:s,platform:l,configPath:i,userdataPath:m}},data(){return{debugging:(0,Z.iH)(null)}},methods:{openExternalURL:function(t){(0,H.Z)(t)},fetchSettings:function(){j()({method:"get",url:(0,V.J4)("v2","settings/read")}).then((t=>{this.debugging=t.data.settings.debugging,this.configPath=t.data.settings.config_path,this.logsPath=t.data.settings.log_path,this.userdataPath=t.data.settings.userdata_path})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},fetchSystemConfig:function(){V.ZP.getUnmanicVersion().then((t=>{this.appVersion=t})),j()({method:"get",url:(0,V.J4)("v2","settings/configuration")}).then((t=>{let e=t.data.configuration;if(this.pythonVersion=e.python,"undefined"!==typeof e.platform&&e.platform.length>0){let t=e.platform.join(" ");console.log(t),this.platform=t}})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSystemConfig"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},toggleDebugging(t){let e={settings:{debugging:t}};j()({method:"post",url:(0,V.J4)("v2","settings/write"),data:e}).then((t=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},downloadLogs(){j()({method:"get",url:(0,V.J4)("v2","docs/logs/zip"),responseType:"blob"}).then((t=>{const e=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=e,n.setAttribute("download","UnmanicLogs.zip"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},created(){this.fetchSettings(),this.fetchSystemConfig()}};var J=n(4379),O=n(4103),A=n(7011),D=n(3414),N=n(2035),B=n(4027),F=n(2350),G=n(5869),M=n(4554),K=n(8886),Y=n(151),X=n(5589),tt=n(2165),et=n(6489),nt=n(7518),at=n.n(nt);I.render=R;const ot=I;at()(I,"components",{QPage:J.Z,QSkeleton:O.ZP,QList:A.Z,QItem:D.Z,QItemSection:N.Z,QImg:B.Z,QItemLabel:F.Z,QSeparator:G.Z,QIcon:M.Z,QToggle:K.Z,QCard:Y.Z,QCardSection:X.Z,QBtn:tt.Z}),at()(I,"directives",{Ripple:et.Z})}}]);