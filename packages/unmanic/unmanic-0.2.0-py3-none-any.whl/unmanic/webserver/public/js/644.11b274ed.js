(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[644],{5175:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>ae});var n=t(3673),i=t(2323);const a={class:"q-pa-none"},o={class:"row"},s={class:"col q-ma-sm"},u={key:0},r={class:"row"},c={class:"col-6 text-center"},d={class:"col-6 text-center"};function g(e,l,t,g,m,p){const f=(0,n.up)("PluginsInstalledTable"),w=(0,n.up)("q-separator"),v=(0,n.up)("q-btn"),h=(0,n.up)("q-card"),W=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(W,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",a,[(0,n.Wm)("div",o,[(0,n.Wm)("div",s,[(0,n.Wm)(f)])]),e.$q.platform.is.mobile?((0,n.wg)(),(0,n.j4)("div",u,[(0,n.Wm)(w,{class:"q-mb-lg"}),(0,n.Wm)("div",r,[(0,n.Wm)("div",c,[(0,n.Wm)(h,{flat:"",bordered:"",onClick:l[1]||(l[1]=l=>e.$router.push("/ui/settings-workers")),class:"q-ma-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{icon:"navigate_before",flat:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("navigation.workers")),1)])),_:1})])),_:1})]),(0,n.Wm)("div",d,[(0,n.Wm)(h,{flat:"",bordered:"",onClick:l[2]||(l[2]=l=>e.$router.push("/ui/settings-link")),class:"q-ma-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{"icon-right":"navigate_next",flat:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("navigation.link")),1)])),_:1})])),_:1})])])])):(0,n.kq)("",!0)])])),_:1})}t(246);const m={class:"row q-gutter-xs q-mt-xs justify-between"},p={class:"col-auto"},f={class:"col-auto",style:{"max-width":"200px"}},w={class:"q-gutter-sm"},v={class:"row"},h=(0,n.Wm)("div",{class:"col-6 text-right"},[(0,n.Wm)("span",{class:"text-weight-medium"},"Author")],-1),W={class:"col-6 q-px-sm"},_={class:"text-grey-8"},b={class:"row"},k=(0,n.Wm)("div",{class:"col-6 text-right"},[(0,n.Wm)("span",{class:"text-weight-medium"},"Version")],-1),q={class:"col-6 q-px-sm"},P={class:"text-grey-8"},x={class:"text-grey-8 q-gutter-xs q-mr-lg"},y={class:"text-grey-8 q-gutter-xs"};function C(e,l,t,a,o,s){const u=(0,n.up)("q-btn"),r=(0,n.up)("q-icon"),c=(0,n.up)("q-input"),d=(0,n.up)("q-card-section"),g=(0,n.up)("q-img"),C=(0,n.up)("q-item-section"),I=(0,n.up)("q-item-label"),Z=(0,n.up)("q-tooltip"),$=(0,n.up)("q-separator"),z=(0,n.up)("q-item"),Q=(0,n.up)("q-list"),S=(0,n.up)("q-btn-dropdown"),H=(0,n.up)("q-card"),U=(0,n.up)("PluginInfo"),j=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(n.HY,null,[(0,n.Wm)(H,{flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:e.$q.platform.is.mobile?"q-px-none":""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",m,[(0,n.Wm)("div",p,[(0,n.Wm)(u,{onClick:a.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPlugins")},null,8,["onClick","label"])]),(0,n.Wm)("div",f,[(0,n.Wm)(c,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:a.filter,"onUpdate:modelValue":l[1]||(l[1]=e=>a.filter=e),placeholder:e.$t("navigation.search")},{append:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1},8,["class"]),(0,n.Wm)(d,{class:e.$q.platform.is.mobile?"q-px-none":""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",w,[(0,n.Wm)(Q,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(a.listedPlugins,((l,t)=>((0,n.wg)(),(0,n.j4)("div",{key:t},[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{src:l.icon},null,8,["src"])])),_:2},1024),(0,n.Wm)(C,{top:"",class:""},{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(l.name),1)])),_:2},1024),(0,n.Wm)(I,{caption:"",lines:"3"},{default:(0,n.w5)((()=>[(0,n.Wm)("span",{innerHTML:l.description},null,8,["innerHTML"])])),_:2},1024)])),_:2},1024),(0,n.Wm)(C,{top:"",class:"gt-xs col-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{lines:"1"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",v,[h,(0,n.Wm)("div",W,[(0,n.Wm)("span",_,(0,i.zw)(l.author),1)])])])),_:2},1024),(0,n.Wm)(I,{lines:"1"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",b,[k,(0,n.Wm)("div",q,[(0,n.Wm)("span",P,(0,i.zw)(l.version),1)])])])),_:2},1024)])),_:2},1024),(0,n.Wm)(C,{center:"",side:""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",x,[l.status.update_available?((0,n.wg)(),(0,n.j4)(u,{key:0,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"warning",icon:"update",onClick:e=>a.updateSinglePlugin(l.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.updateAvailable")),1)])),_:1})])),_:2},1032,["onClick"])):((0,n.wg)(),(0,n.j4)(u,{key:1,disable:"",flat:"",dense:"",round:"",class:"gt-xs no-pointer-events",size:"12px",color:"positive",icon:"download_done"},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.upToDate")),1)])),_:1})])),_:1}))])])),_:2},1024),(0,n.Wm)($,{inset:"",vertical:"",class:"q-mx-sm"}),(0,n.Wm)(C,{center:"",side:""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",y,[(0,n.Wm)(S,{flat:"",dense:"",rounded:"",class:"lt-sm",size:"12px","no-icon-animation":"","dropdown-icon":"more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,null,{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(z,{clickable:"",onClick:e=>a.openPluginInfo(l.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"secondary",name:"info"})])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[j]]),l.has_config?(0,n.wy)(((0,n.wg)(),(0,n.j4)(z,{key:0,clickable:"",onClick:e=>a.openPluginInfo(l.id,"settings")},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"grey-8",name:"tune"})])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[j]]):(0,n.kq)("",!0),l.status.update_available?(0,n.wy)(((0,n.wg)(),(0,n.j4)(z,{key:1,clickable:"",onClick:e=>a.updateSinglePlugin(l.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"warning",name:"update"})])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.updatePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[j]]):(0,n.kq)("",!0),(0,n.wy)((0,n.Wm)(z,{clickable:"",onClick:e=>a.removeSinglePlugin(l.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{color:"negative",name:"delete"})])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[j]])])),_:2},1024)])),_:2},1024),(0,n.Wm)(u,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"secondary",icon:"info",onClick:e=>a.openPluginInfo(l.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(u,{disable:!l.has_config,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"grey-8",icon:"tune",onClick:e=>a.openPluginInfo(l.id,"settings")},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,n.Wm)(u,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"negative",icon:"delete",onClick:e=>a.removeSinglePlugin(l.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])])),_:1},8,["class"])])),_:1}),(0,n.Wm)(U,{showPluginInfo:a.showPluginInfo,showPluginSettings:a.showPluginSettings,onHide:a.closePluginInfo},null,8,["showPluginInfo","showPluginSettings","onHide"])],64)}t(7280),t(71);var I=t(1959),Z=t(7689),$=t(8825),z=t(52),Q=t.n(z),S=t(2295),H=t(9354),U=t(1626);const j=[{name:"icon",label:"",required:!0,align:"left",field:"icon",sortable:!1},{name:"name",label:"Plugin",required:!0,align:"left",field:"name",sortable:!0},{name:"description",label:"Description",required:!0,align:"left",field:"description",sortable:!0},{name:"tags",label:"Tags",required:!0,align:"left",field:"tags",sortable:!0},{name:"author",label:"Author",required:!0,align:"left",field:"author",sortable:!0},{name:"version",label:"Version",required:!0,align:"left",field:"version",sortable:!0},{name:"status",label:"Status",required:!0,align:"left",field:"status",sortable:!1}],A={components:{PluginInfo:S.Z},setup(){const e=(0,$.Z)(),l=(0,I.iH)([]),t=(0,I.iH)(""),i=(0,I.iH)(!1),a=(0,I.iH)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),o=(0,I.iH)([]),s=(0,I.iH)([]),u=(0,I.iH)(0);function r(){let e="";return 0!==o.value.length&&(e=`${o.value.length} record${o.value.length>1?"s":""} selected of ${l.value.length}`),e}function c(){if(0!==o.value.length){let l=[];for(let e=0;e<o.value.length;e++){let t=o.value[e];l[l.length]=t.id}let n={id_list:l};Q()({method:"post",url:(0,Z.J4)("v2","plugins/disable"),data:n}).then((e=>{w({pagination:a.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function d(l){let n={id_list:l};Q()({method:"post",url:(0,Z.J4)("v2","plugins/update"),data:n}).then((e=>{w({pagination:a.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function g(e){d([e])}function m(l){let n={id_list:l};Q()({method:"delete",url:(0,Z.J4)("v2","plugins/remove"),data:n}).then((e=>{w({pagination:a.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function p(e){m([e])}function f(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,H.nx)(e)}function w(t){const{page:n,rowsPerPage:o,sortBy:u,descending:r}=t.pagination,c=t.filter;i.value=!0;const d=0===o?a.value.rowsNumber:o,g=(n-1)*o;let m={start:g,length:d,search_value:c,order_by:u,order_direction:r?"desc":"asc"};Q()({method:"post",url:(0,Z.J4)("v2","plugins/installed"),data:m}).then((e=>{a.value.rowsNumber=e.data.recordsFiltered,s.value=[];for(let l=0;l<e.data.results.length;l++){let t=e.data.results[l];s.value[l]={id:t.id,plugin_id:t.plugin_id,icon:t.icon,name:t.name,description:f(t.description),tags:t.tags,author:t.author,version:t.version,status:t.status,has_config:t.has_config}}l.value.splice(0,l.value.length,...s.value),a.value.page=n,a.value.rowsPerPage=o,a.value.sortBy=u,a.value.descending=r,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const v=(0,I.iH)(""),h=(0,I.iH)("");function W(e,l){v.value="",h.value="";for(let t=0;t<s.value.length;t++){let n=s.value[t];n.id===e&&("settings"===l?h.value=n.plugin_id:v.value=n.plugin_id)}}function _(){v.value="",h.value=""}function b(){e.dialog({component:U.Z,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{w({pagination:a.value,filter:t.value})}))}return(0,n.bv)((()=>{w({pagination:a.value,filter:void 0})})),(0,n.YP)(t,((e,l)=>{w({pagination:a.value,filter:t.value})})),{selected:o,filter:t,loading:i,pagination:a,columns:j,rows:l,listedPlugins:s,itemOffset:u,getSelectedString:r,onRequest:w,disableSelected:c,updateSinglePlugin:g,removeSinglePlugin:p,openPluginInfo:W,showPluginInfo:v,showPluginSettings:h,closePluginInfo:_,openPluginInstaller:b}}};var T=t(151),B=t(5589),V=t(2165),D=t(4842),J=t(4554),L=t(7011),N=t(3414),Y=t(2035),M=t(4027),O=t(2350),F=t(8870),K=t(5869),R=t(2226),E=t(677),G=t(7518),X=t.n(G);A.render=C;const ee=A;X()(A,"components",{QCard:T.Z,QCardSection:B.Z,QBtn:V.Z,QInput:D.Z,QIcon:J.Z,QList:L.Z,QItem:N.Z,QItemSection:Y.Z,QImg:M.Z,QItemLabel:O.Z,QTooltip:F.Z,QSeparator:K.Z,QBtnDropdown:R.Z}),X()(A,"directives",{ClosePopup:E.Z});var le=t(4190),te=t(5948);const ne={components:{PluginsInstalledTable:ee},setup(){const{t:e}=(0,te.QT)();let l=null,t=(0,le.A)(e);function i(){l=t.init()}function a(){t.close()}(0,n.bv)((()=>{i()})),(0,n.Ah)((()=>{a()}))}};var ie=t(4379);ne.render=g;const ae=ne;X()(ne,"components",{QPage:ie.Z,QSeparator:K.Z,QCard:T.Z,QBtn:V.Z})}}]);