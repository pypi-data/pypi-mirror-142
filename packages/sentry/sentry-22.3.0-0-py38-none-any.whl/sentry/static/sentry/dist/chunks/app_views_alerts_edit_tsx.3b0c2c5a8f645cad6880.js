"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_edit_tsx"],{"./app/views/alerts/edit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/components/layouts/thirds.tsx"),o=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),d=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=s("./app/utils/teams.tsx"),h=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),m=s("./app/actionCreators/indicator.tsx"),g=s("./app/utils/analytics.tsx"),x=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),Z=s("./app/views/asyncView.tsx"),T=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends Z.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{router:e,project:t}=this.props,{orgId:s}=this.props.params;g.oF.endTransaction({name:"saveAlertRule"}),e.push({pathname:`/organizations/${s}/alerts/rules/`,query:{project:t.id}})}))}getDefaultState(){return{...super.getDefaultState(),actions:new Map}}getEndpoints(){const{orgId:e,ruleId:t}=this.props.params;return[["rule",`/organizations/${e}/alert-rules/${t}/`]]}onRequestSuccess(e){let{stateKey:t,data:s}=e;"rule"===t&&s.name&&this.props.onChangeTitle(s.name)}onLoadAllEndpointsSuccess(){const{rule:e}=this.state;null!=e&&e.errors&&((null==e?void 0:e.errors)||[]).map((e=>{let{detail:t}=e;return(0,m.Iw)(t,{append:!0})}))}renderBody(){const{ruleId:e}=this.props.params,{rule:t}=this.state;return(0,T.tZ)(x.Z,{...this.props,ruleId:e,rule:t,onSubmitSuccess:this.handleSubmitSuccess})}}const b=y;var j=s("./app/views/alerts/issueRuleEditor/index.tsx");class w extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{ruleName:""}),(0,r.Z)(this,"handleChangeTitle",(e=>{this.setState({ruleName:e})}))}componentDidMount(){const{organization:e,project:t}=this.props;(0,d.Z)("edit_alert_rule.viewed",{organization:e,project_id:t.id,alert_type:this.getAlertType()})}getTitle(){const{ruleName:e}=this.state;return`${e}`}getAlertType(){return location.pathname.includes("/alerts/metric-rules/")?"metric":"issue"}render(){const{hasMetricAlerts:e,location:t,organization:s,project:r,routes:i}=this.props,u=this.getAlertType();return(0,T.BX)(a.Fragment,{children:[(0,T.tZ)(l.Z,{title:this.getTitle(),orgSlug:s.slug,projectSlug:r.slug}),(0,T.tZ)(n.h4,{children:(0,T.BX)(n.oB,{children:[(0,T.tZ)(h.Z,{orgSlug:s.slug,title:(0,p.t)("Edit Alert Rule"),projectSlug:r.slug,routes:i,location:t}),(0,T.tZ)(n.Dx,{children:this.getTitle()})]})}),(0,T.tZ)(S,{children:(0,T.tZ)(n.or,{fullWidth:!0,children:(0,T.tZ)(c.Z,{provideUserTeams:!0,children:t=>{let{teams:s,initiallyLoaded:i}=t;return i?(0,T.BX)(a.Fragment,{children:[(!e||"issue"===u)&&(0,T.tZ)(j.Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))}),e&&"metric"===u&&(0,T.tZ)(b,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,T.tZ)(o.Z,{})}})})})]})}}w.displayName="ProjectAlertsEditor";const S=(0,i.Z)(n.uT,{target:"eqr07hw0"})("margin-bottom:-",(0,u.Z)(3),";*:not(img){max-width:1000px;}"),v=w}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_edit_tsx.82b6d34b09c4cb826c8afe5974ca355e.js.map