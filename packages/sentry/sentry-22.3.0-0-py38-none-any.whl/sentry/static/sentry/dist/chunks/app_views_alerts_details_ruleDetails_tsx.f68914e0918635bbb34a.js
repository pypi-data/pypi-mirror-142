"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_details_ruleDetails_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,r)=>{r.d(t,{Z:()=>d});var o=r("../node_modules/react/index.js"),n=r("./app/components/charts/series/lineSeries.tsx"),s=r("./app/components/charts/baseChart.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends o.Component{render(){const{series:e,stacked:t,colors:r,...o}=this.props;return(0,i.tZ)(s.Z,{...o,colors:r,series:e.map(((e,o)=>{let{seriesName:s,data:i,...a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({...e})}({stack:t?"area":void 0,name:s,data:i.map((e=>{let{name:t,value:r}=e;return[t,r]})),lineStyle:{color:null==r?void 0:r[o],opacity:1,width:.4},areaStyle:{color:null==r?void 0:r[o],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...a})}))})}}a.displayName="AreaChart";const d=a},"./app/components/charts/chartZoom.tsx":(e,t,r)=>{r.d(t,{Z:()=>g});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/react/index.js"),s=r("../node_modules/moment/moment.js"),i=r.n(s),a=r("../node_modules/query-string/index.js"),d=r("./app/actionCreators/pageFilters.tsx"),l=r("./app/components/charts/components/dataZoomInside.tsx"),c=r("./app/components/charts/components/toolBox.tsx"),p=r("./app/utils/callIfFunction.tsx"),u=r("./app/utils/dates.tsx");const h=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class m extends n.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:h(e.start),end:h(e.end)}})),(0,o.Z)(this,"setPeriod",(function(e){let{period:r,start:o,end:n}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:l,usePageDate:c}=t.props,m=h(o),g=h(n);s&&t.history.push(t.currentPeriod),(0,p.g)(l,{period:r,start:m,end:g}),t.zooming=()=>{if(c&&i){const e={...i.location.query,pageStart:o?(0,u.v5)(o):void 0,pageEnd:n?(0,u.v5)(n):void 0,pageStatsPeriod:null!=r?r:void 0};a.stringify(e)!==a.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,d.dR)({period:r,start:m?(0,u.hC)(m):m,end:g?(0,u.hC)(g):g},i);t.saveCurrentPeriod({period:r,start:o,end:n})}})),(0,o.Z)(this,"handleChartReady",(e=>{(0,p.g)(this.props.onChartReady,e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,p.g)(this.props.onRestore,e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const r=t.getModel(),{startValue:o,endValue:n}=r._payload.batch[0];if(null===o&&null===n){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(o),t=i().utc(n);this.setPeriod({period:null,start:e,end:t},!0)}(0,p.g)(this.props.onDataZoom,e,t)})),(0,o.Z)(this,"handleChartFinished",((e,t)=>{var r;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=null===(r=t._componentsViews)||void 0===r?void 0:r.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,p.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:r,disabled:o,children:n,xAxisIndex:s,router:i,onZoom:a,onRestore:d,onChartReady:p,onDataZoom:h,onFinished:m,...g}=this.props,Z=null!=e?e:void 0,y=t?(0,u.hC)(t):void 0,x=r?(0,u.hC)(r):void 0;return n(o?{utc:Z,start:y,end:x,...g}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:Z,start:y,end:x,dataZoom:(0,l.Z)({xAxisIndex:s}),showTimeInTooltip:!0,toolBox:(0,c.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...g})}}m.displayName="ChartZoom";const g=m},"./app/components/charts/components/dataZoomInside.tsx":(e,t,r)=>{r.d(t,{Z:()=>n}),r("../node_modules/echarts/lib/component/dataZoomInside.js");const o={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function n(e){return e&&Array.isArray(e)?e:[{...o,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,r)=>{function o(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function n(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:o(t),...e}}r.d(t,{Z:()=>n})},"./app/components/keyValueTable.tsx":(e,t,r)=>{r.d(t,{v:()=>d,G:()=>l});var o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),s=r("./app/styles/overflowEllipsis.tsx"),i=r("./app/styles/space.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=(0,o.Z)("dl",{target:"e13z4zle2"})({name:"u4s7v9",styles:"display:grid;grid-template-columns:50% 50%"}),l=e=>{let{keyName:t,value:r}=e;return(0,a.BX)(n.Fragment,{children:[(0,a.tZ)(p,{children:t}),(0,a.tZ)(u,{children:r})]})};l.displayName="KeyValueTableRow";const c=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,i.Z)(.5)} ${(0,i.Z)(1)};\nfont-weight: normal;\nline-height: inherit;\n${s.Z};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},p=(0,o.Z)("dt",{target:"e13z4zle1"})(c,";color:",(e=>e.theme.textColor),";"),u=(0,o.Z)("dd",{target:"e13z4zle0"})(c,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/views/alerts/details/ruleDetails.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ce});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/lodash/pick.js")),i=r.n(s),a=r("../node_modules/moment/moment.js"),d=r.n(a),l=r("./app/components/asyncComponent.tsx"),c=r("./app/components/breadcrumbs.tsx"),p=r("./app/components/button.tsx"),u=r("./app/components/buttonBar.tsx"),h=r("./app/components/featureBadge.tsx"),m=r("./app/components/layouts/thirds.tsx"),g=r("./app/components/loadingError.tsx"),Z=r("./app/components/loadingIndicator.tsx"),y=r("./app/components/organizations/pageFilters/container.tsx"),x=r("./app/components/organizations/pageFilters/parse.tsx"),v=r("./app/components/pageTimeRangeSelector.tsx"),f=r("./app/components/sentryDocumentTitle.tsx"),b=r("./app/constants/index.tsx"),z=r("./app/icons/index.tsx"),j=r("./app/locale.tsx"),C=r("./app/styles/space.tsx"),_=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),S=r("../node_modules/react/index.js"),w=r("../node_modules/react-router/es/index.js"),B=r("./app/components/charts/areaChart.tsx"),D=r("./app/components/charts/chartZoom.tsx"),k=r("./app/components/charts/styles.tsx"),T=r("./app/components/panels/index.tsx"),P=r("./app/components/placeholder.tsx"),I=r("./app/utils/getDynamicText.tsx"),A=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class X extends l.Z{componentDidUpdate(e){const{project:t,organization:r,start:o,end:n,period:s,utc:i}=this.props;e.start===o&&e.end===n&&e.period===s&&e.utc===i&&e.organization.id===r.id&&e.project.id===t.id||this.remountComponent()}getDefaultState(){return{...super.getDefaultState(),ruleFireHistory:[]}}getEndpoints(){const{project:e,organization:t,period:r,start:o,end:n,utc:s,rule:i}=this.props;return[["ruleFireHistory",`/projects/${t.slug}/${e.slug}/rules/${i.id}/stats/`,{query:{...r&&{statsPeriod:r},start:o,end:n,utc:s}}]]}renderChart(){const{router:e,period:t,start:r,end:o,utc:n}=this.props,{ruleFireHistory:s}=this.state,i={seriesName:"Alerts Triggered",data:s.map((e=>({name:e.date,value:e.count}))),emphasis:{disabled:!0}};return(0,A.tZ)(D.Z,{router:e,period:t,start:r,end:o,utc:n,usePageDate:!0,children:e=>(0,A.tZ)(B.Z,{...e,isGroupedByDate:!0,showTimeInTooltip:!0,grid:{left:(0,C.Z)(.25),right:(0,C.Z)(2),top:(0,C.Z)(3),bottom:0},yAxis:{minInterval:1},series:[i]})})}renderEmpty(){return(0,A.tZ)(T.s_,{children:(0,A.tZ)(T.N,{withPadding:!0,children:(0,A.tZ)(P.Z,{height:"200px"})})})}render(){const{ruleFireHistory:e,loading:t}=this.state,r=e.reduce(((e,t)=>e+t.count),0);return t?this.renderEmpty():(0,A.BX)(T.s_,{children:[(0,A.BX)($,{withPadding:!0,children:[(0,A.tZ)(R,{children:(0,A.tZ)(k.ws,{children:(0,j.t)("Alerts Triggered")})}),(0,I.Z)({value:this.renderChart(),fixed:(0,A.tZ)(P.Z,{height:"200px",testId:"skeleton-ui"})})]}),(0,A.BX)(E,{children:[(0,A.tZ)(M,{children:(0,j.t)("Total Alerts")}),(0,A.tZ)(N,{children:r})]})]})}}X.displayName="AlertChart";const F=(0,w.withRouter)(X),R=(0,n.Z)("div",{target:"e1c32gvy4"})("margin-bottom:",(0,C.Z)(3),";"),E=(0,n.Z)(T.jH,{target:"e1c32gvy3"})("display:flex;align-items:center;padding:",(0,C.Z)(1)," 20px;"),M=(0,n.Z)(k.OT,{target:"e1c32gvy2"})("display:flex;align-items:center;margin:0;font-weight:bold;font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),N=(0,n.Z)("div",{target:"e1c32gvy1"})("display:flex;align-items:center;margin:0 ",(0,C.Z)(1),";"),$=(0,n.Z)(T.N,{target:"e1c32gvy0"})({name:"sgs7ru",styles:"padding-right:6px"});var q=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),U=r("./app/components/count.tsx"),L=r("./app/components/dateTime.tsx"),G=r("./app/components/links/link.tsx"),H=r("./app/components/pagination.tsx"),O=r("./app/styles/overflowEllipsis.tsx"),V=r("./app/utils/events.tsx");class W extends l.Z{constructor(){super(...arguments),(0,o.Z)(this,"shouldRenderBadRequests",!0)}componentDidUpdate(e){const{project:t,organization:r,start:o,end:n,period:s,utc:i,cursor:a}=this.props;e.start===o&&e.end===n&&e.period===s&&e.utc===i&&e.organization.id===r.id&&e.project.id===t.id&&e.cursor===a||this.remountComponent()}getDefaultState(){return{...super.getDefaultState(),groupHistory:null}}getEndpoints(){const{project:e,rule:t,organization:r,period:o,start:n,end:s,utc:i,cursor:a}=this.props;return[["groupHistory",`/projects/${r.slug}/${e.slug}/rules/${t.id}/group-history/`,{query:{per_page:10,...o&&{statsPeriod:o},start:n,end:s,utc:i,cursor:a}}]]}renderLoading(){return this.renderBody()}renderBody(){const{organization:e,rule:t}=this.props,{loading:r,groupHistory:o,groupHistoryPageLinks:n}=this.state;return(0,A.BX)(S.Fragment,{children:[(0,A.tZ)(Y,{isLoading:r,isEmpty:0===(null==o?void 0:o.length),emptyMessage:(0,j.t)("No issues exist for the current query."),headers:[(0,j.t)("Issue"),(0,A.tZ)(Q,{children:(0,j.t)("Alerts")},"alerts"),(0,A.tZ)(Q,{children:(0,j.t)("Events")},"events"),(0,j.t)("Last Triggered")],children:null==o?void 0:o.map((r=>{let{group:o,count:n,lastTriggered:s}=r;const i=(0,V.FC)(o),{title:a}=(0,V.YQ)(o);return(0,A.BX)(S.Fragment,{children:[(0,A.BX)(ee,{children:[(0,A.BX)(G.Z,{to:{pathname:`/organizations/${e.slug}/issues/${o.id}/`,query:t.environment?{environment:t.environment}:{}},children:[a,":"]}),(0,A.tZ)(te,{children:i})]}),(0,A.tZ)(Q,{children:(0,A.tZ)(U.Z,{value:n})}),(0,A.tZ)(Q,{children:(0,A.tZ)(U.Z,{value:o.count})}),(0,A.tZ)("div",{children:(0,A.tZ)(J,{date:(0,I.Z)({value:s,fixed:"Mar 16, 2020 9:10:13 AM UTC"})})})]},o.id)}))}),(0,A.tZ)(re,{children:(0,A.tZ)(oe,{pageLinks:n,size:"xsmall"})})]})}}const K=W,Y=(0,n.Z)(T.KB,{target:"es3albs6"})("grid-template-columns:1fr 0.2fr 0.2fr 0.5fr;font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,C.Z)(1.5),";",(e=>!e.isEmpty&&(0,q.iv)("&>div{padding:",(0,C.Z)(1)," ",(0,C.Z)(2),";}","")),";"),Q=(0,n.Z)("div",{target:"es3albs5"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"}),J=(0,n.Z)(L.Z,{target:"es3albs4"})("white-space:nowrap;color:",(e=>e.theme.subText),";"),ee=(0,n.Z)("div",{target:"es3albs3"})(O.Z,";display:flex;gap:",(0,C.Z)(.5),";min-width:200px;"),te=(0,n.Z)("span",{target:"es3albs2"})(O.Z,";color:",(e=>e.theme.textColor),";"),re=(0,n.Z)("div",{target:"es3albs1"})("display:flex;align-items:center;justify-content:flex-end;margin-bottom:",(0,C.Z)(2),";"),oe=(0,n.Z)(H.Z,{target:"es3albs0"})({name:"1i9vogi",styles:"margin-top:0"});r("../node_modules/core-js/modules/es.string.replace.js");var ne=r("./app/components/avatar/actorAvatar.tsx"),se=r("./app/components/keyValueTable.tsx"),ie=r("./app/components/timeSince.tsx");class ae extends S.PureComponent{renderConditions(){const{rule:e}=this.props,t=e.conditions.length?e.conditions.map((e=>(0,A.tZ)(ve,{children:e.name},e.id))):"",r=e.filters.length?e.filters.map((e=>(0,A.tZ)(ve,{children:e.time?e.name+"(s)":e.name},e.id))):"",o=e.actions.length?e.actions.map((e=>{let t=e.name;return"sentry.integrations.slack.notify_action.SlackNotifyServiceAction"===e.id&&(t=t.replace(/\(optionally.*\)/,""),t=t.replace(" and show tags [] in notification","")),(0,A.tZ)(ve,{children:t},e.id)})):(0,A.tZ)(ve,{children:(0,j.t)("Do nothing")});return(0,A.BX)(T.N,{children:[(0,A.tZ)(he,{children:(0,A.BX)(me,{children:[(0,A.tZ)(ye,{children:(0,A.tZ)(z.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,A.BX)(ge,{children:[(0,A.tZ)(Ze,{children:(0,j._N)("[when:When] [selector] of the following happens",{when:(0,A.tZ)(xe,{}),selector:e.actionMatch})}),(0,A.tZ)(ve,{children:(0,j.t)("An event is captured")}),t]})]})}),r&&(0,A.tZ)(he,{children:(0,A.BX)(me,{children:[(0,A.tZ)(ye,{children:(0,A.tZ)(z.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,A.BX)(ge,{children:[(0,A.tZ)(Ze,{children:(0,j._N)("[if:If] [selector] of these filters match",{if:(0,A.tZ)(xe,{}),selector:e.filterMatch})}),r]})]})}),(0,A.tZ)(he,{children:(0,A.BX)(me,{children:[(0,A.tZ)(ye,{children:(0,A.tZ)(z.g6,{isCircled:!0,color:"gray200",direction:"right",size:"sm"})}),(0,A.BX)("div",{children:[(0,A.tZ)(Ze,{children:(0,j._N)("[then:Then] perform these actions",{then:(0,A.tZ)(xe,{})})}),o]})]})})]})}render(){var e,t;const{rule:r}=this.props,o=null===(e=r.owner)||void 0===e?void 0:e.split(":")[1],n=o&&{type:"team",id:o,name:""};return(0,A.BX)(S.Fragment,{children:[(0,A.tZ)(ue,{children:(0,A.BX)(ce,{children:[(0,A.tZ)(fe,{noMargin:!0,children:(0,j.t)("Last Triggered")}),(0,A.tZ)(pe,{children:r.lastTriggered?(0,A.tZ)(ie.Z,{date:r.lastTriggered}):(0,j.t)("No alerts triggered")})]})}),(0,A.BX)(le,{children:[(0,A.tZ)(fe,{noMargin:!0,children:(0,j.t)("Alert Conditions")}),this.renderConditions()]}),(0,A.BX)(le,{children:[(0,A.tZ)(fe,{children:(0,j.t)("Alert Rule Details")}),(0,A.BX)(se.v,{children:[r.dateCreated&&(0,A.tZ)(se.G,{keyName:(0,j.t)("Date Created"),value:(0,A.tZ)(ie.Z,{date:r.dateCreated,suffix:(0,j.t)("ago")})}),r.createdBy&&(0,A.tZ)(se.G,{keyName:(0,j.t)("Created By"),value:(0,A.tZ)(be,{children:null!==(t=r.createdBy.name)&&void 0!==t?t:"-"})}),(0,A.tZ)(se.G,{keyName:(0,j.t)("Team"),value:n?(0,A.tZ)(ne.Z,{actor:n,size:24}):"Unassigned"})]})]})]})}}ae.displayName="Sidebar";const de=ae,le=(0,n.Z)("div",{target:"e17451dx12"})("margin-bottom:",(0,C.Z)(3),";"),ce=(0,n.Z)("div",{target:"e17451dx11"})({name:"10sya4f",styles:"flex:1;display:flex;flex-direction:column;>*:nth-child(2){flex:1;display:flex;align-items:center;}"}),pe=(0,n.Z)("div",{target:"e17451dx10"})("position:relative;display:grid;grid-template-columns:auto auto auto;gap:",(0,C.Z)(.5),";font-size:",(e=>e.theme.fontSizeLarge),";"),ue=(0,n.Z)("div",{target:"e17451dx9"})("height:60px;display:flex;margin-bottom:",(0,C.Z)(1.5),";"),he=(0,n.Z)("div",{target:"e17451dx8"})("position:relative;margin-top:",(0,C.Z)(4),";:first-child{margin-top:",(0,C.Z)(1),";}"),me=(0,n.Z)("div",{target:"e17451dx7"})({name:"bnlinx",styles:"display:flex;align-items:flex-start;flex-grow:1"}),ge=(0,n.Z)("div",{target:"e17451dx6"})("&::before{content:'';position:absolute;height:100%;top:28px;left:",(0,C.Z)(1),";border-right:1px ",(e=>e.theme.gray200)," dashed;}"),Ze=(0,n.Z)("div",{target:"e17451dx5"})("margin-bottom:",(0,C.Z)(.5),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;"),ye=(0,n.Z)("div",{target:"e17451dx4"})("display:flex;align-items:center;padding:",(0,C.Z)(.5)," ",(0,C.Z)(1)," ",(0,C.Z)(.5)," 0;"),xe=(0,n.Z)("span",{target:"e17451dx3"})("display:inline-block;background-color:",(e=>e.theme.purple300),";padding:0 ",(0,C.Z)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.white),";text-transform:uppercase;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";font-weight:400;line-height:1.5;"),ve=(0,n.Z)("span",{target:"e17451dx2"})("display:block;background-color:",(e=>e.theme.surface100),";padding:0 ",(0,C.Z)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeSmall),";margin-bottom:",(0,C.Z)(1),";width:fit-content;font-weight:400;"),fe=(0,n.Z)(k.OT,{target:"e17451dx1"})("margin-top:",(e=>e.noMargin?0:(0,C.Z)(2)),";margin-bottom:",(e=>e.noMargin?0:(0,C.Z)(1)),";"),be=(0,n.Z)("div",{target:"e17451dx0"})(O.Z,";"),ze=["pageStatsPeriod","pageStart","pageEnd","pageUtc","cursor"];class je extends l.Z{constructor(){super(...arguments),(0,o.Z)(this,"shouldRenderBadRequests",!0),(0,o.Z)(this,"handleUpdateDatetime",(e=>{const{start:t,end:r,relative:o,utc:n}=e;if(t&&r){const e=n?d().utc:d();return this.setStateOnUrl({pageStatsPeriod:void 0,pageStart:e(t).format(),pageEnd:e(r).format(),pageUtc:null!=n?n:void 0,cursor:void 0})}return this.setStateOnUrl({pageStatsPeriod:o||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0,cursor:void 0})}))}componentDidMount(){const{organization:e,params:t}=this.props;(0,_.Z)("issue_alert_rule_details.viewed",{organization:e,rule_id:parseInt(t.ruleId,10)})}componentDidUpdate(e){const{params:t}=e,{params:r}=this.props;t.ruleId===r.ruleId&&t.orgId===r.orgId&&t.projectId===r.projectId||this.reloadData()}getDefaultState(){return{...super.getDefaultState(),rule:null}}getEndpoints(){const{orgId:e,ruleId:t,projectId:r}=this.props.params;return[["rule",`/projects/${e}/${r}/rules/${t}/`,{query:{expand:"lastTriggered"}}]]}getDataDatetime(){var e,t;const r=null!==(e=null===(t=this.props.location)||void 0===t?void 0:t.query)&&void 0!==e?e:{},{start:o,end:n,statsPeriod:s,utc:i}=(0,x.fK)(r,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0});if(!s&&!o&&!n)return{period:b.GY};if(s)return{period:s};const a="true"===i;return o&&n?a?{start:d().utc(o).format(),end:d().utc(n).format(),utc:a}:{start:d()(o).utc().format(),end:d()(n).utc().format(),utc:a}:{period:b.GY}}setStateOnUrl(e){const{location:t,router:r}=this.props,o=i()(e,ze),n={...t,query:{...t.query,...o}};return r.push(n),n}renderLoading(){return(0,A.tZ)(_e,{children:(0,A.tZ)(m.or,{fullWidth:!0,children:(0,A.tZ)(Z.Z,{})})})}renderBody(){var e;const{params:t,location:r,organization:o,project:n}=this.props,{orgId:s,ruleId:i,projectId:a}=t,{cursor:d}=r.query,{period:l,start:Z,end:x,utc:v}=this.getDataDatetime(),{rule:b}=this.state;return b?(0,A.BX)(y.Z,{shouldForceProject:!0,forceProject:n,forceEnvironment:null!==(e=b.environment)&&void 0!==e?e:"",lockedMessageSubject:(0,j.t)("alert rule"),showDateSelector:!1,skipLoadLastUsed:!0,children:[(0,A.tZ)(f.Z,{title:b.name,orgSlug:s,projectSlug:a}),(0,A.BX)(m.h4,{children:[(0,A.BX)(m.oB,{children:[(0,A.tZ)(c.Z,{crumbs:[{label:(0,j.t)("Alerts"),to:`/organizations/${s}/alerts/rules/`},{label:(0,A.BX)("div",{children:[(0,j.t)("Alert Rule"),(0,A.tZ)(h.Z,{type:"beta"})]}),to:null}]}),(0,A.tZ)(m.Dx,{children:b.name})]}),(0,A.tZ)(m.kP,{children:(0,A.BX)(u.ZP,{gap:1,children:[(0,A.tZ)(p.ZP,{title:(0,j.t)("Send us feedback via email"),href:"mailto:alerting-feedback@sentry.io?subject=Issue Alert Details Feedback",children:(0,j.t)("Give Feedback")}),(0,A.tZ)(p.ZP,{icon:(0,A.tZ)(z.yl,{}),to:`/organizations/${s}/alerts/rules/${a}/${i}/`,onClick:()=>(0,_.Z)("issue_alert_rule_details.edit_clicked",{organization:o,rule_id:parseInt(i,10)}),children:(0,j.t)("Edit Rule")})]})})]}),(0,A.BX)(_e,{children:[(0,A.BX)(m.or,{children:[(0,A.tZ)(Se,{organization:o,relative:null!=l?l:"",start:null!=Z?Z:null,end:null!=x?x:null,utc:null!=v?v:null,onUpdate:this.handleUpdateDatetime}),(0,A.tZ)(F,{organization:o,orgId:s,project:n,rule:b,period:null!=l?l:"",start:null!=Z?Z:null,end:null!=x?x:null,utc:null!=v?v:null}),(0,A.tZ)(K,{organization:o,project:n,rule:b,period:null!=l?l:"",start:null!=Z?Z:null,end:null!=x?x:null,utc:null!=v?v:null,cursor:d})]}),(0,A.tZ)(m.MF,{children:(0,A.tZ)(de,{rule:b})})]})]}):(0,A.tZ)(g.Z,{message:(0,j.t)("There was an error loading the alert rule.")})}}const Ce=je,_e=(0,n.Z)(m.uT,{target:"e16t3y1p1"})({name:"108qp7n",styles:"margin-bottom:-20px"}),Se=(0,n.Z)(v.Z,{target:"e16t3y1p0"})("margin-bottom:",(0,C.Z)(2),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_details_ruleDetails_tsx.9c909eed0d543dc915b3a32ec2142005.js.map