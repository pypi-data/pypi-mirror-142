"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_utils_tsx"],{"./app/components/events/interfaces/spans/utils.tsx":(t,e,n)=>{n.d(e,{IG:()=>S,n0:()=>T,TC:()=>_,hw:()=>g,ro:()=>y,Rr:()=>w,yk:()=>E,PA:()=>C,k9:()=>F,yn:()=>b,h_:()=>x,PC:()=>P,o0:()=>q,is:()=>A,vu:()=>j,rF:()=>D,ct:()=>V}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("../node_modules/react-router/es/index.js"),r=n("../node_modules/lodash/isNumber.js"),s=n.n(r),i=n("../node_modules/lodash/isString.js"),o=n.n(i),p=n("../node_modules/lodash/set.js"),l=n.n(p),m=n("../node_modules/moment/moment.js"),c=n.n(m),u=n("./app/types/event.tsx"),d=n("./app/types/utils.tsx"),f=n("./app/utils/performance/vitals/constants.tsx");const h=t=>{const{startTimestamp:e,endTimestamp:n}=t;return e>n?{startTimestamp:n,endTimestamp:e}:t};let v;!function(t){t[t.Stable=0]="Stable",t[t.Reversed=1]="Reversed",t[t.Equal=2]="Equal"}(v||(v={}));const S=t=>{const{viewStart:e,viewEnd:n}=t,{startTimestamp:a,endTimestamp:r}=h({startTimestamp:t.traceStartTimestamp,endTimestamp:t.traceEndTimestamp}),s=r-a,i=a+e*s,o=r-(1-n)*s-i;return t=>{if(s<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:e,endTimestamp:n}=h(t),a=(t=>{const e=t.startTimestamp,n=t.endTimestamp;return e<n?v.Stable:e===n?v.Equal:v.Reversed})(t),r=(e-i)/o,p=(n-i)/o,l=p>0&&r<1;switch(a){case v.Equal:return{type:"TIMESTAMPS_EQUAL",start:r,width:1,isSpanVisibleInView:p>=0&&r<=1};case v.Reversed:return{type:"TIMESTAMPS_REVERSED",start:r,end:p,isSpanVisibleInView:l};case v.Stable:return{type:"TIMESTAMPS_STABLE",start:r,end:p,isSpanVisibleInView:l};default:return a}}};function T(t){return{trace_id:t.traceID,span_id:t.rootSpanID,parent_span_id:t.parentSpanID,start_timestamp:t.traceStartTimestamp,timestamp:t.traceEndTimestamp,op:t.op,description:t.description,data:{},status:t.rootSpanStatus,hash:t.hash,exclusive_time:t.exclusiveTime}}function _(t){return{start:c().unix(t.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:c().unix(t.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function g(t){return"type"in t&&"gap"===t.type}function y(t){if("type"in t){if("orphan"===t.type)return!0;if("gap"===t.type)return t.isOrphan}return!1}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return g(t)?e:t.span_id}function E(t){if(!g(t))return t.op}function C(t){var e;return null==t||null===(e=t.contexts)||void 0===e?void 0:e.trace}function F(t){var e;const n=t.entries.find((t=>t.type===u.UZ.SPANS)),a=null!==(e=null==n?void 0:n.data)&&void 0!==e?e:[],r=C(t),i=r&&r.trace_id||"",p=r&&r.span_id||"",m=r&&r.op||"transaction",c=r&&r.description,f=r&&r.parent_span_id,h=r&&r.status,v=r&&r.hash,S=r&&r.exclusive_time;if(!n||a.length<=0)return{op:m,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:i,rootSpanID:p,rootSpanStatus:h,parentSpanID:f,spans:[],description:c,hash:v,exclusiveTime:S};const T=new Set(a.map((t=>t.span_id)));T.add(p);const _={op:m,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:i,rootSpanID:p,rootSpanStatus:h,parentSpanID:f,spans:a,description:c,hash:v,exclusiveTime:S},y=a.reduce(((t,e)=>{var n;let a=e;const r=function(t){return g(t)?"gap-span":t.parent_span_id}(a),i=r&&T.has(r);var m;m=r,o()(m)&&m.length>0&&i||(a.parent_span_id=p,a={type:"orphan",...a}),(0,d.hu)(a.parent_span_id);const c=null!==(n=t.childSpans[a.parent_span_id])&&void 0!==n?n:[];c.push(a),l()(t.childSpans,a.parent_span_id,c),(!t.traceStartTimestamp||a.start_timestamp<t.traceStartTimestamp)&&(t.traceStartTimestamp=a.start_timestamp);const u=s()(a.timestamp);return t.traceEndTimestamp?u&&a.timestamp>t.traceEndTimestamp?(t.traceEndTimestamp=a.timestamp,t):(a.start_timestamp>t.traceEndTimestamp&&(t.traceEndTimestamp=a.start_timestamp),t):u?(t.traceEndTimestamp=a.timestamp,t):(t.traceEndTimestamp=a.start_timestamp,t)}),_);return Object.values(y.childSpans).forEach((t=>{t.sort(I)})),y}function I(t,e){return y(t)&&!y(e)?1:!y(t)&&y(e)||t.start_timestamp<e.start_timestamp?-1:t.start_timestamp===e.start_timestamp?0:1}function b(t){return"number"!=typeof t&&"orphan"===(null==t?void 0:t.type)}function x(t){return b(t)?t.depth:t}function P(t){var e;const n=null===(e=t.sdk)||void 0===e?void 0:e.name;return!!n&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs"].includes(n.toLowerCase())}const q=["mark","paint"];function R(t){const e=Object.keys(t);return Object.values(f.r9).filter((t=>e.includes(t.slug))).some((e=>{const n=t[e.slug];return"number"==typeof n&&"number"==typeof e.poorThreshold&&n>=e.poorThreshold}))}function A(t){if(!t.measurements)return new Map;const e=Object.keys(t.measurements).filter((t=>t.startsWith("mark."))).map((e=>{const n=e.slice("mark.".length),a=t.measurements[n];return{name:e,timestamp:t.measurements[e].value,value:a?a.value:void 0}})),n=new Map;return e.forEach((t=>{const e=t.name.slice("mark.".length),a=t.value;if(n.has(t.timestamp)){const r=n.get(t.timestamp);return r.marks={...r.marks,[e]:a},r.failedThreshold||(r.failedThreshold=R(r.marks)),void n.set(t.timestamp,r)}const r={[e]:a};n.set(t.timestamp,{marks:r,failedThreshold:R(r)})})),n}function j(t,e){const n=e({startTimestamp:t,endTimestamp:t});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}function D(t,e,n){return r=>{r.preventDefault();const s=V(t);e(s),a.browserHistory.push({...n,hash:s})}}function V(t){return`#span-${t}`}},"./app/utils/performance/quickTrace/utils.tsx":(t,e,n)=>{n.d(e,{hp:()=>c,q2:()=>u,eW:()=>d,R8:()=>h,eF:()=>S,_Z:()=>T,$J:()=>_,S2:()=>g,xB:()=>y,y3:()=>w,Ci:()=>E}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("../node_modules/lodash/omit.js"),r=n.n(a),s=n("../node_modules/moment-timezone/index.js"),i=n.n(s),o=n("./app/components/events/interfaces/spans/utils.tsx"),p=n("./app/constants/pageFilters.tsx"),l=n("./app/utils/analytics.tsx"),m=n("./app/utils/discover/eventView.tsx");function c(t){return"transaction"===t.type}function u(t,e){return c(e)?t.event_id===e.id:void 0!==t.errors&&t.errors.some((t=>t.event_id===e.id))}function d(t,e){const n=[],a=[],r=[{event:e,path:[]}];for(;r.length;){const e=r.shift();if(u(e.event,t)){for(const t of e.path)n.push(t);a.push(e.event)}else{const t=[...e.path,f(e.event)];for(const n of e.event.children)r.push({event:n,path:t})}}if(!a.length)throw new Error("No relevant path exists!");for(;a.length;){const t=a.shift();for(const e of t.children)a.push(e);n.push(f(t))}return n}function f(t){return r()(t,["children"])}function h(t,e,n){var a,r,s;const{type:i,trace:o}=t;if("empty"===i||null===o)throw new Error("Current event not in trace navigator!");const p="full"===i,m=null!==(a=o.find((t=>u(t,e))))&&void 0!==a?a:null;if(null===m)throw new Error("Current event not in trace navigator!");const c=m.parent_event_id&&null!==(r=o.find((t=>t.event_id===m.parent_event_id)))&&void 0!==r?r:null,d=null!==(s=o.find((t=>t.event_id!==m.event_id&&t.event_id!==(null==c?void 0:c.event_id)&&0===t.generation)))&&void 0!==s?s:null,f=p?[]:null,h=[],S=p?[]:null,T=new Set;return o.forEach((t=>{T.add(t.project_id),(t=>t.parent_event_id===m.event_id)(t)?h.push(t):p&&((t=>null!==m.generation&&null!==t.generation&&t.generation>0&&m.generation-1>t.generation)(t)?null==f||f.push(t):(t=>null!==m.generation&&null!==t.generation&&m.generation+1<t.generation)(t)&&(null==S||S.push(t)))})),p&&T.size>1&&function(t,e){(0,l.ec)({eventKey:"quick_trace.connected_services",eventName:"Quick Trace: Connected Services",organization_id:parseInt(t.id,10),projects:e})}(n,T.size),{root:d,ancestors:null===f?null:v(f),parent:c,current:m,children:v(h),descendants:null===S?null:v(S)}}function v(t){return t.sort(((t,e)=>e["transaction.duration"]-t["transaction.duration"]))}function S(t){let{eventView:e,location:n}=t;return r()(e.getEventsAPIPayload(n),["field","sort","per_page"])}function T(t){let{start:e,end:n,statsPeriod:a}=t;return m.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[p.mP],query:"",environment:[],start:e,end:n,range:null!=a?a:void 0})}function _(t){const e=c(t)?t.startTimestamp:i()(t.dateReceived?t.dateReceived:t.dateCreated).valueOf()/1e3,n=c(t)?t.endTimestamp:e;return(0,o.TC)({start:e,end:n})}function g(t,e,n){let a=n;const r=[t];for(;r.length;){const t=r.pop();for(const e of t.children)r.push(e);a=e(a,t)}return a}function y(t,e){return g(t,((t,n)=>(e(n)&&t.push(n),t)),[])}function w(t){return Boolean(t.event_id)}function E(t){return Boolean(t.event_id)}},"./app/utils/performance/urls.ts":(t,e,n)=>{n.d(e,{D:()=>s});var a=n("./app/components/events/interfaces/spans/utils.tsx"),r=n("./app/utils.tsx");function s(t,e,n,s,i){const o={...s||{},transaction:n};(0,r.ri)(o.transaction)||delete o.transaction;const p={pathname:`/organizations/${t}/performance/${e}/`,query:o,hash:(0,r.ri)(i)?(0,a.ct)(i):void 0};return(0,r.ri)(p.hash)||delete p.hash,p}},"./app/utils/performance/vitals/constants.tsx":(t,e,n)=>{n.d(e,{r9:()=>s,TT:()=>i,AR:()=>o});var a=n("./app/locale.tsx"),r=n("./app/utils/discover/fields.tsx");const s={[r.Zl.FP]:{slug:"fp",name:(0,a.t)("First Paint"),acronym:"FP",description:(0,a.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,r.Cq)(r.Zl.FP)},[r.Zl.FCP]:{slug:"fcp",name:(0,a.t)("First Contentful Paint"),acronym:"FCP",description:(0,a.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,r.Cq)(r.Zl.FCP)},[r.Zl.LCP]:{slug:"lcp",name:(0,a.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,a.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,r.Cq)(r.Zl.LCP)},[r.Zl.FID]:{slug:"fid",name:(0,a.t)("First Input Delay"),acronym:"FID",description:(0,a.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,r.Cq)(r.Zl.FID)},[r.Zl.CLS]:{slug:"cls",name:(0,a.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,a.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,r.Cq)(r.Zl.CLS)},[r.Zl.TTFB]:{slug:"ttfb",name:(0,a.t)("Time to First Byte"),acronym:"TTFB",description:(0,a.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,r.Cq)(r.Zl.TTFB)},[r.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,a.t)("Request Time"),acronym:"RT",description:(0,a.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,r.Cq)(r.Zl.RequestTime)}},i={[r.$n.AppStartCold]:{slug:"app_start_cold",name:(0,a.t)("App Start Cold"),description:(0,a.t)("Cold start is a measure of the application start up time from scratch."),type:(0,r.Cq)(r.$n.AppStartCold)},[r.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,a.t)("App Start Warm"),description:(0,a.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,r.Cq)(r.$n.AppStartWarm)},[r.$n.FramesTotal]:{slug:"frames_total",name:(0,a.t)("Total Frames"),description:(0,a.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,r.Cq)(r.$n.FramesTotal)},[r.$n.FramesSlow]:{slug:"frames_slow",name:(0,a.t)("Slow Frames"),description:(0,a.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,r.Cq)(r.$n.FramesSlow)},[r.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,a.t)("Frozen Frames"),description:(0,a.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,r.Cq)(r.$n.FramesFrozen)},[r.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,a.t)("Slow Frames Rate"),description:(0,a.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,r.Cq)(r.$n.FramesSlowRate)},[r.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,a.t)("Frozen Frames Rate"),description:(0,a.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,r.Cq)(r.$n.FramesFrozenRate)},[r.$n.StallCount]:{slug:"stall_count",name:(0,a.t)("Stalls"),description:(0,a.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,r.Cq)(r.$n.StallCount)},[r.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,a.t)("Total Stall Time"),description:(0,a.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,r.Cq)(r.$n.StallTotalTime)},[r.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,a.t)("Longest Stall Time"),description:(0,a.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,r.Cq)(r.$n.StallLongestTime)},[r.$n.StallPercentage]:{slug:"stall_percentage",name:(0,a.t)("Stall Percentage"),description:(0,a.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,r.Cq)(r.$n.StallPercentage)}};let o;!function(t){t.CHROME="Chrome",t.EDGE="Edge",t.OPERA="Opera",t.FIREFOX="Firefox",t.SAFARI="Safari",t.IE="IE"}(o||(o={}))},"./app/views/performance/traceDetails/utils.tsx":(t,e,n)=>{n.d(e,{YA:()=>s,Rg:()=>i,uM:()=>o}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("./app/constants/pageFilters.tsx"),r=n("./app/utils/performance/quickTrace/utils.tsx");function s(t,e,n,r){const{start:s,end:i,statsPeriod:o}=n;return{pathname:`/organizations/${t.slug}/performance/trace/${e}/`,query:{...r,statsPeriod:o,[a.V.PAGE_START]:s,[a.V.PAGE_END]:i}}}function i(t){const e={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return t.reduce(((t,e)=>(0,r.S2)(e,((t,e)=>{for(const a of null!==(n=e.errors)&&void 0!==n?n:[]){var n;t.errors.add(a.event_id)}return t.transactions.add(e.event_id),t.projects.add(e.project_slug),t.startTimestamp=Math.min(t.startTimestamp,e.start_timestamp),t.endTimestamp=Math.max(t.endTimestamp,e.timestamp),t.maxGeneration=Math.max(t.maxGeneration,e.generation),t}),t)),e)}function o(t){return null===t.parent_span_id}},"./app/views/performance/transactionSummary/utils.tsx":(t,e,n)=>{n.d(e,{K0:()=>l,xf:()=>m,PU:()=>c,e1:()=>u,Z6:()=>d,vd:()=>f,uI:()=>h});var a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/styles/space.tsx"),s=n("./app/utils/discover/urls.tsx"),i=n("./app/utils/performance/urls.ts"),o=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/views/performance/traceDetails/utils.tsx");let l;function m(t){const e=c(t);return e.removeFilter("transaction"),e}function c(t){const e=new o.MY(t);return e.removeFilter("event.type"),e}function u(t){let{orgSlug:e,transaction:n,projectID:a,query:r,unselectedSeries:s="p100()",display:i,trendFunction:o,trendColumn:p,showTransactions:l,additionalQuery:c}=t;const u=function(t){let{orgSlug:e}=t;return`/organizations/${e}/performance/summary/`}({orgSlug:e});let d;return d="string"==typeof r.query?m(r.query).formatString():r.query,{pathname:u,query:{transaction:n,project:a,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:d,unselectedSeries:s,showTransactions:l,display:i,trendFunction:o,trendColumn:p,...c}}}function d(t){return(e,n,a)=>{const r=`${n.trace}`;return r?(0,p.YA)(e,r,t,{}):{}}}function f(t){return(e,n,a,r)=>{const o=(0,s.JE)(n);return(0,i.D)(e.slug,o,t,a,r)}}!function(t){t.FASTEST="fastest",t.SLOW="slow",t.OUTLIER="outlier",t.RECENT="recent"}(l||(l={}));const h=(0,a.Z)("div",{target:"e1radvp0"})("margin-top:",(0,r.Z)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_utils_tsx.1cd914a6829ace656f092a68b6cdfb09.js.map