"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_account_notifications_notificationSettings_tsx"],{"./app/components/alertLink.tsx":(t,e,i)=>{i.d(e,{Z:()=>m});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(i("../node_modules/react/index.js"),i("../node_modules/lodash/omit.js")),s=i.n(o),a=i("./app/components/links/externalLink.tsx"),r=i("./app/components/links/link.tsx"),c=i("./app/icons/index.tsx"),l=i("./app/styles/space.tsx"),p=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(t){let{size:e="normal",priority:i="warning",icon:n,children:o,onClick:s,withoutMarginBottom:a=!1,openInNewTab:r=!1,to:l,href:d,"data-test-id":m}=t;return(0,p.BX)(u,{"data-test-id":m,to:l,href:d,onClick:s,size:e,priority:i,withoutMarginBottom:a,openInNewTab:r,children:[n&&(0,p.tZ)(g,{children:n}),(0,p.tZ)(f,{children:o}),(0,p.tZ)(h,{children:(0,p.tZ)(c.g6,{direction:"right"})})]})}d.displayName="AlertLink";const m=d,u=(0,n.Z)((t=>{let{openInNewTab:e,to:i,href:n,...o}=t;const c=s()(o,["withoutMarginBottom","priority","size"]);return n?(0,p.tZ)(a.Z,{...c,href:n,openInNewTab:e}):(0,p.tZ)(r.Z,{...c,to:i||""})}),{target:"ear9tuy3"})("display:flex;background-color:",(t=>t.theme.alert[t.priority].backgroundLight),";color:",(t=>t.theme.textColor),";border:1px dashed ",(t=>t.theme.alert[t.priority].border),";padding:",(t=>"small"===t.size?`${(0,l.Z)(1)} ${(0,l.Z)(1.5)}`:(0,l.Z)(2)),";margin-bottom:",(t=>t.withoutMarginBottom?0:(0,l.Z)(3)),";border-radius:0.25em;transition:0.2s border-color;&.focus-visible{outline:none;box-shadow:",(t=>t.theme.alert[t.priority].border),"7f 0 0 0 2px;}"),g=(0,n.Z)("span",{target:"ear9tuy2"})("display:flex;margin:",(0,l.Z)(.5)," ",(0,l.Z)(1.5)," ",(0,l.Z)(.5)," 0;"),h=(0,n.Z)(g,{target:"ear9tuy1"})("margin:",(0,l.Z)(.5)," 0;"),f=(0,n.Z)("div",{target:"ear9tuy0"})({name:"19lh9qo",styles:"line-height:1.5;flex-grow:1"})},"./app/views/settings/account/notifications/notificationSettings.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>k});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/react/index.js")),s=i("./app/components/alertLink.tsx"),a=i("./app/components/asyncComponent.tsx"),r=i("./app/components/forms/form.tsx"),c=i("./app/components/forms/jsonForm.tsx"),l=i("./app/components/forms/model.tsx"),p=i("./app/components/links/link.tsx"),d=i("./app/icons/index.tsx"),m=i("./app/locale.tsx"),u=i("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),g=i("./app/utils/withOrganizations.tsx"),h=i("./app/views/settings/account/notifications/constants.tsx"),f=i("./app/views/settings/account/notifications/fields2.tsx"),x=i("./app/views/settings/account/notifications/utils.tsx"),Z=i("./app/views/settings/components/settingsPageHeader.tsx"),y=i("./app/views/settings/components/text/textBlock.tsx"),b=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends a.Z{constructor(){super(...arguments),(0,n.Z)(this,"model",new l.Z),(0,n.Z)(this,"getStateToPutForDefault",((t,e)=>{const{notificationSettings:i}=this.state,n=(0,x.zD)(e,i,t,(0,x.Vy)(e,i));return this.setState({notificationSettings:(0,x.r_)(i,n)}),n})),(0,n.Z)(this,"onFieldChange",(t=>{if(h.uJ.includes(t)){const t={apiEndpoint:"/users/me/notifications/"};this.model.setFormOptions({...this.model.options,...t})}else{const t={apiEndpoint:"/users/me/notification-settings/"};this.model.setFormOptions({...this.model.options,...t})}}))}getDefaultState(){return{...super.getDefaultState(),notificationSettings:{},legacyData:{}}}getEndpoints(){return[["notificationSettings","/users/me/notification-settings/"],["legacyData","/users/me/notifications/"]]}componentDidMount(){(0,u.Z)("notification_settings.index_page_viewed",{organization:null})}get notificationSettingsType(){const t=this.props.organizations.filter((t=>{var e;return null===(e=t.features)||void 0===e?void 0:e.includes("slack-overage-notifications")})).length>0;return h.cH.filter((e=>"quota"!==e||t))}getInitialData(){const{notificationSettings:t,legacyData:e}=this.state;return{...Object.fromEntries(this.notificationSettingsType.map((e=>[e,(0,x._M)(e,t)]))),...e}}getFields(){const{notificationSettings:t}=this.state,e=[],i=[];for(const n of this.notificationSettingsType){const s=Object.assign({},f.u[n],{getData:t=>this.getStateToPutForDefault(t,n),help:(0,b.tZ)(o.Fragment,{children:(0,b.BX)("p",{children:[f.u[n].help,"Â ",(0,b.tZ)(p.Z,{"data-test-id":"fine-tuning",to:`/settings/account/notifications/${n}`,children:"Fine tune"})]})})});(0,x.Vi)(n,t)&&"function"!=typeof s&&(s.confirm={never:h.Y5}),"blank"===s.type?i.push(s):e.push(s)}const n=h.uJ.map((t=>f.u[t]));return e.push(...n),[...e,...i]}renderBody(){return(0,b.BX)(o.Fragment,{children:[(0,b.tZ)(Z.Z,{title:"Notifications"}),(0,b.tZ)(y.Z,{children:"Personal notifications sent by email or an integration."}),(0,b.tZ)(r.Z,{model:this.model,saveOnBlur:!0,apiMethod:"PUT",onFieldChange:this.onFieldChange,initialData:this.getInitialData(),children:(0,b.tZ)(c.Z,{title:(0,m.t)("Notifications"),fields:this.getFields()})}),(0,b.tZ)(s.Z,{to:"/settings/account/emails",icon:(0,b.tZ)(d.h,{}),children:(0,m.t)("Looking to add or remove an email address? Use the emails panel.")})]})}}const k=(0,g.Z)(w)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_notifications_notificationSettings_tsx.3436cf2559b0677dde7adfeb9ec32bf9.js.map