"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-36f0d7"],{"./app/utils/performance/histogram/utils.tsx":(t,e,n)=>{n.d(e,{te:()=>a,_W:()=>o,GT:()=>s});var r=n("./app/utils/formatters.tsx");function a(t){return t.length>=2?t[1].bin-t[0].bin:0}function o(t){const e=a(t);return t.map((t=>{const n=t.bin;return{start:n,end:n+e}}))}function s(t){let{precision:e,type:n,additionalFieldsFn:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=t=>{switch(n){case"duration":const a=null!=e?e:t<1e3?0:3;return(0,r.g9)(t/1e3,a,!0);case"number":const o=10**(null!=e?e:0);return(Math.round((t+Number.EPSILON)*o)/o).toLocaleString();default:throw new Error(`Unable to format type: ${n}`)}};return t.map((t=>{var e;return{value:t.count,name:o(t.bin),...null!==(e=null==a?void 0:a(t.bin))&&void 0!==e?e:{}}}))}},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(t,e,n)=>{n.d(e,{q3:()=>i,_S:()=>l,xr:()=>c,tb:()=>d,qg:()=>p,Zq:()=>u});var r=n("./app/locale.tsx"),a=n("./app/utils/queryString.tsx"),o=n("./app/views/performance/transactionSummary/filter.tsx"),s=n("./app/views/performance/transactionSummary/utils.tsx");let i;function l(t,e){const{p99:n,p95:a,p75:s,p50:l}=e||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,r.t)("p50")},[i.p75]:{name:i.p75,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,r.t)("p75")},[i.p95]:{name:i.p95,query:a?[["transaction.duration",`<=${a.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,r.t)("p95")},[i.p99]:{name:i.p99,query:n?[["transaction.duration",`<=${n.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,r.t)("p99")},[i.p100]:{name:i.p100,label:(0,r.t)("p100")}}}function c(t){let{orgSlug:e,transaction:n,projectID:r,query:a}=t;return{pathname:`/organizations/${e}/performance/summary/events/`,query:{transaction:n,project:r,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:a.query}}}function d(t){return e=(0,a.ro)(t.query.showTransactions,i.p100),Object.values(i).includes(e)?e:i.p100;var e}function p(t,e){var n,r;const a=l(e),o=null===(n=a[t].sort)||void 0===n?void 0:n.kind,s=null===(r=a[t].sort)||void 0===r?void 0:r.field,i={showTransactions:t};return o&&s&&(i.sort=`${"desc"===o?"-":""}${s}`),i}function u(t){switch(t){case s.K0.OUTLIER:return i.p100;case s.K0.SLOW:return i.p95;default:return}}!function(t){t.p50="p50",t.p75="p75",t.p95="p95",t.p99="p99",t.p100="p100"}(i||(i={}))},"./app/views/performance/trends/changedTransactions.tsx":(t,e,n)=>{n.d(e,{H:()=>X,Z:()=>dt});var r,a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),s=n("../node_modules/react-router/es/index.js"),i=n("./app/components/button.tsx"),l=n("./app/components/charts/styles.tsx"),c=n("./app/components/count.tsx"),d=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),u=n("./app/components/emptyStateWarning.tsx"),m=n("./app/components/forms/controls/radioGroup.tsx"),g=n("./app/components/idBadge/index.tsx"),h=n("./app/components/links/link.tsx"),x=n("./app/components/loadingIndicator.tsx"),f=n("./app/components/menuItem.tsx"),v=n("./app/components/pagination.tsx"),Z=n("./app/components/panels/index.tsx"),y=n("./app/components/questionTooltip.tsx"),w=n("./app/components/radio.tsx"),b=n("./app/components/tooltip.tsx"),_=n("./app/icons/index.tsx"),S=n("./app/locale.tsx"),E=n("./app/styles/overflowEllipsis.tsx"),T=n("./app/styles/space.tsx"),j=n("./app/utils/formatters.tsx"),C=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),q=n("./app/utils/queryString.tsx"),k=n("./app/utils/tokenizeSearch.tsx"),L=n("./app/utils/useApi.tsx"),R=n("./app/utils/withOrganization.tsx"),N=n("./app/utils/withProjects.tsx"),z=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),F=n("./app/views/performance/transactionSummary/utils.tsx"),P=n("./app/views/performance/trends/chart.tsx"),A=n("./app/views/performance/trends/types.tsx"),B=n("./app/views/performance/trends/utils.tsx"),D=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function I(t,e,n){const r=(0,B.j_)(e),a=(0,q.ro)(t.query[r]);if(!n)return;return n.find((t=>`${t.transaction}-${t.project}`===a))||(n.length>0?n[0]:void 0)}function M(t,e){return function(n){const r=(0,B.j_)(e),a={...t.query};n?a[r]=n?`${n.transaction}-${n.project}`:void 0:delete a[r],s.browserHistory.push({pathname:t.pathname,query:a})}}function O(t,e,n,a,o){const i=(0,B.IO)(t,a,o).column,l=(0,q.ro)(t.query.query),c=new k.MY(null!=l?l:""),d=c.getFilterValues(i),p=n===r.GREATER_THAN_EQUALS?">":"<";d&&d.forEach((t=>{(t.startsWith(n)||t.startsWith(p))&&c.removeFilterValue(i,t)})),c.addFilterValues(i,[`${n}${e}`]);const u=c.formatString();s.browserHistory.push({pathname:t.pathname,query:{...t.query,query:String(u).trim()}})}function V(t){const{location:e,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:a,organization:i,projects:l,setError:c}=t,d=(0,L.Z)(),p=t.trendView.clone(),u=function(t){switch(t){case A.ER.IMPROVED:return(0,S.t)("Most Improved Transactions");case A.ER.REGRESSION:return(0,S.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}(n);(0,B.kM)(p,e,n,l);const m=(t=>(e,n,r)=>{const a={};t===A.ER.IMPROVED?a.improvedCursor=e:t===A.ER.REGRESSION&&(a.regressionCursor=e),delete r[(0,B.j_)(t)],s.browserHistory.push({pathname:n,query:{...r,...a}})})(n),g=(0,q.ro)(e.query[B.vt[n]]);return(0,D.tZ)(C.ZP,{eventView:p,orgSlug:i.slug,location:e,trendChangeType:n,cursor:g,limit:5,setError:c,children:s=>{let{isLoading:c,trendsData:g,pageLinks:h}=s;const f=(0,B.CE)(e),Z=(0,B.IO)(e,l,p.project),w=(0,B.RP)(g&&g.events&&g.events.data||[]),b=I(e,n,w),_=(null==g?void 0:g.stats)||{},E=w&&w.slice?w.slice(0,5):[],T=c&&r?r:f.field,j=c&&a?a:Z.column,C=(0,S.t)("This compares the baseline (%s) of the past with the present.",f.legendLabel);return(0,D.BX)(Q,{children:[(0,D.BX)(U,{children:[(0,D.BX)(K,{children:[u,(0,D.tZ)(y.Z,{size:"sm",position:"top",title:C})]}),c?(0,D.tZ)(x.Z,{style:{margin:"237px auto"}}):(0,D.tZ)(o.Fragment,{children:E.length?(0,D.BX)(o.Fragment,{children:[(0,D.tZ)(W,{children:(0,D.tZ)(P.Z,{statsData:_,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:b,isLoading:c,...t})}),E.map(((r,a)=>(0,D.tZ)($,{api:d,currentTrendFunction:T,currentTrendColumn:j,trendView:t.trendView,organization:i,transaction:r,index:a,trendChangeType:n,transactions:E,location:e,projects:l,statsData:_,handleSelectTransaction:M(e,n)},r.transaction)))]}):(0,D.tZ)(tt,{small:!0,children:(0,S.t)("No results")})})]}),(0,D.tZ)(v.Z,{pageLinks:h,onCursor:m})]})}})}function $(t){const{transaction:e,transactions:n,trendChangeType:a,currentTrendFunction:i,currentTrendColumn:l,index:p,location:u,projects:h,handleSelectTransaction:x,trendView:v}=t,Z=B.es[a].default,y=I(u,a,n)===e,E=h.find((t=>{let{slug:n}=t;return n===e.project})),T=e.aggregate_range_2,C=e.aggregate_range_1,L=(0,j.rl)(Math.abs(e.trend_percentage-1),0),R=(0,j.g9)(C/1e3,C<1e3&&C>10?0:2),N=(0,j.g9)(T/1e3,T<1e3&&T>10?0:2),z=(0,S.t)("Over this period, the %s for %s has %s %s from %s to %s",i,l,a===A.ER.IMPROVED?(0,S.t)("decreased"):(0,S.t)("increased"),L,R,N),F=a===A.ER.IMPROVED?C:T,P=a===A.ER.IMPROVED?R:N;return(0,D.BX)(et,{"data-test-id":"trends-list-item-"+a,children:[(0,D.tZ)(nt,{color:Z,children:(0,D.tZ)(b.Z,{title:(0,D.BX)(lt,{children:[(0,D.tZ)("span",{children:(0,S.t)("Total Events")}),(0,D.BX)("span",{children:[(0,D.tZ)(c.Z,{value:e.count_range_1}),(0,D.tZ)(ct,{direction:"right",size:"xs"}),(0,D.tZ)(c.Z,{value:e.count_range_2})]})]}),disableForVisualTest:!0,children:(0,D.tZ)(m.V,{index:p,role:"radio",children:(0,D.tZ)(w.Z,{checked:y,onChange:()=>x(e)})})})}),(0,D.tZ)(G,{...t}),(0,D.tZ)(st,{children:(0,D.tZ)(b.Z,{title:z,children:(0,D.BX)(o.Fragment,{children:[a===A.ER.REGRESSION?"+":"",(0,j.rl)(e.trend_percentage-1,0)]})})}),(0,D.BX)(d.Z,{caret:!1,anchorRight:!0,title:(0,D.tZ)(Y,{size:"xsmall",icon:(0,D.tZ)(_.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,S.t)("Actions")}),children:[(0,D.tZ)(f.Z,{onClick:()=>O(u,F,r.LESS_THAN_EQUALS,h,v.project),children:(0,D.tZ)(J,{children:(0,S.t)("Show ≤ %s",P)})}),(0,D.tZ)(f.Z,{onClick:()=>O(u,F,r.GREATER_THAN_EQUALS,h,v.project),children:(0,D.tZ)(J,{children:(0,S.t)("Show ≥ %s",P)})}),(0,D.tZ)(f.Z,{onClick:()=>function(t,e){const n=(0,q.ro)(t.query.query),r=new k.MY(null!=n?n:"");r.addFilterValues("!transaction",[e]);const a=r.formatString();s.browserHistory.push({pathname:t.pathname,query:{...t.query,query:String(a).trim()}})}(u,e.transaction),children:(0,D.tZ)(J,{children:(0,S.t)("Hide from list")})})]}),(0,D.BX)(at,{children:[E&&(0,D.tZ)(b.Z,{title:e.project,children:(0,D.tZ)(g.Z,{avatarSize:16,project:E,hideName:!0})}),(0,D.tZ)(X,{...t})]}),(0,D.tZ)(it,{color:Z,children:(0,D.tZ)(H,{...t})})]})}!function(t){t.GREATER_THAN_EQUALS=">=",t.LESS_THAN_EQUALS="<="}(r||(r={})),V.displayName="ChangedTransactions",$.displayName="TrendsListItem";const X=t=>{let{transaction:e}=t;const{fromSeconds:n,toSeconds:r,showDigits:a}=(0,B.Kt)(e.aggregate_range_1,e.aggregate_range_2);return(0,D.BX)(ot,{children:[(0,D.tZ)(p.Z,{seconds:n,fixedDigits:a?1:0,abbreviation:!0}),(0,D.tZ)(ct,{direction:"right",size:"xs"}),(0,D.tZ)(p.Z,{seconds:r,fixedDigits:a?1:0,abbreviation:!0})]})};X.displayName="CompareDurations";const H=t=>{let{transaction:e,trendChangeType:n}=t;const{seconds:r,fixedDigits:a,changeLabel:o}=(0,B.wx)(e.trend_difference,n);return(0,D.BX)("span",{children:[(0,D.tZ)(p.Z,{seconds:r,fixedDigits:a,abbreviation:!0})," ",o]})};H.displayName="ValueDelta";const G=t=>{const{organization:e,trendView:n,transaction:r,projects:a,currentTrendFunction:o,currentTrendColumn:s}=t,i=n.clone(),l=(0,B._H)(r,a),c=(0,F.e1)({orgSlug:e.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:l,display:z.D.TREND,trendFunction:o,trendColumn:s});return(0,D.tZ)(rt,{to:c,children:r.transaction})};G.displayName="TransactionSummaryLink";const Q=(0,a.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),U=(0,a.Z)(Z.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),W=(0,a.Z)("div",{target:"e11bn3w113"})("padding:",(0,T.Z)(3),";"),K=(0,a.Z)(l.ws,{target:"e11bn3w112"})("border-radius:",(t=>t.theme.borderRadius),";margin:",(0,T.Z)(2)," ",(0,T.Z)(3),";"),Y=(0,a.Z)(i.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),J=(0,a.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(t=>t.theme.textColor),";"),tt=(0,a.Z)(u.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),et=(0,a.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,T.Z)(1),";border-top:1px solid ",(t=>t.theme.border),";padding:",(0,T.Z)(1)," ",(0,T.Z)(2),";"),nt=(0,a.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(t=>t.color),";}"),rt=(0,a.Z)(h.Z,{target:"e11bn3w16"})("font-size:",(t=>t.theme.fontSizeMedium),";margin-right:",(0,T.Z)(1),";",E.Z,";"),at=(0,a.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(t=>t.theme.fontSizeSmall),";"),ot=(0,a.Z)("span",{target:"e11bn3w14"})("color:",(t=>t.theme.gray300),";margin:0 ",(0,T.Z)(1),";"),st=(0,a.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(t=>t.theme.fontSizeMedium),";"),it=(0,a.Z)("div",{target:"e11bn3w12"})("color:",(t=>t.color),";text-align:right;font-size:",(t=>t.theme.fontSizeSmall),";"),lt=(0,a.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ct=(0,a.Z)(_.CC,{target:"e11bn3w10"})("margin:0 ",(0,T.Z)(1),";"),dt=(0,N.Z)((0,R.Z)(V))},"./app/views/performance/trends/chart.tsx":(t,e,n)=>{n.d(e,{k:()=>v,Z:()=>Z}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),o=n("./app/components/charts/chartZoom.tsx"),s=n("./app/components/charts/lineChart.tsx"),i=n("./app/components/charts/transitionChart.tsx"),l=n("./app/components/charts/transparentLoadingMask.tsx"),c=n("./app/components/organizations/pageFilters/parse.tsx"),d=n("./app/locale.tsx"),p=n("./app/utils/dates.tsx"),u=n("./app/utils/discover/charts.tsx"),m=n("./app/utils/getDynamicText.tsx"),g=n("./app/utils/queryString.tsx"),h=n("./app/views/performance/trends/utils.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(t){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:t}]}}function v(t){var e;let{trendChangeType:n,router:v,statsPeriod:Z,transaction:y,statsData:w,isLoading:b,location:_,start:S,end:E,trendFunctionField:T,disableXAxis:j,disableLegend:C,grid:q,height:k,projects:L,project:R}=t;const N=(0,a.u)(),z=t=>{const{selected:e}=t,a=Object.keys(e).filter((t=>!e[t])),o={..._.query};o[(0,h.P4)(n)]=a;const s={..._,query:o};r.browserHistory.push(s)},F=h.es[n||""],P=w&&null!=y&&y.project&&null!=y&&y.transaction?w[[y.project,y.transaction].join(",")]:void 0,A=null!==(e=null==P?void 0:P.data)&&void 0!==e?e:[],B=(0,h.CE)(_,T),D=(0,h.IO)(_,L,R),I=(0,h.ed)(B.field,D.column),M=function(t,e){return[{seriesName:e||"Current",data:t.map((t=>{let[e,n]=t;return{name:1e3*e,value:n.reduce(((t,e)=>{let{count:n}=e;return t+n}),0)}}))}]}(A,I),{smoothedResults:O,minValue:V,maxValue:$}=(0,h.vq)(M,I),X=S?(0,p.hC)(S):null,H=E?(0,p.hC)(E):null,{utc:G}=(0,c.fK)(_.query),Q=(0,g.qP)(_.query[(0,h.P4)(n)]).reduce(((t,e)=>(t[e]=!1,t)),{}),U=C?{show:!1}:{...f(I),selected:Q},W=b,K=b,Y=Math.max($,(null==y?void 0:y.aggregate_range_2)||0,(null==y?void 0:y.aggregate_range_1)||0),J=Math.min(V,(null==y?void 0:y.aggregate_range_1)||Number.MAX_SAFE_INTEGER,(null==y?void 0:y.aggregate_range_2)||Number.MAX_SAFE_INTEGER),tt=.1*(Y-J),et={tooltip:{valueFormatter:(t,e)=>(0,u.CX)(t,e)},yAxis:{min:Math.max(0,J-tt),max:Y+tt,axisLabel:{color:N.chartLabel,formatter:t=>(0,u.gu)(t,"p50()")}}};return(0,x.tZ)(o.Z,{router:v,period:Z,start:X,end:H,utc:"true"===G,children:t=>{const e=O?O.map((t=>({...t,color:F.default,lineStyle:{opacity:1}}))):[],n=function(t,e,n,r){if(!(r&&e.length&&e[0].data&&e[0].data.length))return[];const a=parseInt(e[0].data[0].name,0),o=parseInt(e[0].data.slice(-1)[0].name,0);if(o<a)return[];const s={data:[],color:t.textColor,markLine:{data:[],label:{},lineStyle:{color:t.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:t.textColor,silent:!0},l={...s,markLine:{...s.markLine},seriesName:"Baseline"},c={...s,markLine:{...s.markLine},seriesName:"Baseline"},p={...s,markLine:{...s.markLine},seriesName:"Period split"},m=.5*(o-a)+a;return l.markLine.data=[[{value:"Past",coord:[a,r.aggregate_range_1]},{coord:[m,r.aggregate_range_1]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Past Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_1,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},c.markLine.data=[[{value:"Present",coord:[m,r.aggregate_range_2]},{coord:[o,r.aggregate_range_2]}]],c.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Present Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_2,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:m}],label:{show:!1},lineStyle:{color:t.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},l.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},c.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[l,c,p]}(N,O||[],0,y);return(0,x.BX)(i.Z,{loading:W,reloading:K,children:[(0,x.tZ)(l.Z,{visible:K}),(0,m.Z)({value:(0,x.tZ)(s.Z,{height:k,...t,...et,onLegendSelectChanged:z,series:[...e,...n],seriesOptions:{showSymbol:!1},legend:U,toolBox:{show:!1},grid:null!=q?q:{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:j?{show:!1}:void 0}),fixed:"Duration Chart"})]})}})}v.displayName="Chart";const Z=(0,r.withRouter)(v)}}]);
//# sourceMappingURL=../sourcemaps/app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-36f0d7.e01fe1c4ba278505108b6f430fc28018.js.map