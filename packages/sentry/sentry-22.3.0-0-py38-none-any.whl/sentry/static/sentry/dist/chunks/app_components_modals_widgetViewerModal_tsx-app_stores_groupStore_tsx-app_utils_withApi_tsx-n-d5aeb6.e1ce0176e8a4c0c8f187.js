(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetViewerModal_tsx-app_stores_groupStore_tsx-app_utils_withApi_tsx-n-d5aeb6"],{"./app/components/gridEditable/sortLink.tsx":(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=i("../node_modules/react/index.js"),n=i("../node_modules/lodash/omit.js"),a=i.n(n),o=i("./app/components/links/link.tsx"),l=i("./app/icons/index.tsx"),d=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends r.Component{renderArrow(){const{direction:e}=this.props;return e?"desc"===e?(0,d.tZ)(h,{size:"xs",direction:"down"}):(0,d.tZ)(h,{size:"xs",direction:"up"}):null}render(){const{align:e,title:t,canSort:i,generateSortLink:s,onClick:r}=this.props,n=s();return n&&i?(0,d.BX)(c,{align:e,to:n,onClick:r,children:[t," ",this.renderArrow()]}):(0,d.tZ)(p,{align:e,children:t})}}u.displayName="SortLink";const c=(0,s.Z)((e=>{const t=a()(e,["align"]);return(0,d.tZ)(o.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,s.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),h=(0,s.Z)(l.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),g=u},"./app/components/modals/widgetViewerModal.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>oe,modalCss:()=>Y});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.string.replace.js"),i("../node_modules/react/index.js")),n=i("../node_modules/react-router/es/index.js"),a=i("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=i("../node_modules/@sentry/utils/esm/string.js"),l=i("../node_modules/lodash/cloneDeep.js"),d=i.n(l),u=i("../node_modules/moment/moment.js"),c=i.n(u),p=i("./app/components/button.tsx"),h=i("./app/components/buttonBar.tsx"),g=i("./app/components/featureBadge.tsx"),m=i("./app/components/forms/selectControl.tsx"),v=i("./app/components/gridEditable/index.tsx"),y=i("./app/components/pagination.tsx"),w=i("./app/components/tooltip.tsx"),x=i("./app/locale.tsx"),f=i("./app/styles/space.tsx"),Z=i("./app/utils.tsx"),S=i("./app/utils/dates.tsx"),b=i("./app/utils/discover/fields.tsx"),E=i("./app/utils/parseLinkHeader.tsx"),R=i("./app/utils/queryString.tsx"),O=i("./app/utils/useApi.tsx"),_=i("./app/utils/withPageFilters.tsx"),q=i("./app/views/dashboardsV2/types.tsx"),j=i("./app/views/dashboardsV2/utils.tsx"),A=i("./app/views/dashboardsV2/widgetCard/issueWidgetQueries.tsx"),C=i("./app/views/dashboardsV2/widgetCard/widgetCardChartContainer.tsx"),T=i("./app/views/dashboardsV2/widgetCard/widgetQueries.tsx"),k=i("./app/components/modals/widgetViewerModal/utils.tsx"),P=i("./app/components/gridEditable/sortLink.tsx"),B=i("./app/components/links/link.tsx"),L=i("./app/utils/dashboards/issueFieldRenderers.tsx"),F=i("./app/utils/discover/eventView.tsx"),I=i("./app/utils/discover/fieldRenderers.tsx"),z=i("./app/utils/discover/urls.tsx"),U=i("./app/views/dashboardsV2/widgetBuilder/issueWidget/fields.tsx"),D=i("./app/views/eventsV2/table/topResultsIndicator.tsx"),V=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const N=e=>{let{location:t,widget:i,tableData:s}=e;return(e,r)=>{const n=null==s?void 0:s.meta,a=(0,b.qG)(e.name,e.type,n),o=(0,L.N)(String(e.key));return(0,V.tZ)(P.Z,{align:a,title:(0,V.tZ)(X,{title:e.name,children:e.name}),direction:i.queries[0].orderby===o?"desc":void 0,canSort:!!o,generateSortLink:()=>({...t,query:{...t.query,[k.R.SORT]:o,[k.R.PAGE]:void 0,[k.R.CURSOR]:void 0}})})}},M=e=>{let{location:t,selection:i,widget:s,tableData:r}=e;return(e,n)=>{const a=(0,j.tT)(s.title,s.queries[0],i,s.displayType),o=null==r?void 0:r.meta,l=(0,b.qG)(e.name,e.type,o),d={field:String(e.key),width:e.width},u=a.sortForField(d,o),c=(0,F.M3)(d,o),p=(0,b.uI)(e.name)?a.getEquations()[(0,b.G5)(e.name)]:e.name;return(0,V.tZ)(P.Z,{align:l,title:(0,V.tZ)(X,{title:p,children:p}),direction:u?u.kind:void 0,canSort:c,generateSortLink:function(){if(!o)return;const e=a.sortOnField(d,o).generateQueryStringObject();return{...t,query:{...t.query,[k.R.SORT]:e.sort,[k.R.PAGE]:void 0,[k.R.CURSOR]:void 0}}}})}},$=e=>{let{location:t,organization:i,widget:s,tableData:n,isFirstPage:a}=e;return(e,o,l,d)=>{var u;const c=String(e.key),p=s.displayType===q.FO.TOP_N;let h;switch(s.widgetType){case q.l9.ISSUE:h=(null!==(u=(0,L.O)(c))&&void 0!==u?u:(0,I.Js)(c,U.$L))(o,{organization:i,location:t});break;case q.l9.DISCOVER:default:if(!n||!n.meta)return o[e.key];h=(0,I.Js)(c,n.meta)(o,{organization:i,location:t});const s=(0,b.LY)(c),r=o[s];if("integer"===n.meta[s]&&(0,Z.ri)(r)&&r>999)return(0,V.tZ)(w.Z,{title:r.toLocaleString(),containerDisplayMode:"block",position:"right",children:h})}return(0,V.BX)(r.Fragment,{children:[p&&a&&l<5&&0===d?(0,V.tZ)(D.Z,{count:5,index:l}):null,h]})}},G=e=>{let{location:t,organization:i,tableData:s,eventView:r}=e;return(e,n,a)=>{if(e)return[(0,V.tZ)(Q,{children:(0,V.tZ)(P.Z,{align:"left",title:(0,x.t)("event id"),direction:void 0,canSort:!1,generateSortLink:()=>{}})},"header-event-id")];let o=n.id;null!=s&&s.meta&&(o=(0,I.Js)("id",null==s?void 0:s.meta)(n,{organization:i,location:t}));const l=(0,z.JE)(n),d=(0,z.eQ)({orgSlug:i.slug,eventSlug:l,eventView:r});return[(0,V.tZ)(w.Z,{title:(0,x.t)("View Event"),children:(0,V.tZ)(B.Z,{"data-test-id":"view-event",to:d,children:o})},`eventlink${a}`)]}},X=(0,s.Z)(w.Z,{target:"e1fqlj201"})({name:"168giuu",styles:"display:initial"}),Q=(0,s.Z)("span",{target:"e1fqlj200"})("color:",(e=>e.theme.subText),";"),H="geo.country_code",W=r.memo(C.b,((e,t)=>e.selection===t.selection&&e.location.query[k.R.QUERY]===t.location.query[k.R.QUERY]&&e.location.query[k.R.SORT]===t.location.query[k.R.SORT]));function J(e){var t,i;const{organization:n,widget:a,selection:l,location:u,Footer:m,Body:y,Header:f,closeModal:_,onEdit:C,router:P,routes:B,params:L}=e,F=a.displayType===q.FO.TABLE,[I,z]=r.useState(l),U=null!==(t=(0,R._q)(u.query[k.R.QUERY]))&&void 0!==t?t:0,D=(0,R.qP)(u.query[k.R.LEGEND]).reduce(((e,t)=>(e[t]=!1,e)),{}),X=null!==(i=(0,R._q)(u.query[k.R.PAGE]))&&void 0!==i?i:0,Q=(0,R.ro)(u.query[k.R.CURSOR]),J=(0,R.ro)(u.query[k.R.SORT]),Y=J?a.queries.map((e=>({...e,orderby:J}))):a.queries,oe=a.displayType===q.FO.TOP_N?{...a,queries:Y}:a,le=(0,O.Z)(),de={...d()({...a,queries:[Y[U]]}),displayType:q.FO.TABLE},{aggregates:ue,columns:ce}=de.queries[0],pe=(0,Z.ri)(de.queries[0].fields)?de.queries[0].fields:[...ce,...ue];a.displayType!==q.FO.WORLD_MAP||ce.includes(H)||(pe.unshift(H),ce.unshift(H));const he=[q.FO.AREA,q.FO.LINE,q.FO.BIG_NUMBER,q.FO.BAR].includes(a.displayType);he&&(de.queries[0].orderby=de.queries[0].orderby||"-timestamp",pe.splice(0,pe.length,"title","event.type","project","user.display","timestamp"),ce.splice(0,pe.length,"title","event.type","project","user.display","timestamp"));const ge=he?[`minmax(${v.zO}px, max-content)`]:[];F||(0,j.Mf)(pe).forEach((e=>{Array.isArray(pe)&&!pe.includes(e)&&pe.unshift(e),(0,b.h1)(e)&&!ue.includes(e)&&ue.unshift(e),(0,b.h1)(e)||ce.includes(e)||ce.unshift(e)}));const me=(0,j.tT)(de.title,de.queries[0],I,de.displayType),ve=me.getColumns(),ye=me.getSorts(),we=Y.map(((e,t)=>{let{name:i,conditions:s}=e;return{label:(0,o.$G)(i||s,120),value:t}})),xe=(0,s.Z)(f,{target:"eteb5ir7"})(K,";"),fe=(0,s.Z)(m,{target:"eteb5ir6"})(ee,";");let Ze,Se;switch(a.widgetType){case q.l9.ISSUE:Ze=(0,x.t)("Open in Issues"),Se=(0,j.hS)(oe,I,n);break;case q.l9.DISCOVER:default:Ze=(0,x.t)("Open in Discover"),Se=(0,j.z1)({...oe,queries:de.queries},I,n)}return(0,V.BX)(r.Fragment,{children:[(0,V.BX)(xe,{closeButton:!0,children:[(0,V.tZ)(w.Z,{title:a.title,showOnlyOnOverflow:!0,children:(0,V.tZ)(ne,{children:a.title})}),(0,V.tZ)(g.Z,{type:"beta"})]}),(0,V.tZ)(y,{children:(0,V.BX)(r.Fragment,{children:[a.displayType!==q.FO.TABLE&&(0,V.tZ)(te,{children:(0,V.tZ)(W,{location:u,router:P,routes:B,params:L,api:le,organization:n,selection:I,widget:oe,onZoom:(e,t)=>{const i=t.getModel(),{startValue:s,endValue:r}=i._payload.batch[0],n=(0,S.v5)(c().utc(s)),a=(0,S.v5)(c().utc(r));z({...I,datetime:{...I.datetime,start:n,end:a,period:null}})},onLegendSelectChanged:e=>{let{selected:t}=e;P.replace({pathname:u.pathname,query:{...u.query,[k.R.LEGEND]:Object.keys(t).filter((e=>!t[e]))}})},legendOptions:{selected:D}})}),a.queries.length>1&&(0,V.BX)(r.Fragment,{children:[(0,V.tZ)(ie,{children:(0,x.t)("This widget was built with multiple queries. Table data can only be displayed for one query at a time.")}),(0,V.tZ)(se,{value:U,options:we,onChange:e=>{P.replace({pathname:u.pathname,query:{...u.query,[k.R.QUERY]:e.value,[k.R.PAGE]:void 0,[k.R.CURSOR]:void 0}})}})]}),(0,V.tZ)(re,{children:a.widgetType===q.l9.ISSUE?(0,V.tZ)(A.Z,{api:le,organization:n,widget:de,selection:I,limit:a.displayType===q.FO.TABLE?20:10,cursor:Q,children:t=>{let{transformedResults:i,loading:s,pageLinks:n}=t;return(0,V.BX)(r.Fragment,{children:[(0,V.tZ)(v.ZP,{isLoading:s,data:i,columnOrder:ve,columnSortBy:ye,grid:{renderHeadCell:N({...e,widget:de}),renderBodyCell:$({...e,widget:de})},location:u}),(0,V.tZ)(ae,{pageLinks:n,onCursor:(e,t,i,s)=>{let r=isNaN(X)?s:X+s,n=e;r<=0&&(n=void 0,r=0),P.replace({pathname:u.pathname,query:{...u.query,[k.R.CURSOR]:n,[k.R.PAGE]:r}})}})]})}}):(0,V.tZ)(T.Z,{api:le,organization:n,widget:de,selection:I,limit:a.displayType===q.FO.TABLE?20:10,pagination:!0,cursor:Q,children:t=>{var i,s;let{tableResults:n,loading:a,pageLinks:o}=t;const l=!!o&&!1===(0,E.Z)(o).previous.results;return(0,V.BX)(r.Fragment,{children:[(0,V.tZ)(v.ZP,{isLoading:a,data:null!==(i=null==n||null===(s=n[0])||void 0===s?void 0:s.data)&&void 0!==i?i:[],columnOrder:ve,columnSortBy:ye,grid:{renderHeadCell:M({...e,widget:de,tableData:null==n?void 0:n[0]}),renderBodyCell:$({...e,tableData:null==n?void 0:n[0],isFirstPage:l}),renderPrependColumns:he?G({...e,eventView:me,tableData:null==n?void 0:n[0]}):void 0,prependColumnWidths:ge},location:u}),(0,V.tZ)(ae,{pageLinks:o,onCursor:e=>{P.replace({pathname:u.pathname,query:{...u.query,[k.R.CURSOR]:e}})}})]})}})})]})}),(0,V.tZ)(fe,{children:(0,V.BX)(h.ZP,{gap:1,children:[C&&a.id&&(0,V.tZ)(p.ZP,{type:"button",onClick:()=>{_(),C()},children:(0,x.t)("Edit Widget")}),(0,V.tZ)(p.ZP,{to:Se,priority:"primary",type:"button",children:Ze})]})})]})}J.displayName="WidgetViewerModal";const Y={name:"14w2blh",styles:"width:100%;max-width:1400px"},K=(0,a.iv)("margin:-",(0,f.Z)(4)," -",(0,f.Z)(4)," 0px -",(0,f.Z)(4),";line-height:normal;display:flex;",""),ee=(0,a.iv)("margin:0px -",(0,f.Z)(4)," -",(0,f.Z)(4),";",""),te=(0,s.Z)("div",{target:"eteb5ir5"})("height:300px;max-height:300px;position:relative;&>div{padding:",(0,f.Z)(1.5)," 0px;}"),ie=(0,s.Z)("div",{target:"eteb5ir4"})("padding:",(0,f.Z)(2)," 0 ",(0,f.Z)(1.5)," 0;color:",(e=>e.theme.gray300),";"),se=(0,s.Z)(m.Z,{target:"eteb5ir3"})("padding-top:10px ",(0,f.Z)(1.5),";"),re=(0,s.Z)("div",{target:"eteb5ir2"})("max-width:1400px;position:relative;margin:",(0,f.Z)(2)," 0;&>div{margin:0;}& td:first-child{padding:",(0,f.Z)(1)," ",(0,f.Z)(2),";}"),ne=(0,s.Z)("h4",{target:"eteb5ir1"})({name:"sqm42b",styles:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden"}),ae=(0,s.Z)(y.Z,{target:"eteb5ir0"})("padding-top:",(0,f.Z)(2),";"),oe=(0,n.withRouter)((0,_.Z)(J))},"./app/components/pagination.tsx":(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=i("../node_modules/react-router/es/index.js"),n=i("./app/components/button.tsx"),a=i("./app/components/buttonBar.tsx"),o=i("./app/icons/index.tsx"),l=i("./app/locale.tsx"),d=i("./app/styles/space.tsx"),u=i("./app/utils/parseLinkHeader.tsx"),c=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=(e,t,i,s)=>r.browserHistory.push({pathname:t,query:{...i,cursor:e}}),h=e=>{var t,i;let{to:s,location:r,className:d,onCursor:h=p,pageLinks:v,size:y="small",caption:w,disabled:x=!1}=e;if(!v)return null;const f=null!=s?s:r.pathname,Z=r.query,S=(0,u.Z)(v),b=x||!1===(null===(t=S.previous)||void 0===t?void 0:t.results),E=x||!1===(null===(i=S.next)||void 0===i?void 0:i.results);return(0,c.BX)(g,{className:d,children:[w&&(0,c.tZ)(m,{children:w}),(0,c.BX)(a.ZP,{merged:!0,children:[(0,c.tZ)(n.ZP,{icon:(0,c.tZ)(o.g6,{direction:"left",size:"sm"}),"aria-label":(0,l.t)("Previous"),size:y,disabled:b,onClick:()=>{var e;return null==h?void 0:h(null===(e=S.previous)||void 0===e?void 0:e.cursor,f,Z,-1)}}),(0,c.tZ)(n.ZP,{icon:(0,c.tZ)(o.g6,{direction:"right",size:"sm"}),"aria-label":(0,l.t)("Next"),size:y,disabled:E,onClick:()=>{var e;return null==h?void 0:h(null===(e=S.next)||void 0===e?void 0:e.cursor,f,Z,1)}})]})]})};h.displayName="Pagination";const g=(0,s.Z)("div",{target:"ewgwd3b1"})("display:flex;align-items:center;justify-content:flex-end;margin:",(0,d.Z)(3)," 0 0 0;"),m=(0,s.Z)("span",{target:"ewgwd3b0"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,d.Z)(2),";"),v=(0,r.withRouter)(h)},"./app/stores/groupStore.tsx":(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var s=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/lodash/isArray.js")),n=i.n(r),a=i("../node_modules/lodash/isUndefined.js"),o=i.n(a),l=i("../node_modules/reflux/src/index.js"),d=i.n(l),u=i("./app/actions/groupActions.tsx"),c=i("./app/locale.tsx"),p=i("./app/stores/indicatorStore.tsx");function h(e,t){p.Z.addMessage(e,t,{duration:4e3})}class g{constructor(){(0,s.Z)(this,"changes",[])}getForItem(e){return this.changes.filter((t=>t[1]===e))}push(e,t,i){this.changes.push([e,t,i])}remove(e,t){this.changes=this.changes.filter((i=>i[0]!==e||i[1]!==t))}forEach(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changes.forEach.apply(this.changes,t)}}const m={listenables:[u.Z],pendingChanges:new g,items:[],statuses:{},init(){this.reset()},reset(){this.pendingChanges=new g,this.items=[],this.statuses={}},loadInitialData(e){this.reset();const t=new Set;e.forEach((e=>{t.add(e.id),this.items.push(e)})),this.trigger(t)},add(e){n()(e)||(e=[e]);const t={},i=new Set;e.forEach((e=>{t[e.id]=e,i.add(e.id)})),this.items.forEach(((e,i)=>{t[e.id]&&(this.items[i]={...e,...t[e.id]},delete t[e.id])}));for(const e in t)this.items.push(t[e]);this.trigger(i)},remove(e){this.items=this.items.filter((t=>!e.includes(t.id))),this.trigger(new Set(e))},addStatus(e,t){o()(this.statuses[e])&&(this.statuses[e]={}),this.statuses[e][t]=!0},clearStatus(e,t){o()(this.statuses[e])||(this.statuses[e][t]=!1)},hasStatus(e,t){return!o()(this.statuses[e])&&(this.statuses[e][t]||!1)},indexOfActivity(e,t){const i=this.get(e);if(!i)return-1;for(let e=0;e<i.activity.length;e++)if(i.activity[e].id===t)return e;return-1},addActivity(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const s=this.get(e);s&&(-1===i?s.activity.unshift(t):s.activity.splice(i,0,t),"note"===t.type&&s.numComments++,this.trigger(new Set([e])))},updateActivity(e,t,i){const s=this.get(e);if(!s)return;const r=this.indexOfActivity(e,t);-1!==r&&(s.activity[r].data=Object.assign(s.activity[r].data,i),this.trigger(new Set([s.id])))},removeActivity(e,t){const i=this.get(e);if(!i)return-1;const s=this.indexOfActivity(i.id,t);return-1===s?-1:("note"===i.activity.splice(s,1)[0].type&&i.numComments--,this.trigger(new Set([i.id])),s)},get(e){const t=[];this.pendingChanges.forEach((i=>{i.id===e&&t.push(i)}));for(let i=0;i<this.items.length;i++)if(this.items[i].id===e){let e=this.items[i];if(t.length){e={...e};for(let i=0;i<t.length;i++)e={...e,...t[i].params}}return e}},getAllItemIds(){return this.items.map((e=>e.id))},getAllItems(){const e={};return this.pendingChanges.forEach((t=>{o()(e[t.id])&&(e[t.id]=[]),e[t.id].push(t)})),this.items.map((t=>{let i=t;return o()(e[t.id])||(i={...i},e[t.id].forEach((e=>{i={...i,...e.params}}))),i}))},onAssignTo(e,t,i){this.addStatus(t,"assignTo"),this.trigger(new Set([t]))},onAssignToError(e,t,i){this.clearStatus(t,"assignTo"),h((0,c.t)("Unable to change assignee. Please try again."),"error")},onAssignToSuccess(e,t,i){const s=this.get(t);s&&(s.assignedTo=i.assignedTo,this.clearStatus(t,"assignTo"),this.trigger(new Set([t])))},onDelete(e,t){(t=this._itemIdsOrAll(t)).forEach((e=>{this.addStatus(e,"delete")})),this.trigger(new Set(t))},onDeleteError(e,t,i){h((0,c.t)("Unable to delete events. Please try again."),"error"),t&&(t.forEach((e=>{this.clearStatus(e,"delete")})),this.trigger(new Set(t)))},onDeleteSuccess(e,t,i){t=this._itemIdsOrAll(t);const s=new Set(t);t.forEach((e=>{delete this.statuses[e],this.clearStatus(e,"delete")})),this.items=this.items.filter((e=>!s.has(e.id))),h((0,c.t)("The selected events have been scheduled for deletion."),"success"),this.trigger(new Set(t))},onDiscard(e,t){this.addStatus(t,"discard"),this.trigger(new Set([t]))},onDiscardError(e,t,i){this.clearStatus(t,"discard"),h((0,c.t)("Unable to discard event. Please try again."),"error"),this.trigger(new Set([t]))},onDiscardSuccess(e,t,i){delete this.statuses[t],this.clearStatus(t,"discard"),this.items=this.items.filter((e=>e.id!==t)),h((0,c.t)("Similar events will be filtered and discarded."),"success"),this.trigger(new Set([t]))},onMerge(e,t){(t=this._itemIdsOrAll(t)).forEach((e=>{this.addStatus(e,"merge")})),this.trigger(new Set(t))},onMergeError(e,t,i){(t=this._itemIdsOrAll(t)).forEach((e=>{this.clearStatus(e,"merge")})),h((0,c.t)("Unable to merge events. Please try again."),"error"),this.trigger(new Set(t))},onMergeSuccess(e,t,i){(t=this._itemIdsOrAll(t)).forEach((e=>{this.clearStatus(e,"merge")}));const s=new Set(t);this.items=this.items.filter((e=>!s.has(e.id)||i&&i.merge&&e.id===i.merge.parent)),h((0,c.t)("The selected events have been scheduled for merge."),"success"),this.trigger(new Set(t))},_itemIdsOrAll(e){return o()(e)&&(e=this.items.map((e=>e.id))),e},onUpdate(e,t,i){(t=this._itemIdsOrAll(t)).forEach((t=>{this.addStatus(t,"update"),this.pendingChanges.push(e,t,i)})),this.trigger(new Set(t))},onUpdateError(e,t,i,s){t=this._itemIdsOrAll(t),this.pendingChanges.remove(e),t.forEach((e=>{this.clearStatus(e,"update")})),s||h((0,c.t)("Unable to update events. Please try again."),"error"),this.trigger(new Set(t))},onUpdateSuccess(e,t,i){t=this._itemIdsOrAll(t),this.items.forEach(((e,s)=>{-1!==t.indexOf(e.id)&&(this.items[s]={...e,...i},this.clearStatus(e.id,"update"))})),this.pendingChanges.remove(e),this.trigger(new Set(t))},onPopulateStats(e,t){const i=t.reduce(((e,t)=>(e[t.id]=t,e)),{});this.items.forEach(((t,s)=>{e.includes(t.id)&&(this.items[s]={...t,...i[t.id]})})),this.trigger(new Set(this.items.map((e=>e.id))))},onPopulateReleases(e,t){this.items.forEach(((i,s)=>{i.id===e&&(this.items[s]={...i,...t})})),this.trigger(new Set([e]))}},v=d().createStore(m)},"./app/utils/discover/urls.tsx":(e,t,i)=>{"use strict";function s(e){const t=e.id||e.latest_event;return`${e.project||e["project.name"]}:${t}`}function r(e){let{eventSlug:t,orgSlug:i}=e;return`/organizations/${i}/discover/${t}/`}function n(e){let{orgSlug:t,eventSlug:i,eventView:s}=e;return{pathname:r({orgSlug:t,eventSlug:i}),query:s.generateQueryStringObject()}}function a(e){return e.features.includes("discover-query")?`/organizations/${e.slug}/discover/queries/`:`/organizations/${e.slug}/discover/results/`}i.d(t,{JE:()=>s,lS:()=>r,eQ:()=>n,zR:()=>a})},"./app/utils/useApi.tsx":(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var s=i("../node_modules/react/index.js"),r=i("./app/api.tsx");const n=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=(0,s.useRef)();void 0===i.current&&void 0===t&&(i.current=new r.KU);const n=null!=t?t:i.current;function a(){!e&&n.clear()}return(0,s.useEffect)((()=>a),[]),n}},"./app/utils/withApi.tsx":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i("./app/utils/getDisplayName.tsx"),r=i("./app/utils/useApi.tsx"),n=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=i=>{let{api:s,...a}=i;const o=(0,r.Z)({api:s,...t});return(0,n.tZ)(e,{...a,api:o})};return i.displayName=`withApi(${(0,s.Z)(e)})`,i}},"../node_modules/lodash/isInteger.js":(e,t,i)=>{var s=i("../node_modules/lodash/toInteger.js");e.exports=function(e){return"number"==typeof e&&e==s(e)}},"../node_modules/lodash/isNil.js":e=>{e.exports=function(e){return null==e}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetViewerModal_tsx-app_stores_groupStore_tsx-app_utils_withApi_tsx-n-d5aeb6.2a3caccbafd03c3b3856998e6e83428f.js.map