"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_create_tsx"],{"./app/views/alerts/create.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),n=s("./app/components/layouts/thirds.tsx"),l=s("./app/components/loadingIndicator.tsx"),d=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),c=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),m=s("./app/utils/discover/eventView.tsx"),g=s("./app/utils/guid.tsx"),h=s("./app/utils/teams.tsx"),v=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),w=s("./app/utils/analytics.tsx"),x=s("./app/views/alerts/incidentRules/constants.tsx"),j=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){var t;const{project:s,eventView:r,wizardTemplate:a,sessionId:i,userTeamIds:o,...n}=e,l=r?(0,x.H9)(r):a?(0,x.Q6)(a):(0,x.ep)(),d=new Set(s.teams.map((e=>{let{id:t}=e;return t}))),p=null!==(t=o.find((e=>d.has(e))))&&void 0!==t?t:null;return l.owner=p&&`team:${p}`,(0,y.tZ)(j.Z,{onSubmitSuccess:function(t){const{router:s,project:r}=e,{orgId:a}=e.params,i=t?t.id:void 0;w.oF.endTransaction({name:"saveAlertRule"}),s.push(i?{pathname:`/organizations/${a}/alerts/rules/details/${i}/`}:{pathname:`/organizations/${a}/alerts/rules/`,query:{project:r.id}})},rule:{...l,projects:[s.slug]},sessionId:i,project:s,userTeamIds:o,...n})}Z.displayName="IncidentRulesCreate";const b=Z;var T=s("./app/views/alerts/issueRuleEditor/index.tsx"),I=s("./app/views/alerts/wizard/options.tsx"),_=s("./app/views/alerts/wizard/utils.tsx");class z extends i.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",this.getInitialState()),(0,r.Z)(this,"sessionId",(0,g.E)())}getInitialState(){var e;const{organization:t,location:s,project:r}=this.props,{createFromDiscover:a,createFromWizard:i,aggregate:n,dataset:l,eventTypes:d}=null!==(e=null==s?void 0:s.query)&&void 0!==e?e:{};let p="issue";return a?p="metric":i?p=n&&l&&d?"metric":"issue":o.browserHistory.replace(`/organizations/${t.slug}/alerts/${r.slug}/wizard`),{alertType:p}}componentDidMount(){const{organization:e,project:t}=this.props;(0,c.Z)("new_alert_rule.viewed",{organization:e,project_id:t.id,session_id:this.sessionId,alert_type:this.state.alertType})}render(){var e;const{hasMetricAlerts:t,organization:s,project:r,params:{projectId:a},location:o,routes:u}=this.props,{alertType:c}=this.state,{aggregate:g,dataset:w,eventTypes:x,createFromWizard:j,createFromDiscover:Z}=null!==(e=null==o?void 0:o.query)&&void 0!==e?e:{},z={aggregate:g,dataset:w,eventTypes:x},F=Z?m.ZP.fromLocation(o):void 0;let $;j&&"metric"===c&&($=z?(0,_.k)(z):"issues");const k=(0,p.t)("New Alert Rule");return(0,y.BX)(i.Fragment,{children:[(0,y.tZ)(d.Z,{title:k,projectSlug:a}),(0,y.tZ)(n.h4,{children:(0,y.BX)(f,{children:[(0,y.tZ)(v.Z,{orgSlug:s.slug,alertName:(0,p.t)("Set Conditions"),title:$?(0,p.t)("Select Alert"):k,projectSlug:a,routes:u,location:o,canChangeProject:!0}),(0,y.tZ)(n.Dx,{children:$?`${(0,p.t)("Set Conditions for")} ${I.gb[$]}`:k})]})}),(0,y.tZ)(S,{children:(0,y.tZ)(C,{fullWidth:!0,children:(0,y.tZ)(h.Z,{provideUserTeams:!0,children:e=>{let{teams:s,initiallyLoaded:a}=e;return a?(0,y.BX)(i.Fragment,{children:[(!t||"issue"===c)&&(0,y.tZ)(T.Z,{...this.props,project:r,userTeamIds:s.map((e=>{let{id:t}=e;return t}))}),t&&"metric"===c&&(0,y.tZ)(b,{...this.props,eventView:F,wizardTemplate:z,sessionId:this.sessionId,project:r,isCustomMetric:"custom"===$,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,y.tZ)(l.Z,{})}})})})]})}}z.displayName="Create";const S=(0,a.Z)(n.uT,{target:"ew02uqt2"})("margin-bottom:-",(0,u.Z)(3),";"),C=(0,a.Z)(n.or,{target:"ew02uqt1"})({name:"1rxb0gn",styles:"max-width:1000px"}),f=(0,a.Z)(n.oB,{target:"ew02uqt0"})({name:"1h8nup8",styles:"overflow:visible"}),F=z}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_create_tsx.5051d25d365f58a2b081e5d84bc19cdf.js.map