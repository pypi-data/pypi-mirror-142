"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_genericDiscoverQuery_tsx-app_views_eventsV2_eventDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const r="13px",o=(0,n.Z)("span",{target:"e145dcfe0"})("padding:0;position:relative;width:",(e=>e.size||r),";height:",(e=>e.size||r),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/react/index.js"),s("./app/components/events/errorLevel.tsx")),o=s("./app/styles/overflowEllipsis.tsx"),i=s("./app/styles/space.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{let{className:t,level:s,levelIndicatorSize:n,message:r,annotations:o}=e;return(0,a.BX)("div",{className:t,children:[s&&(0,a.tZ)(d,{size:n,level:s,children:s}),r&&(0,a.tZ)(c,{children:r}),o]})};l.displayName="BaseEventMessage";const p=(0,n.Z)(l,{target:"e1rp796r2"})({name:"1go2o7p",styles:"display:flex;align-items:center;position:relative;line-height:1.2;overflow:hidden"}),d=(0,n.Z)(r.Z,{target:"e1rp796r1"})("margin-right:",(0,i.Z)(1),";"),c=(0,n.Z)("span",{target:"e1rp796r0"})(o.Z," width:auto;max-height:38px;"),u=p},"./app/components/seenByList.tsx":(e,t,s)=>{s.d(t,{Z:()=>b});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),o=s("../node_modules/classnames/index.js"),i=s.n(o),a=s("../node_modules/moment/moment.js"),l=s.n(a),p=s("./app/components/avatar/avatarList.tsx"),d=s("./app/components/tooltip.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),m=s("./app/stores/configStore.tsx"),g=s("./app/utils/formatters.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=e=>{let{avatarSize:t=28,seenBy:s=[],iconTooltip:n=(0,u.t)("People who have viewed this"),maxVisibleAvatars:o=10,iconPosition:a="left",className:v}=e;const b=m.Z.get("user"),y=s.filter((e=>b.id!==e.id));return 0===y.length?null:(0,h.BX)(x,{iconPosition:a,className:i()("seen-by",v),children:[(0,h.tZ)(p.Z,{users:y,avatarSize:t,maxVisibleAvatars:o,renderTooltip:e=>(0,h.BX)(r.Fragment,{children:[(0,g.He)(e),(0,h.tZ)("br",{}),l()(e.lastSeen).format("LL")]})}),(0,h.tZ)(Z,{iconPosition:a,children:(0,h.tZ)(d.Z,{title:n,skipWrapper:!0,children:(0,h.tZ)(c.fn,{size:"sm",color:"subText"})})})]})};v.displayName="SeenByList";const x=(0,n.Z)("div",{target:"e1ayiung1"})("display:flex;margin-top:15px;float:right;",(e=>"left"===e.iconPosition?"flex-direction: row-reverse":""),";"),Z=(0,n.Z)("div",{target:"e1ayiung0"})("display:flex;align-items:center;background-color:transparent;color:",(e=>e.theme.textColor),";height:28px;width:24px;text-align:center;",(e=>"left"===e.iconPosition?"margin-right: 10px":""),";"),b=v},"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,s)=>{s.d(t,{AA:()=>u,ZP:()=>m});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/locale.tsx"),i=s("./app/utils/discover/eventView.tsx"),a=s("./app/utils/performance/contexts/performanceEventViewContext.tsx"),l=s("./app/utils/useOrganization.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends r.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null}),(0,n.Z)(this,"_shouldRefetchData",(e=>{const t=this.getPayload(this.props),s=this.getPayload(e);return!(0,i.ze)(t,s)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,n.Z)(this,"fetchData",(async()=>{const{api:e,beforeFetch:t,afterFetch:s,didFetch:n,eventView:r,orgSlug:i,route:a,setError:l}=this.props;if(!r.isValid())return;const p=`/organizations/${i}/${a}/`,d=Symbol("tableFetchID"),c=this.getPayload(this.props);this.setState({isLoading:!0,tableFetchID:d}),null==l||l(void 0),null==t||t(e),e.clear();try{const[t,,r]=await u(e,p,c);if(this.state.tableFetchID!==d)return;const o=s?s(t,this.props):t;null==n||n(o),this.setState((e=>{var t;return{isLoading:!1,tableFetchID:void 0,error:null,pageLinks:null!==(t=null==r?void 0:r.getResponseHeader("Link"))&&void 0!==t?t:e.pageLinks,tableData:o}}))}catch(e){var m;const t=(null==e||null===(m=e.responseJSON)||void 0===m?void 0:m.detail)||(0,o.t)("An unknown error occurred.");this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),l&&l(t)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),s=!1===e.eventView.isValid()&&this.props.eventView.isValid(),n=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||s||n)&&this.fetchData()}getPayload(e){var t;const{cursor:s,limit:n,noPagination:r,referrer:o}=e,i=this.props.getRequestPayload?this.props.getRequestPayload(e):e.eventView.getEventsAPIPayload(e.location);return s&&(i.cursor=s),n&&(i.per_page=n),r&&(i.noPagination=r),o&&(i.referrer=o),Object.assign(i,null!==(t=e.queryExtras)&&void 0!==t?t:{}),i}render(){const{isLoading:e,error:t,tableData:s,pageLinks:n}=this.state,r={isLoading:e,error:t,tableData:s,pageLinks:n},o=this.props.children;return null==o?void 0:o(r)}}function c(e){var t,s;const n=null!==(t=e.orgSlug)&&void 0!==t?t:(0,l.Z)().slug,r=null!==(s=e.eventView)&&void 0!==s?s:(0,a.wj)(),o={...e,orgSlug:n,eventView:r};return(0,p.tZ)(d,{...o})}async function u(e,t,s){return e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...s}})}d.displayName="_GenericDiscoverQuery",c.displayName="GenericDiscoverQuery";const m=c},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,s)=>{s.d(t,{bq:()=>r,wj:()=>i}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("./app/utils/performance/contexts/utils.tsx");const[r,o]=(0,n.n)({name:"PerformanceEventViewContext"});function i(){return o().eventView}},"./app/utils/performance/contexts/utils.tsx":(e,t,s)=>{s.d(t,{n:()=>r});var n=s("../node_modules/react/index.js");function r(e){const{strict:t=!0,errorMessage:s=`useContext for "${e.name}" must be inside a Provider with a value`,name:r}=e,o=n.createContext(void 0);return o.displayName=r,[o.Provider,function(){const e=n.useContext(o);if(!e&&t)throw new Error(s);return e},o]}},"./app/views/eventsV2/breadcrumb.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),o=s("./app/components/breadcrumbs.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils/discover/urls.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends r.Component{getCrumbs(){const e=[],{eventView:t,event:s,organization:n,location:r}=this.props,o=n.features.includes("discover-query")?{pathname:(0,a.zR)(n),query:{...r.query,...t.generateBlankQueryStringObject(),...t.getPageFiltersQuery()}}:null;return e.push({to:o,label:(0,i.t)("Discover")}),t&&t.isValid()&&e.push({to:t.getResultsViewUrlTarget(n.slug),label:t.name||""}),s&&e.push({label:(0,i.t)("Event Detail")}),e}render(){return(0,l.tZ)(o.Z,{crumbs:this.getCrumbs()})}}p.displayName="DiscoverBreadcrumb",(0,n.Z)(p,"defaultProps",{event:void 0});const d=p},"./app/views/eventsV2/eventDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>fe});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/components/noProjectMessage.tsx"),a=s("./app/components/sentryDocumentTitle.tsx"),l=s("./app/locale.tsx"),p=s("./app/styles/organization.tsx"),d=s("./app/utils/discover/eventView.tsx"),c=s("./app/utils/withOrganization.tsx"),u=s("./app/components/acl/feature.tsx"),m=s("./app/components/asyncComponent.tsx"),g=s("./app/components/button.tsx"),h=s("./app/components/buttonBar.tsx"),v=s("./app/components/errors/notFound.tsx"),x=s("./app/components/eventOrGroupTitle.tsx"),Z=s("./app/components/events/eventEntries.tsx"),b=s("./app/components/events/eventMessage.tsx"),y=s("./app/components/events/eventVitals.tsx"),f=s("./app/components/events/interfaces/spans/context.tsx"),w=s("./app/components/fileSize.tsx"),j=s("./app/components/layouts/thirds.tsx"),S=s("./app/components/loadingError.tsx"),D=s("./app/components/loadingIndicator.tsx"),z=s("./app/components/tagsTable.tsx"),V=s("./app/icons/index.tsx"),_=s("./app/styles/space.tsx"),k=s("./app/utils/analytics.tsx"),P=s("./app/utils/discover/fields.tsx"),B=s("./app/utils/discover/urls.tsx"),I=s("./app/utils/events.tsx"),E=s("./app/utils/performance/quickTrace/quickTraceContext.tsx"),T=s("./app/utils/performance/quickTrace/quickTraceQuery.tsx"),C=s("./app/utils/performance/quickTrace/traceMetaQuery.tsx"),L=s("./app/utils/performance/quickTrace/utils.tsx"),q=s("./app/utils/projects.tsx"),F=s("./app/views/performance/transactionDetails/eventMetas.tsx"),N=s("./app/views/performance/transactionSummary/utils.tsx"),X=s("./app/views/eventsV2/breadcrumb.tsx"),O=s("./app/views/eventsV2/utils.tsx"),$=s("./app/components/alert.tsx"),R=s("./app/components/charts/styles.tsx"),A=s("./app/components/timeSince.tsx"),M=s("./app/styles/overflowEllipsis.tsx"),Q=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const G=e=>{let{lastSeen:t,firstSeen:s}=e;return(0,Q.tZ)(U,{children:(0,Q.BX)(H,{children:[t&&(0,Q.BX)(o.Fragment,{children:[(0,Q.tZ)(J,{size:"11px"}),(0,Q.tZ)(A.Z,{date:t,suffix:(0,l.t)("ago")})]}),s&&t&&(0,Q.tZ)("span",{className:"hidden-xs hidden-sm",children:" — "}),s&&(0,Q.tZ)(A.Z,{date:s,suffix:(0,l.t)("old"),className:"hidden-xs hidden-sm"})]})})};G.displayName="Times";const U=(0,r.Z)("div",{target:"e1pb87w32"})({name:"bk4x30",styles:"flex-shrink:1;min-width:0"}),H=(0,r.Z)("div",{target:"e1pb87w31"})(M.Z,"display:flex;align-items:center;"),J=(0,r.Z)(V.jo,{target:"e1pb87w30"})("margin-right:",(0,_.Z)(.5),";"),W=G;var K=s("./app/components/idBadge/projectBadge.tsx"),Y=s("./app/components/links/link.tsx"),ee=s("./app/components/placeholder.tsx"),te=s("./app/components/seenByList.tsx"),se=s("./app/components/shortId.tsx"),ne=s("./app/components/stream/groupChart.tsx");class re extends m.Z{getEndpoints(){const{groupId:e}=this.props;return[["group",`/issues/${e}/`]]}renderLoading(){return(0,Q.tZ)(ee.Z,{height:"120px",bottomGutter:2})}renderError(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{errors:s}=this.state;return Object.values(s).find((e=>e&&404===e.status))?(0,Q.tZ)($.Z,{type:"warning",icon:(0,Q.tZ)(V.FC,{size:"md"}),children:(0,l.t)("The linked issue cannot be found. It may have been deleted, or merged.")}):super.renderError(e,t)}renderBody(){const{eventId:e}=this.props,{group:t}=this.state,s=`${t.permalink}events/${e}/`;return(0,Q.BX)(oe,{children:[(0,Q.tZ)(R.OT,{children:(0,l.t)("Event Issue")}),(0,Q.BX)(ie,{children:[(0,Q.BX)(ae,{children:[(0,Q.tZ)(le,{to:s,"data-test-id":"linked-issue",children:(0,Q.tZ)(ce,{shortId:t.shortId,avatar:(0,Q.tZ)(K.Z,{project:t.project,avatarSize:16,hideName:!0,disableLink:!0})})}),(0,Q.tZ)(de,{seenBy:t.seenBy,maxVisibleAvatars:5})]}),(0,Q.tZ)(pe,{children:(0,Q.tZ)(ne.Z,{statsPeriod:"30d",data:t,height:56})}),(0,Q.tZ)(ue,{children:(0,Q.tZ)(W,{lastSeen:t.lastSeen,firstSeen:t.firstSeen})})]})]})}}const oe=(0,r.Z)("div",{target:"e1wtoeov7"})("margin-bottom:",(0,_.Z)(4),";"),ie=(0,r.Z)("div",{target:"e1wtoeov6"})("border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";"),ae=(0,r.Z)("div",{target:"e1wtoeov5"})("display:flex;align-items:center;justify-content:space-between;padding:",(0,_.Z)(1),";"),le=(0,r.Z)(Y.Z,{target:"e1wtoeov4"})({name:"11g6mpt",styles:"justify-content:flex-start"}),pe=(0,r.Z)("div",{target:"e1wtoeov3"})("background:",(e=>e.theme.backgroundSecondary),";padding-top:",(0,_.Z)(1),";"),de=(0,r.Z)(te.Z,{target:"e1wtoeov2"})({name:"ti75j2",styles:"margin:0"}),ce=(0,r.Z)(se.Z,{target:"e1wtoeov1"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";"),ue=(0,r.Z)("div",{target:"e1wtoeov0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeSmall),";padding:",(0,_.Z)(.5)," ",(0,_.Z)(1),";"),me=re;class ge extends m.Z{constructor(){super(...arguments),(0,n.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{},event:void 0,isSidebarVisible:!0}),(0,n.Z)(this,"toggleSidebar",(()=>{this.setState({isSidebarVisible:!this.state.isSidebarVisible})})),(0,n.Z)(this,"generateTagUrl",(e=>{const{eventView:t,organization:s}=this.props,{event:n}=this.state;if(!n)return"";const r={...n};r.id&&delete r.id;const o=(0,P.ZC)(e.key);return(0,O.Bn)(t,{[o]:e.value},r).getResultsViewUrlTarget(s.slug)})),(0,n.Z)(this,"getEventSlug",(()=>{const{eventSlug:e}=this.props.params;return"string"==typeof e?e.trim():""}))}getEndpoints(){const{organization:e,params:t,location:s,eventView:n}=this.props,{eventSlug:r}=t,o=n.getEventsAPIPayload(s);return o.field=[],[["event",`/organizations/${e.slug}/events/${r}/`,{query:o}]]}get projectId(){return this.props.eventSlug.split(":")[0]}renderBody(){const{event:e}=this.state;return e?this.renderContent(e):(0,Q.tZ)(v.Z,{})}renderContent(e){var t;const{organization:s,location:n,eventView:r,route:i,router:a}=this.props,{isSidebarVisible:p}=this.state;(0,k.ec)({eventKey:"discover_v2.event_details",eventName:"Discoverv2: Opened Event Details",event_type:e.type,organization_id:parseInt(s.id,10)});const d=null===(t=e.tags.find((e=>"transaction"===e.key)))||void 0===t?void 0:t.value,c="transaction"===e.type&&d?(0,N.e1)({orgSlug:s.slug,transaction:d,projectID:e.projectID,query:n.query}):null,m=`/api/0/projects/${s.slug}/${this.projectId}/events/${e.eventID}/json/`,v=(t,d)=>{var v;return(0,Q.BX)(o.Fragment,{children:[(0,Q.BX)(j.h4,{children:[(0,Q.BX)(j.oB,{children:[(0,Q.tZ)(X.Z,{eventView:r,event:e,organization:s,location:n}),(0,Q.tZ)(he,{event:e})]}),(0,Q.tZ)(j.kP,{children:(0,Q.BX)(h.ZP,{gap:1,children:[(0,Q.tZ)(g.ZP,{onClick:this.toggleSidebar,children:p?"Hide Details":"Show Details"}),(0,Q.BX)(g.ZP,{icon:(0,Q.tZ)(V.V$,{}),href:m,external:!0,children:[(0,l.t)("JSON")," (",(0,Q.tZ)(w.Z,{bytes:e.size}),")"]}),c&&(0,Q.tZ)(u.Z,{organization:s,features:["performance-view"],children:e=>{let{hasFeature:t}=e;return(0,Q.tZ)(g.ZP,{disabled:!t,priority:"primary",to:c,children:(0,l.t)("Go to Summary")})}})]})})]}),(0,Q.BX)(j.uT,{children:[(0,Q.tZ)(j.or,{fullWidth:!0,children:(0,Q.tZ)(F.Z,{quickTrace:null!=t?t:null,meta:null!==(v=null==d?void 0:d.meta)&&void 0!==v?v:null,event:e,organization:s,projectId:this.projectId,location:n,errorDest:"discover",transactionDest:"discover"})}),(0,Q.tZ)(j.or,{fullWidth:!p,children:(0,Q.tZ)(q.Z,{orgId:s.slug,slugs:[this.projectId],children:o=>{let{projects:l,initiallyLoaded:p}=o;return p?(0,Q.tZ)(f.z,{value:{getViewChildTransactionTarget:e=>({pathname:(0,B.lS)({eventSlug:e.eventSlug,orgSlug:s.slug}),query:r.generateQueryStringObject()})},children:(0,Q.tZ)(E.z,{value:t,children:(0,Q.tZ)(Z.j,{organization:s,event:e,project:l[0],location:n,showExampleCommit:!1,showTagSummary:!1,api:this.api,router:a,route:i,isBorderless:!0})})}):(0,Q.tZ)(D.Z,{})}})}),p&&(0,Q.BX)(j.MF,{children:[(0,Q.tZ)(y.Z,{event:e}),e.groupID&&(0,Q.tZ)(me,{groupId:e.groupID,eventId:e.eventID}),(0,Q.tZ)(z.Z,{generateUrl:this.generateTagUrl,event:e,query:r.query})]})]})]})};if(s.features.includes("performance-view")){var x,b,S;const t=null!==(x=null===(b=e.contexts)||void 0===b||null===(S=b.trace)||void 0===S?void 0:S.trace_id)&&void 0!==x?x:"",{start:r,end:o}=(0,L.$J)(e);return(0,Q.tZ)(C.Z,{location:n,orgSlug:s.slug,traceId:t,start:r,end:o,children:t=>(0,Q.tZ)(T.Z,{event:e,location:n,orgSlug:s.slug,children:e=>v(e,t)})})}return v()}renderError(e){const t=Object.values(this.state.errors).find((e=>e&&404===e.status)),s=Object.values(this.state.errors).find((e=>e&&403===e.status));return t?(0,Q.tZ)(v.Z,{}):s?(0,Q.tZ)(S.Z,{message:(0,l.t)("You do not have permission to view that event.")}):super.renderError(e,!0)}renderComponent(){const{eventView:e,organization:t}=this.props,{event:s}=this.state,n=this.getEventSlug().split(":")[0],r=(0,O.zt)({eventView:e,event:s,organization:t});return(0,Q.tZ)(a.Z,{title:r,orgSlug:t.slug,projectSlug:n,children:super.renderComponent()})}}const he=e=>{let{event:t}=e;const s=(0,I.FC)(t);return(0,Q.BX)(ve,{"data-test-id":"event-header",children:[(0,Q.tZ)(xe,{children:(0,Q.tZ)(x.Z,{data:t})}),s&&(0,Q.tZ)(Ze,{children:(0,Q.tZ)(b.Z,{message:s})})]})};he.displayName="EventHeader";const ve=(0,r.Z)("div",{target:"eis1z1e2"})("max-width:",(e=>e.theme.breakpoints[0]),";"),xe=(0,r.Z)("div",{target:"eis1z1e1"})("font-size:",(e=>e.theme.headerFontSize),";margin-top:20px;"),Ze=(0,r.Z)("div",{target:"eis1z1e0"})("margin-top:",(0,_.Z)(1),";"),be=ge;class ye extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"getEventSlug",(()=>{const{eventSlug:e}=this.props.params;return"string"==typeof e?e.trim():""})),(0,n.Z)(this,"getEventView",(()=>{const{location:e}=this.props;return d.ZP.fromLocation(e)})),(0,n.Z)(this,"getDocumentTitle",(e=>"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,l.t)("Discover")]:[(0,l.t)("Discover")]))}render(){const{organization:e,location:t,params:s,router:n,route:r}=this.props,o=this.getEventView(),l=this.getEventSlug(),p=this.getDocumentTitle(o.name).join(" - "),d=l.split(":")[0];return(0,Q.tZ)(a.Z,{title:p,orgSlug:e.slug,projectSlug:d,children:(0,Q.tZ)(we,{children:(0,Q.tZ)(i.Z,{organization:e,children:(0,Q.tZ)(be,{organization:e,location:t,params:s,eventView:o,eventSlug:l,router:n,route:r})})})})}}ye.displayName="EventDetails";const fe=(0,c.Z)(ye),we=(0,r.Z)(p.JH,{target:"e1nc8qts0"})({name:"1hcx8jb",styles:"padding:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_genericDiscoverQuery_tsx-app_views_eventsV2_eventDetails_index_tsx.12862ec320c1ce02d957b79ec8ada612.js.map