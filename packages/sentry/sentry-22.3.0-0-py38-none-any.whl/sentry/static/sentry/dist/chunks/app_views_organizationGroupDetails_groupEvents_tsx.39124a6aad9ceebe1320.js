"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupEvents_tsx"],{"./app/components/acl/role.tsx":(e,t,s)=>{s.d(t,{u:()=>a});var n=s("../node_modules/react/index.js"),r=s("./app/stores/configStore.tsx"),i=s("./app/utils/isActiveSuperuser.tsx"),o=s("./app/utils/isRenderFunc.tsx");const a=(0,s("./app/utils/withOrganization.tsx").Z)((function(e){let{role:t,organization:s,children:a}=e;const l=n.useMemo((()=>function(e,t,s){var n,r;if(!e)return!1;if((0,i.M)())return!0;if(!Array.isArray(t.availableRoles))return!1;const o=t.availableRoles.map((e=>e.id));if(!o.includes(s)||!o.includes(null!==(n=t.role)&&void 0!==n?n:""))return!1;const a=o.indexOf(s);return o.indexOf(null!==(r=t.role)&&void 0!==r?r:"")>=a}(r.Z.get("user"),s,t)),[s,t,r.Z.get("user")]);return(0,o.l)(a)?a({hasRole:l}):l?a:null}))},"./app/components/deviceName.tsx":(e,t,s)=>{s.d(t,{qW:()=>a,f:()=>l,Hy:()=>d}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/react/index.js"),r=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("./app/components/deviceName.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){if("string"!=typeof e)return null;if(null===t)return e;const[s,...n]=e.split(" "),r=t.generationByIdentifier(s);return void 0===r?e:`${r} ${n.join(" ")}`}async function l(e){return"iOS"!==e&&r.Tb("DeviceName component only supports iOS module"),s.e("vendors-node_modules_ios-device-list_dist_ios-device-list_min_js").then(s.t.bind(s,"../node_modules/ios-device-list/dist/ios-device-list.min.js",23))}function d(e){let{value:t,children:s}=e;const[l,d]=n.useState(null);n.useEffect((()=>{let e=!1;return i.f("iOS").then((t=>{e||d(t)})).catch((()=>{r.Tb("Failed to load ios-device-list module")})),()=>{e=!0}}),[]);const c=n.useMemo((()=>a(t,l)),[t,l]);return c?(0,o.tZ)("span",{"data-test-id":"loaded-device-name",children:s?s(c):c}):null}},"./app/components/fileSize.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/utils.tsx"),i=s("./app/utils/getDynamicText.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const{className:t,bytes:s}=e;return(0,o.tZ)(l,{className:t,children:(0,i.Z)({value:(0,r.F)(s),fixed:"xx KB"})})}a.displayName="FileSize";const l=(0,n.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),d=a},"./app/utils/attachmentUrl.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var n=s("../node_modules/react/index.js"),r=s("./app/components/acl/role.tsx"),i=s("./app/utils/withOrganization.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{attachment:t,organization:s,eventId:n,projectId:i,children:a}=e;return(0,o.tZ)(r.u,{role:s.attachmentsRole,children:e=>{let{hasRole:r}=e;return a(r?`/api/0/projects/${s.slug}/${i}/events/${n}/attachments/${t.id}/`:null)}})}a.displayName="AttachmentUrl";const l=(0,i.Z)((0,n.memo)(a))},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,t,s)=>{s.r(t),s.d(t,{GroupEvents:()=>w,default:()=>L});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),i=s("../node_modules/react-router/es/index.js"),o=s("../node_modules/lodash/pick.js"),a=s.n(o),l=s("./app/components/emptyStateWarning.tsx"),d=s("./app/components/avatar/userAvatar.tsx"),c=s("./app/components/dateTime.tsx"),p=s("./app/components/deviceName.tsx"),u=s("./app/components/fileSize.tsx"),m=s("./app/components/globalSelectionLink.tsx"),h=s("./app/utils/attachmentUrl.tsx"),v=s("./app/utils/withOrganization.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends r.Component{renderCrashFileLink(){const{event:e,projectId:t}=this.props;if(!e.crashFile)return null;const s="event.minidump"===e.crashFile.type?"Minidump":"Crash file";return(0,g.tZ)(h.Z,{projectId:t,eventId:e.id,attachment:e.crashFile,children:t=>{var n,r;return t?(0,g.BX)("small",{children:[s,": ",(0,g.tZ)("a",{href:`${t}?download=1`,children:null===(n=e.crashFile)||void 0===n?void 0:n.name})," (",(0,g.tZ)(u.Z,{bytes:(null===(r=e.crashFile)||void 0===r?void 0:r.size)||0}),")"]}):null}})}render(){const{className:e,event:t,orgId:s,groupId:n,tagList:r,hasUser:i}=this.props,o={};t.tags.forEach((e=>{o[e.key]=e.value}));const a=`/organizations/${s}/issues/${n}/events/${t.id}/`;return(0,g.BX)("tr",{className:e,children:[(0,g.tZ)("td",{children:(0,g.BX)("h5",{children:[(0,g.tZ)(m.Z,{to:a,children:(0,g.tZ)(c.Z,{date:t.dateCreated})}),(0,g.tZ)("small",{children:t.title.substr(0,100)}),this.renderCrashFileLink()]})}),i&&(0,g.tZ)("td",{className:"event-user table-user-info",children:t.user?(0,g.BX)("div",{children:[(0,g.tZ)(d.Z,{user:t.user,size:24,className:"avatar",gravatar:!1}),t.user.email]}):(0,g.tZ)("span",{children:"â€”"})}),r.map((e=>(0,g.tZ)("td",{children:(0,g.tZ)("div",{children:"device"===e.key?(0,g.tZ)(p.Hy,{value:o[e.key]}):o[e.key]})},e.key)))]},t.id)}}y.displayName="EventsTableRow";const Z=(0,v.Z)(y);var x=s("./app/locale.tsx");class f extends r.Component{render(){const{events:e,tagList:t,orgId:s,projectId:n,groupId:r}=this.props,i=!!e.find((e=>e.user));return(0,g.BX)("table",{className:"table events-table",children:[(0,g.tZ)("thead",{children:(0,g.BX)("tr",{children:[(0,g.tZ)("th",{children:(0,x.t)("ID")}),i&&(0,g.tZ)("th",{children:(0,x.t)("User")}),t.map((e=>(0,g.tZ)("th",{children:e.name},e.key)))]})}),(0,g.tZ)("tbody",{children:e.map((e=>(0,g.tZ)(Z,{event:e,orgId:s,projectId:n,groupId:r,tagList:t,hasUser:i},e.id)))})]})}}f.displayName="EventsTable";const j=f;var b=s("./app/components/loadingError.tsx"),_=s("./app/components/loadingIndicator.tsx"),I=s("./app/components/pagination.tsx"),N=s("./app/components/panels/index.tsx"),k=s("./app/components/searchBar.tsx"),S=s("./app/utils/parseApiError.tsx"),q=s("./app/utils/withApi.tsx");class w extends r.Component{constructor(e){super(e),(0,n.Z)(this,"handleSearch",(e=>{const t={...this.props.location.query};t.query=e;const{groupId:s,orgId:n}=this.props.params;i.browserHistory.push({pathname:`/organizations/${n}/issues/${s}/events/`,query:t})})),(0,n.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1});const e={...a()(this.props.location.query,["cursor","environment"]),limit:50,query:this.state.query};this.props.api.request(`/issues/${this.props.params.groupId}/events/`,{query:e,method:"GET",success:(e,t,s)=>{var n;this.setState({eventList:e,error:!1,loading:!1,pageLinks:null!==(n=null==s?void 0:s.getResponseHeader("Link"))&&void 0!==n?n:""})},error:e=>{this.setState({error:(0,S.Z)(e),loading:!1})}})}));const t=this.props.location.query;this.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:t.query||""}}UNSAFE_componentWillMount(){this.fetchData()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.search!==e.location.search){const t=e.location.query;this.setState({query:t.query},this.fetchData)}}renderNoQueryResults(){return(0,g.tZ)(l.Z,{children:(0,g.tZ)("p",{children:(0,x.t)("Sorry, no events match your search query.")})})}renderEmpty(){return(0,g.tZ)(l.Z,{children:(0,g.tZ)("p",{children:(0,x.t)("There don't seem to be any events yet.")})})}renderResults(){const{group:e,params:t}=this.props,s=e.tags.filter((e=>"user"!==e.key))||[];return(0,g.tZ)(j,{tagList:s,events:this.state.eventList,orgId:t.orgId,projectId:e.project.slug,groupId:t.groupId})}renderBody(){let e;return e=this.state.loading?(0,g.tZ)(_.Z,{}):this.state.error?(0,g.tZ)(b.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty(),e}render(){return(0,g.BX)("div",{children:[(0,g.tZ)("div",{style:{marginBottom:20},children:(0,g.tZ)(k.Z,{defaultQuery:"",placeholder:(0,x.t)("search event id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})}),(0,g.tZ)(N.s_,{className:"event-list",children:(0,g.tZ)(N.N,{children:this.renderBody()})}),(0,g.tZ)(I.Z,{pageLinks:this.state.pageLinks})]})}}w.displayName="GroupEvents";const L=(0,q.Z)(w)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupEvents_tsx.74d9e8616a6d51a53fbeffb20b7d49d0.js.map