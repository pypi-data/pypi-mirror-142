"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_vitalDetail_index_tsx","app_utils_performance_histogram_utils_tsx-app_views_performance_data_tsx-app_views_performanc-0638bc"],{"./app/utils/performance/histogram/utils.tsx":(e,t,r)=>{r.d(t,{te:()=>i,_W:()=>a,GT:()=>s});var n=r("./app/utils/formatters.tsx");function i(e){return e.length>=2?e[1].bin-e[0].bin:0}function a(e){const t=i(e);return e.map((e=>{const r=e.bin;return{start:r,end:r+t}}))}function s(e){let{precision:t,type:r,additionalFieldsFn:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e=>{switch(r){case"duration":const i=null!=t?t:e<1e3?0:3;return(0,n.g9)(e/1e3,i,!0);case"number":const a=10**(null!=t?t:0);return(Math.round((e+Number.EPSILON)*a)/a).toLocaleString();default:throw new Error(`Unable to format type: ${r}`)}};return e.map((e=>{var t;return{value:e.count,name:a(e.bin),...null!==(t=null==i?void 0:i(e.bin))&&void 0!==t?t:{}}}))}},"./app/views/performance/breadcrumb.tsx":(e,t,r)=>{r.d(t,{Z:()=>v});var n=r("../node_modules/react/index.js"),i=r("./app/components/breadcrumbs.tsx"),a=r("./app/locale.tsx"),s=r("./app/utils/queryString.tsx"),o=r("./app/views/performance/transactionSummary/tabs.tsx"),l=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=r("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),u=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),p=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),d=r("./app/views/performance/transactionSummary/utils.tsx"),m=r("./app/views/performance/vitalDetail/utils.tsx"),h=r("./app/views/performance/utils.tsx"),f=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends n.Component{getCrumbs(){const e=[],{organization:t,location:r,transaction:n,vitalName:i,spanSlug:f,eventSlug:g,traceSlug:v,tab:y}=this.props,x={pathname:(0,h.de)(t),query:{...r.query,transaction:void 0}};if(e.push({to:x,label:(0,a.t)("Performance"),preservePageFilters:!0}),i){const n=(0,m.i4)({orgSlug:t.slug,vitalName:"fcp",projectID:(0,s.ro)(r.query.project),query:r.query});e.push({to:n,label:(0,a.t)("Vital Detail"),preservePageFilters:!0})}else if(n){const i={orgSlug:t.slug,transaction:n.name,projectID:n.project,query:r.query};switch(y){case o.Z.Tags:{const t=(0,u.vG)(i);e.push({to:t,label:(0,a.t)("Tags"),preservePageFilters:!0});break}case o.Z.Events:{const t=(0,l.xr)(i);e.push({to:t,label:(0,a.t)("All Events"),preservePageFilters:!0});break}case o.Z.WebVitals:{const t=(0,p.Pl)(i);e.push({to:t,label:(0,a.t)("Web Vitals"),preservePageFilters:!0});break}case o.Z.Spans:{const t=(0,c.hN)(i);e.push({to:t,label:(0,a.t)("Spans"),preservePageFilters:!0});break}case o.Z.TransactionSummary:default:{const t=(0,d.e1)(i);e.push({to:t,label:(0,a.t)("Transaction Summary"),preservePageFilters:!0})}}}return n&&f?e.push({to:"",label:(0,a.t)("Span Summary")}):n&&g?e.push({to:"",label:(0,a.t)("Event Details")}):v&&e.push({to:"",label:(0,a.t)("Trace View")}),e}render(){return(0,f.tZ)(i.Z,{crumbs:this.getCrumbs()})}}g.displayName="Breadcrumb";const v=g},"./app/views/performance/data.tsx":(e,t,r)=>{r.d(t,{GY:()=>m,mW:()=>h,hj:()=>f,V$:()=>g,$r:()=>y,C:()=>C,AM:()=>P}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("./app/components/gridEditable/index.tsx"),i=r("./app/constants/pageFilters.tsx"),a=r("./app/locale.tsx"),s=r("./app/utils/discover/eventView.tsx"),o=r("./app/utils/performance/vitals/constants.tsx"),l=r("./app/utils/queryString.tsx"),c=r("./app/utils/tokenizeSearch.tsx"),u=r("./app/views/performance/trends/utils.tsx"),p=r("./app/views/performance/landing/utils.tsx"),d=r("./app/views/performance/vitalDetail/utils.tsx");const m="24h",h=300,f=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"];let g;!function(e){e.TPM="tpm",e.THROUGHPUT="throughput",e.FAILURE_RATE="failureRate",e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.LCP="lcp",e.FCP="fcp",e.FID="fid",e.CLS="cls",e.STATUS_BREAKDOWN="statusBreakdown",e.DURATION_DISTRIBUTION="durationDistribution",e.USER_MISERY="userMisery",e.APDEX="apdex",e.APP_START_COLD="appStartCold",e.APP_START_WARM="appStartWarm",e.SLOW_FRAMES="slowFrames",e.FROZEN_FRAMES="frozenFrames",e.STALL_PERCENTAGE="stallPercentage",e.MOST_ISSUES="mostIssues",e.MOST_ERRORS="mostErrors",e.SLOW_HTTP_SPANS="slowHTTPSpans"}(g||(g={}));const v={tpm:()=>(0,a.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,a.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,a.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,a.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,a.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,a.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,a.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,a.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,a.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,a.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,a.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),statusBreakdown:()=>(0,a.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,a.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMisery:()=>(0,a.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdex:()=>(0,a.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,a.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,a.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,a.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,a.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,a.t)("Transactions with the most associated errors."),mostIssues:()=>(0,a.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,a.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,a.t)("The percentage of the transaction duration in which the application is in a stalled state.")};function y(e,t){return v.hasOwnProperty(t)?v[t](e):""}function x(e){const{query:t}=e,r=(0,l.ro)(t.query,""),n=(0,l.ro)(t.isDefaultQuery);return!r&&"false"!==n}function w(e){const{query:t}=e,r=t.start&&t.end,i={id:void 0,name:(0,a.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(i.fields.length).fill(n.z7);p[i.fields.length-1]="110",i.widths=p,t.statsPeriod||r||(i.range=m),i.orderby=(0,l.ro)(t.sort,"-tpm");const d=(0,l.ro)(t.query,""),h=new c.MY(d);x(e)&&h.setFilterValues("transaction.duration",["<15m"]),h.freeText.length>0&&(h.setFilterValues("transaction",[`*${h.freeText.join(" ")}*`],!1),h.freeText=[]),i.query=h.formatString();const f=s.ZP.fromNewQueryWithLocation(i,e);if(f.additionalConditions.addFilterValues("event.type",["transaction"]),t.trendParameter){const t=(0,u.IO)(e,[],[]);Boolean(o.r9[t.column])&&f.additionalConditions.addFilterValues("has",[t.column])}return f}function S(e){const{query:t}=e,r=t.start&&t.end,i={id:void 0,name:(0,a.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},o=Array(i.fields.length).fill(n.z7);o[i.fields.length-1]="110",i.widths=o,t.statsPeriod||r||(i.range=m),i.orderby=(0,l.ro)(t.sort,"-tpm");const u=(0,l.ro)(t.query,""),p=new c.MY(u);x(e)&&p.setFilterValues("transaction.duration",["<15m"]),p.freeText.length>0&&(p.setFilterValues("transaction",[`*${p.freeText.join(" ")}*`],!1),p.freeText=[]),i.query=p.formatString();const d=s.ZP.fromNewQueryWithLocation(i,e);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d}function _(e,t,r){const{query:o}=e,u=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.app_start_cold)","p75(measurements.app_start_warm)","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"],p=r.project;if(p.length>0&&p[0]!==i.mP){const e=t.filter((e=>p.includes(parseInt(e.id,10))));e.length>0&&e.every((e=>"react-native"===e.platform))&&(u.pop(),u.pop(),u.push("p75(measurements.stall_percentage)"))}const d=o.start&&o.end,h={id:void 0,name:(0,a.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...u,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},f=Array(h.fields.length).fill(n.z7);f[h.fields.length-1]="110",h.widths=f,o.statsPeriod||d||(h.range=m),h.orderby=(0,l.ro)(o.sort,"-tpm");const g=(0,l.ro)(o.query,""),v=new c.MY(g);x(e)&&v.setFilterValues("transaction.duration",["<15m"]),v.freeText.length>0&&(v.setFilterValues("transaction",[`*${v.freeText.join(" ")}*`],!1),v.freeText=[]),h.query=v.formatString();const y=s.ZP.fromNewQueryWithLocation(h,e);return y.additionalConditions.addFilterValues("event.type",["transaction"]),y}function b(e){const{query:t}=e,r=t.start&&t.end,i={id:void 0,name:(0,a.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},o=Array(i.fields.length).fill(n.z7);o[i.fields.length-1]="110",i.widths=o,t.statsPeriod||r||(i.range=m),i.orderby=(0,l.ro)(t.sort,"-tpm");const u=(0,l.ro)(t.query,""),p=new c.MY(u);x(e)&&p.setFilterValues("transaction.duration",["<15m"]),p.freeText.length>0&&(p.setFilterValues("transaction",[`*${p.freeText.join(" ")}*`],!1),p.freeText=[]),i.query=p.formatString();const d=s.ZP.fromNewQueryWithLocation(i,e);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d.additionalConditions.addFilterValues("transaction.op",["pageload"]),d}function Z(e){const{query:t}=e,r=t.start&&t.end,i={id:void 0,name:(0,a.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},o=Array(i.fields.length).fill(n.z7);o[i.fields.length-1]="110",i.widths=o,t.statsPeriod||r||(i.range=m),i.orderby=(0,l.ro)(t.sort,"-tpm");const u=(0,l.ro)(t.query,""),p=new c.MY(u);x(e)&&p.setFilterValues("transaction.duration",["<15m"]),p.freeText.length>0&&(p.setFilterValues("transaction",[`*${p.freeText.join(" ")}*`],!1),p.freeText=[]),i.query=p.formatString();const d=s.ZP.fromNewQueryWithLocation(i,e);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d}function C(e,t){let{isTrends:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=w(e);if(r)return n;const i=(0,p.Q_)(e,t,n);switch(null==i?void 0:i.field){case p.BY.FRONTEND_PAGELOAD:return b(e);case p.BY.FRONTEND_OTHER:return Z(e);case p.BY.BACKEND:return S(e);case p.BY.MOBILE:return _(e,t,n);default:return n}}function P(e){const{query:t}=e,r=(0,d.iF)(e),n=t.start&&t.end,i={id:void 0,name:(0,a.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()",`p50(${r})`,`p75(${r})`,`p95(${r})`,(0,d.Ve)(r),(0,d.q4)(r)],version:2};t.statsPeriod||n||(i.range=m),i.orderby=(0,l.ro)(t.sort,"-count");const o=(0,l.ro)(t.query,""),u=new c.MY(o);u.freeText.length>0&&(u.setFilterValues("transaction",[`*${u.freeText.join(" ")}*`],!1),u.freeText=[]),i.query=u.formatString();const p=s.ZP.fromNewQueryWithLocation(i,e);return p.additionalConditions.addFilterValues("event.type",["transaction"]),p.additionalConditions.addFilterValues("has",[r]),p}},"./app/views/performance/landing/utils.tsx":(e,t,r)=>{r.d(t,{BY:()=>m,Lx:()=>h,kP:()=>f,Cf:()=>g,TT:()=>v,Q_:()=>y,NJ:()=>x,Oo:()=>w,hv:()=>S,ZR:()=>_});var n=r("../node_modules/react-router/es/index.js"),i=r("../node_modules/lodash/omit.js"),a=r.n(i),s=r("./app/locale.tsx"),o=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=r("./app/utils/formatters.tsx"),c=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/data.tsx"),d=r("./app/views/performance/utils.tsx");let m;!function(e){e.ALL="all",e.FRONTEND_PAGELOAD="frontend_pageload",e.FRONTEND_OTHER="frontend_other",e.BACKEND="backend",e.MOBILE="mobile"}(m||(m={}));const h=[{label:"All Transactions",field:m.ALL},{label:"Web Vitals",field:m.FRONTEND_PAGELOAD},{label:"Frontend",field:m.FRONTEND_OTHER},{label:"Backend",field:m.BACKEND},{label:"Mobile",field:m.MOBILE}];function f(e,t){const{eventView:r,location:i}=t,a=new u.MY(r.query);a.addFilterValues("!transaction",[`${e}`]),n.browserHistory.push({pathname:i.pathname,query:{...i.query,cursor:void 0,query:a.formatString()}})}function g(e){var t;const r=(0,c.ro)(null==e||null===(t=e.query)||void 0===t?void 0:t.landingDisplay);return h.find((e=>{let{field:t}=e;return t===r}))}function v(e,t){const r=w(e,t);return h.find((e=>{let{field:t}=e;return t===r}))||h[0]}function y(e,t,r){return g(e)||v(t,r)}function x(e,t,r,i,s){const l=(0,c.ro)(t.query.query,""),p=new u.MY(l);p.removeFilter("transaction.op");const d={...a()(t.query,["landingDisplay","sort"]),query:p.formatString()};delete d.left,delete d.right;const m=w(r,s),h=y(t,r,s).field,f=m===e?{...d}:{...d,landingDisplay:e};(0,o.Z)("performance_views.landingv3.display_change",{organization:i,change_to_display:e,default_display:m,current_display:h,is_default:m===h}),n.browserHistory.push({pathname:t.pathname,query:f})}function w(e,t){var r;if(!t)return m.ALL;const n=t.project;return null!==(r={[d.iy.ANY]:m.ALL,[d.iy.FRONTEND]:m.FRONTEND_PAGELOAD,[d.iy.BACKEND]:m.BACKEND,[d.iy.MOBILE]:m.MOBILE}[(0,d.Bh)(e,n)])&&void 0!==r?r:m.ALL}const S=e=>({"p75(transaction.duration)":{title:(0,s.t)("Duration (p75)"),tooltip:(0,p.$r)(e,p.V$.P75),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"tpm()":{title:(0,s.t)("Throughput"),tooltip:(0,p.$r)(e,p.V$.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,s.t)("Failure Rate"),tooltip:(0,p.$r)(e,p.V$.FAILURE_RATE),formatter:e=>(0,l.rl)(e,2)},"apdex()":{title:(0,s.t)("Apdex"),tooltip:(0,p.$r)(e,p.V$.APDEX),formatter:e=>(0,l.$1)(e,4)},"p75(measurements.frames_slow_rate)":{title:(0,s.t)("Slow Frames (p75)"),tooltip:(0,p.$r)(e,p.V$.SLOW_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.frames_frozen_rate)":{title:(0,s.t)("Frozen Frames (p75)"),tooltip:(0,p.$r)(e,p.V$.FROZEN_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.app_start_cold)":{title:(0,s.t)("Cold Start (p75)"),tooltip:(0,p.$r)(e,p.V$.APP_START_COLD),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,s.t)("Warm Start (p75)"),tooltip:(0,p.$r)(e,p.V$.APP_START_WARM),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,s.t)("Stall Percentage (p75)"),tooltip:(0,p.$r)(e,p.V$.STALL_PERCENTAGE),formatter:e=>(0,l.rl)(e,2)}});function _(e){return Boolean(e.getFields().find((e=>e.includes("measurements.stall_percentage"))))}},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,r)=>{var n;r.d(t,{Z:()=>i}),function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.WebVitals=1]="WebVitals",e[e.Tags=2]="Tags",e[e.Events=3]="Events",e[e.Spans=4]="Spans",e[e.Anomalies=5]="Anomalies"}(n||(n={}));const i=n},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,r)=>{r.d(t,{q3:()=>o,_S:()=>l,xr:()=>c,tb:()=>u,qg:()=>p,Zq:()=>d});var n=r("./app/locale.tsx"),i=r("./app/utils/queryString.tsx"),a=r("./app/views/performance/transactionSummary/filter.tsx"),s=r("./app/views/performance/transactionSummary/utils.tsx");let o;function l(e,t){const{p99:r,p95:i,p75:s,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[o.p50]:{name:o.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p50")},[o.p75]:{name:o.p75,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p75")},[o.p95]:{name:o.p95,query:i?[["transaction.duration",`<=${i.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p95")},[o.p99]:{name:o.p99,query:r?[["transaction.duration",`<=${r.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p99")},[o.p100]:{name:o.p100,label:(0,n.t)("p100")}}}function c(e){let{orgSlug:t,transaction:r,projectID:n,query:i}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:r,project:n,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}function u(e){return t=(0,i.ro)(e.query.showTransactions,o.p100),Object.values(o).includes(t)?t:o.p100;var t}function p(e,t){var r,n;const i=l(t),a=null===(r=i[e].sort)||void 0===r?void 0:r.kind,s=null===(n=i[e].sort)||void 0===n?void 0:n.field,o={showTransactions:e};return a&&s&&(o.sort=`${"desc"===a?"-":""}${s}`),o}function d(e){switch(e){case s.K0.OUTLIER:return o.p100;case s.K0.SLOW:return o.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(o||(o={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,r)=>{let n,i;r.d(t,{p:()=>n,g:()=>i}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(n||(n={})),function(e){e.COUNT="count",e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,r)=>{r.d(t,{hN:()=>m,bc:()=>h,CS:()=>f,E5:()=>g,TK:()=>x,KK:()=>w,W6:()=>S,xz:()=>_,zW:()=>b,uQ:()=>Z,mV:()=>C}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js");var n=r("../node_modules/lodash/pick.js"),i=r.n(n),a=r("./app/constants/index.tsx"),s=r("./app/locale.tsx"),o=r("./app/utils.tsx"),l=r("./app/utils/discover/eventView.tsx"),c=r("./app/utils/discover/fields.tsx"),u=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m(e){let{orgSlug:t,transaction:r,projectID:n,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t}),query:{transaction:r,project:n,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}const h=30,f=i()(a.wh,["1h","24h","7d","14d","30d"]),g=[{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Total Self Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Total Count"),field:d.g.COUNT},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p50 Self Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p75 Self Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p95 Self Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p99 Self Time"),field:d.p.P99_EXCLUSIVE_TIME}],v=d.g.SUM_EXCLUSIVE_TIME;function y(e){return g.find((t=>t.field===e))||g.find((e=>e.field===v))}function x(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";const i=null!==(t=(0,u.ro)(null==e||null===(r=e.query)||void 0===r?void 0:r[n]))&&void 0!==t?t:v;return y(i)}function w(e){return y(e.sorts.length?e.sorts[0].field:v)}function S(e){if(!(0,o.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function _(e){let{location:t,transactionName:r}=e;const n=(0,u.ro)(t.query.query,""),i=new p.MY(n);i.setFilterValues("event.type",["transaction"]),i.setFilterValues("transaction",[r]);const a=l.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:[...Object.values(d.g),...Object.values(d.p)],query:i.formatString(),projects:[]},t),s=x(t);return a.withSorts([{field:s.field,kind:"desc"}])}function b(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]}]),r=new p.MY(e.query);return Object.keys(r.filters).forEach((e=>{(0,c.h1)(e)&&r.removeFilter(e)})),t.query=r.formatString(),t}const Z={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.COUNT]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]};function C(e){return e.replace("exclusive","self")}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,r)=>{r.d(t,{Zn:()=>a,bZ:()=>s,vG:()=>o,oc:()=>l,oT:()=>c});var n=r("./app/utils/analytics.tsx"),i=r("./app/utils/queryString.tsx");function a(e){return(0,i.ro)(e.query.tagKey)}function s(e){(0,n.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function o(e){let{orgSlug:t,transaction:r,projectID:n,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t}),query:{transaction:r,project:n,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query,tagKey:i.tagKey}}}function l(e){var t,r;let n=null!==(t=(0,i.ro)(null===(r=e.query)||void 0===r?void 0:r.tagSort))&&void 0!==t?t:"-frequency";return["sumdelta"].find((e=>{var t;return null===(t=n)||void 0===t?void 0:t.includes(e)}))&&(n="-frequency"),n}function c(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const r=t.split("_");return{histogramField:t,bucketSize:parseInt(r[r.length-3],10),offset:parseInt(r[r.length-2],10),multiplier:parseInt(r[r.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,r)=>{r.d(t,{Pl:()=>i,oZ:()=>a,eH:()=>s,L0:()=>o,jb:()=>l});var n=r("./app/utils/performance/histogram/utils.tsx");function i(e){let{orgSlug:t,transaction:r,projectID:n,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t}),query:{transaction:r,project:n,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}function a(e,t){const r=(0,n.te)(e);return!e.length||t>=e[e.length-1].bin+r?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/r)}function s(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const r=e[t];for(let n=t+1;n<e.length;n++){const i=e[n];if(r.bin!==i.bin&&r.count!==i.count)return{point1:{x:t,y:Math.min(r.count,i.count)},point2:{x:n,y:Math.max(r.count,i.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function o(e,t){const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1]))return null;const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1])?null:{point1:{x:r[0],y:r[1]},point2:{x:n[0],y:n[1]}}}function l(e,t,r){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||r.point1.x===r.point2.x||r.point1.y===r.point2.y)return null;const n=(e.x-t.point1.x)/(t.point2.x-t.point1.x),i=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:r.point1.x+(r.point2.x-r.point1.x)*n,y:r.point1.y+(r.point2.y-r.point1.y)*i}}},"./app/views/performance/vitalDetail/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ee});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/react/index.js")),s=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/lodash/isEqual.js"),l=r.n(o),c=r("./app/actionCreators/tags.tsx"),u=r("./app/components/noProjectMessage.tsx"),p=r("./app/components/organizations/pageFilters/container.tsx"),d=r("./app/components/sentryDocumentTitle.tsx"),m=r("./app/locale.tsx"),h=r("./app/styles/organization.tsx"),f=r("./app/utils/discover/fields.tsx"),g=r("./app/utils/performance/contexts/performanceEventViewContext.tsx"),v=r("./app/utils/queryString.tsx"),y=r("./app/utils/withApi.tsx"),x=r("./app/utils/withOrganization.tsx"),w=r("./app/utils/withPageFilters.tsx"),S=r("./app/utils/withProjects.tsx"),_=r("./app/views/performance/data.tsx"),b=r("./app/views/performance/utils.tsx"),Z=r("../node_modules/lodash/omit.js"),C=r.n(Z),P=r("./app/components/acl/feature.tsx"),E=r("./app/components/alert.tsx"),A=r("./app/components/buttonBar.tsx"),T=r("./app/components/charts/utils.tsx"),q=r("./app/components/createAlertButton.tsx"),L=r("./app/components/dropdownMenuControlV2.tsx"),F=r("./app/components/events/searchBar.tsx"),j=r("./app/components/layouts/thirds.tsx"),D=r("./app/components/loadingIndicator.tsx"),O=r("./app/components/organizations/pageFilters/parse.tsx"),V=r("./app/components/performance/teamKeyTransactionsManager.tsx"),R=r("./app/icons/index.tsx"),I=r("./app/icons/iconFlag.tsx"),N=r("./app/styles/space.tsx"),M=r("./app/utils.tsx"),k=r("./app/utils/dates.tsx"),z=r("./app/utils/performance/vitals/constants.tsx"),B=r("./app/utils/teams.tsx"),$=r("./app/utils/tokenizeSearch.tsx"),U=r("./app/views/performance/breadcrumb.tsx"),W=r("./app/components/gridEditable/index.tsx"),X=r("./app/components/gridEditable/sortLink.tsx"),H=r("./app/components/links/link.tsx"),G=r("./app/components/pagination.tsx"),Y=r("./app/components/tag.tsx"),K=r("./app/utils/analytics.tsx"),Q=r("./app/utils/discover/eventView.tsx"),J=r("./app/utils/discover/fieldRenderers.tsx"),ee=r("./app/utils/discover/genericDiscoverQuery.tsx"),te=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function re(e){return(0,te.tZ)(ee.ZP,{route:"eventsv2",...e})}re.displayName="VitalsCardsDiscoverQuery";const ne=(0,y.Z)(re);var ie=r("./app/views/eventsV2/table/cellAction.tsx"),ae=r("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),se=r("./app/views/performance/transactionSummary/utils.tsx"),oe=r("./app/views/performance/vitalDetail/utils.tsx");const le=["Transaction","Project","Unique Users","Count"];class ce extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{widths:[]}),(0,n.Z)(this,"handleCellAction",(e=>(t,r)=>{const{eventView:n,location:i,organization:a}=this.props;(0,K.ec)({eventKey:"performance_views.overview.cellaction",eventName:"Performance Views: Cell Action Clicked",organization_id:parseInt(a.id,10),action:t});const o=(0,se.PU)(n.query);(0,ie.rh)(o,t,e,r),s.browserHistory.push({pathname:i.pathname,query:{...i.query,cursor:void 0,query:o.formatString()}})})),(0,n.Z)(this,"renderBodyCellWithData",((e,t)=>(r,n)=>this.renderBodyCell(e,r,n,t))),(0,n.Z)(this,"renderHeadCellWithMeta",((e,t)=>(r,n)=>this.renderHeadCell(e,r,((e,t)=>{const r=oe.a7[t];return[...le,`p50(${r})`,`p75(${r})`,`p95(${r})`,"Status"][e]})(n,t)))),(0,n.Z)(this,"renderPrependCellWithData",((e,t)=>{const{eventView:r}=this.props,n=r.getColumns().find((e=>"team_key_transaction"===e.name));return(r,i)=>{if(n){if(r){const t=(0,te.tZ)(R.GK,{color:"yellow300",isSolid:!0,"data-test-id":"key-transaction-header"},"keyTransaction");return[this.renderHeadCell(null==e?void 0:e.meta,n,t)]}return[this.renderBodyCell(e,n,i,t)]}return[]}})),(0,n.Z)(this,"handleSummaryClick",(()=>{const{organization:e}=this.props;(0,K.ec)({eventKey:"performance_views.overview.navigate.summary",eventName:"Performance Views: Overview view summary",organization_id:parseInt(e.id,10)})})),(0,n.Z)(this,"handleResizeColumn",((e,t)=>{const r=[...this.state.widths];r[e]=t.width?Number(t.width):W.z7,this.setState({widths:r})}))}renderBodyCell(e,t,r,n){const{eventView:i,organization:a,projects:s,location:o,summaryConditions:l}=this.props;if(!e||!e.meta)return r[t.key];const c=e.meta,u=String(t.key);if(u===(0,oe.Ve)(n))return r[(0,f.LY)(u)]?(0,te.tZ)(ue,{children:(0,te.tZ)(me,{children:(0,m.t)("Poor")})}):r[(0,f.LY)((0,oe.q4)(n))]?(0,te.tZ)(ue,{children:(0,te.tZ)(de,{children:(0,m.t)("Meh")})}):(0,te.tZ)(ue,{children:(0,te.tZ)(pe,{children:(0,m.t)("Good")})});const p=(0,J.Js)(u,c)(r,{organization:a,location:o}),d=[ie.eX.ADD,ie.eX.EXCLUDE,ie.eX.SHOW_GREATER_THAN,ie.eX.SHOW_LESS_THAN];if("transaction"===u){const e=function(e,t){const r=(null==e?void 0:e.project)||void 0;if(void 0===typeof r)return;const n=t.find((e=>e.slug===r));return n?n.id:void 0}(r,s),o=i.clone(),c=new $.MY(l);c.addFilterValues("has",[`${n}`]),o.query=c.formatString();const u=String(r.transaction)||"",h=(0,se.e1)({orgSlug:a.slug,transaction:u,query:o.generateQueryStringObject(),projectID:e,showTransactions:se.K0.RECENT,display:ae.D.VITALS});return(0,te.tZ)(ie.ZP,{column:t,dataRow:r,handleCellAction:this.handleCellAction(t),allowActions:d,children:(0,te.tZ)(H.Z,{to:h,"aria-label":(0,m.t)("See transaction summary of the transaction %s",u),onClick:this.handleSummaryClick,children:p})})}return u.startsWith("team_key_transaction")?p:(0,te.tZ)(ie.ZP,{column:t,dataRow:r,handleCellAction:this.handleCellAction(t),allowActions:d,children:p})}renderHeadCell(e,t,r){const{eventView:n,location:i}=this.props,a=(0,f.qG)(t.name,t.type,e),s={field:t.name,width:t.width},o=n.sortForField(s,e),l=(0,Q.M3)(s,e);return(0,te.tZ)(X.Z,{align:a,title:r||s.field,direction:o?o.kind:void 0,canSort:l,generateSortLink:function(){if(!e)return;const t=n.sortOnField(s,e).generateQueryStringObject();return{...i,query:{...i.query,sort:t.sort}}}})}getSortedEventView(e){const{eventView:t}=this.props,r=(0,f.LY)((0,oe.Ve)(e)),n=(0,f.LY)((0,oe.q4)(e)),i=t.sorts.some((e=>e.field.includes(r)||e.field.includes(n)))?[]:[{field:"team_key_transaction",kind:"desc"},{field:r,kind:"desc"},{field:n,kind:"desc"}];return t.withSorts([...i,...t.sorts])}render(){const{eventView:e,organization:t,location:r}=this.props,{widths:n}=this.state,i=e.clone();i.fields=[...e.fields];const s=i.getColumns().filter((e=>"team_key_transaction"!==e.name)).slice(0,-1).map(((e,t)=>"number"==typeof n[t]?{...e,width:n[t]}:e)),o=(0,oe.iF)(r),l=this.getSortedEventView(o),c=l.getSorts();return(0,te.tZ)("div",{children:(0,te.tZ)(ne,{eventView:l,orgSlug:t.slug,location:r,limit:10,referrer:"api.performance.vital-detail",children:e=>{let{pageLinks:t,isLoading:n,tableData:i}=e;return(0,te.BX)(a.Fragment,{children:[(0,te.tZ)(W.ZP,{isLoading:n,data:i?i.data:[],columnOrder:s,columnSortBy:c,grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(null==i?void 0:i.meta,o),renderBodyCell:this.renderBodyCellWithData(i,o),renderPrependColumns:this.renderPrependCellWithData(i,o),prependColumnWidths:["max-content"]},location:r}),(0,te.tZ)(G.Z,{pageLinks:t})]})}})})}}ce.displayName="Table";const ue=(0,i.Z)("div",{target:"ebw8yf93"})({name:"1gnrgb9",styles:"text-align:right;justify-self:flex-end;flex-grow:1"}),pe=(0,i.Z)(Y.Z,{target:"ebw8yf92"})("div{background-color:",(e=>e.theme[oe.fL[oe.SP.GOOD]]),";}span{color:",(e=>e.theme.white),";}"),de=(0,i.Z)(Y.Z,{target:"ebw8yf91"})("div{background-color:",(e=>e.theme[oe.fL[oe.SP.MEH]]),";}span{color:",(e=>e.theme.white),";}"),me=(0,i.Z)(Y.Z,{target:"ebw8yf90"})("div{background-color:",(e=>e.theme[oe.fL[oe.SP.POOR]]),";}span{color:",(e=>e.theme.white),";}"),he=ce;var fe=r("./app/views/performance/vitalDetail/vitalChart.tsx"),ge=r("./app/views/performance/vitalDetail/vitalInfo.tsx");const ve=[f.Zl.FCP,f.Zl.LCP,f.Zl.FID,f.Zl.CLS];class ye extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{incompatibleAlertNotice:null,error:void 0}),(0,n.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,r=(0,O.fK)({...t.query||{},query:e}),n=C()(r,"cursor");s.browserHistory.push({pathname:t.pathname,query:n})})),(0,n.Z)(this,"generateTagUrl",((e,t)=>{const{location:r}=this.props,n=(0,M.ZT)(r.query,{key:e,value:t});return{...r,query:n}})),(0,n.Z)(this,"handleIncompatibleQuery",((e,t)=>{const r=e((()=>this.setState({incompatibleAlertNotice:null})));this.setState({incompatibleAlertNotice:r})})),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})}))}renderCreateAlertButton(){const{eventView:e,organization:t,projects:r}=this.props;return(0,te.tZ)(q.K,{eventView:e,organization:t,projects:r,onIncompatibleQuery:this.handleIncompatibleQuery,onSuccess:()=>{},"aria-label":(0,m.t)("Create Alert"),referrer:"performance"})}renderVitalSwitcher(){const{vitalName:e,location:t}=this.props;if(ve.indexOf(e)<0)return null;const r=ve.reduce(((r,n)=>{const i={key:n,label:oe.a7[n],onAction:function(){s.browserHistory.push({pathname:t.pathname,query:{...t.query,vitalName:n,cursor:void 0}})}};return e===n?r.unshift(i):r.push(i),r}),[]);return(0,te.tZ)(L.Z,{items:r,triggerLabel:oe.a7[e],triggerProps:{"aria-label":`Web Vitals: ${oe.a7[e]}`,prefix:(0,m.t)("Web Vitals")},placement:"bottom left"})}renderError(){const{error:e}=this.state;return e?(0,te.tZ)(E.Z,{type:"error",icon:(0,te.tZ)(I.G,{size:"md"}),children:e}):null}renderContent(e){const{location:t,organization:r,eventView:n,projects:i}=this.props,{fields:s,start:o,end:l,statsPeriod:c,environment:u,project:p}=n,d=(0,v.ro)(t.query.query,""),m=r.slug,h=o?(0,k.hC)(o):null,f=l?(0,k.hC)(l):null,g=(0,T.ZS)({start:h,end:f,period:c},"high"),y=function(e){const t=new $.MY(e);return t.freeText=[],t.formatString()}((0,b.Ov)(t));return(0,te.BX)(a.Fragment,{children:[(0,te.tZ)(Se,{searchSource:"performance_vitals",organization:r,projectIds:p,query:d,fields:s,onSearch:this.handleSearch}),(0,te.tZ)(fe.Z,{organization:r,query:d,project:p,environment:u,start:h,end:f,statsPeriod:c,interval:g}),(0,te.tZ)(_e,{children:(0,te.tZ)(ge.Z,{orgSlug:m,location:t,vital:e,project:p,environment:u,start:o,end:l,statsPeriod:c})}),(0,te.tZ)(B.Z,{provideUserTeams:!0,children:e=>{let{teams:a,initiallyLoaded:s}=e;return s?(0,te.tZ)(V.z,{organization:r,teams:a,selectedTeams:["myteams"],selectedProjects:p.map(String),children:(0,te.tZ)(he,{eventView:n,projects:i,organization:r,location:t,setError:this.setError,summaryConditions:y})}):(0,te.tZ)(D.Z,{})}})]})}render(){const{location:e,organization:t,vitalName:r}=this.props,{incompatibleAlertNotice:n}=this.state,i=r||f.Zl.LCP;return(0,te.BX)(a.Fragment,{children:[(0,te.BX)(j.h4,{children:[(0,te.BX)(j.oB,{children:[(0,te.tZ)(U.Z,{organization:t,location:e,vitalName:i}),(0,te.tZ)(j.Dx,{children:oe.jo[i]})]}),(0,te.tZ)(j.kP,{children:(0,te.BX)(A.ZP,{gap:1,children:[this.renderVitalSwitcher(),(0,te.tZ)(P.Z,{organization:t,features:["incidents"],children:e=>{let{hasFeature:t}=e;return t&&this.renderCreateAlertButton()}})]})})]}),(0,te.BX)(j.uT,{children:[this.renderError(),n&&(0,te.tZ)(j.or,{fullWidth:!0,children:n}),(0,te.BX)(j.or,{fullWidth:!0,children:[(0,te.tZ)(we,{children:oe.il[r]}),(0,te.tZ)(be,{children:Object.values(z.AR).map((e=>{var t;return(0,te.BX)(Ze,{children:[null!==(t=oe.cD[r])&&void 0!==t&&t.includes(e)?(0,te.tZ)(R.DL,{color:"green300",size:"sm"}):(0,te.tZ)(R.bM,{color:"red300",size:"sm"}),e]},e)}))}),this.renderContent(i)]})]})]})}}ye.displayName="VitalDetailContent";const xe=(0,S.Z)(ye),we=(0,i.Z)("div",{target:"e150wv1u4"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,N.Z)(3),";"),Se=(0,i.Z)(F.Z,{target:"e150wv1u3"})("margin-bottom:",(0,N.Z)(2),";"),_e=(0,i.Z)("div",{target:"e150wv1u2"})("margin-bottom:",(0,N.Z)(3),";"),be=(0,i.Z)("div",{target:"e150wv1u1"})("display:inline-flex;gap:",(0,N.Z)(2),";margin-bottom:",(0,N.Z)(3),";"),Ze=(0,i.Z)("div",{target:"e150wv1u0"})("display:flex;align-items:center;gap:",(0,N.Z)(1),";");class Ce extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{eventView:(0,_.AM)(this.props.location)})}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,_.AM)(e.location)}}componentDidMount(){const{api:e,organization:t,selection:r}=this.props;(0,c.QK)(e,t.slug,r),(0,b.n4)(r)}componentDidUpdate(e){const{api:t,organization:r,selection:n}=this.props;l()(e.selection.projects,n.projects)&&l()(e.selection.datetime,n.datetime)||((0,c.QK)(t,r.slug,n),(0,b.n4)(n))}getDocumentTitle(){const e=(0,b.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,m.t)("Performance")].join(" - "):[(0,m.t)("Vital Detail"),(0,m.t)("Performance")].join(" - ")}render(){const{organization:e,location:t,router:r,api:n}=this.props,{eventView:i}=this.state;if(!i)return s.browserHistory.replace({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}}),null;const a=(0,v.ro)(t.query.vitalName),o=-1===Object.values(f.Zl).indexOf(a)?void 0:a;return(0,te.tZ)(d.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,te.tZ)(g.bq,{value:{eventView:this.state.eventView},children:(0,te.tZ)(p.Z,{children:(0,te.tZ)(Pe,{children:(0,te.tZ)(u.Z,{organization:e,children:(0,te.tZ)(xe,{location:t,organization:e,eventView:i,router:r,vitalName:o||f.Zl.LCP,api:n})})})})})})}}Ce.displayName="VitalDetail";const Pe=(0,i.Z)(h.JH,{target:"ekkkevo0"})({name:"1hcx8jb",styles:"padding:0"}),Ee=(0,y.Z)((0,w.Z)((0,S.Z)((0,x.Z)(Ce))))},"./app/views/performance/vitalDetail/utils.tsx":(e,t,r)=>{r.d(t,{eE:()=>d,MN:()=>m,SP:()=>h,fL:()=>f,Np:()=>g,i4:()=>v,iF:()=>y,Ve:()=>x,q4:()=>w,jo:()=>S,il:()=>_,a7:()=>b,vk:()=>Z,cD:()=>C,EX:()=>P}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js");var n=r("./app/components/charts/components/markLine.tsx"),i=r("./app/components/charts/utils.tsx"),a=r("./app/icons/index.tsx"),s=r("./app/locale.tsx"),o=r("./app/utils/discover/charts.tsx"),l=r("./app/utils/discover/fields.tsx"),c=r("./app/utils/performance/vitals/constants.tsx"),u=r("./app/utils/queryString.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d={[l.Zl.FP]:3e3,[l.Zl.FCP]:3e3,[l.Zl.LCP]:4e3,[l.Zl.FID]:300,[l.Zl.CLS]:.25},m={[l.Zl.FP]:1e3,[l.Zl.FCP]:1e3,[l.Zl.LCP]:2500,[l.Zl.FID]:100,[l.Zl.CLS]:.1};let h;!function(e){e.POOR="Poor",e.MEH="Meh",e.GOOD="Good"}(h||(h={}));const f={[h.POOR]:"red300",[h.MEH]:"yellow300",[h.GOOD]:"green300"},g={[h.POOR]:(0,p.tZ)(a.pY,{color:f[h.POOR]}),[h.MEH]:(0,p.tZ)(a.tC,{color:f[h.MEH]}),[h.GOOD]:(0,p.tZ)(a.O1,{color:f[h.GOOD]})};function v(e){let{orgSlug:t,vitalName:r,projectID:n,query:i}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/vitaldetail/`}({orgSlug:t}),query:{vitalName:r,project:n,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}function y(e){const t=(0,u.ro)(e.query.vitalName);return Object.values(l.Zl).find((e=>e===t))||l.Zl.LCP}function x(e){const t=d[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}function w(e){const t=m[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}const S={[l.Zl.FCP]:"First Contentful Paint",[l.Zl.CLS]:"Cumulative Layout Shift",[l.Zl.FID]:"First Input Delay",[l.Zl.LCP]:"Largest Contentful Paint"},_={[l.Zl.FCP]:"First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks. At the moment, there is support for FCP in the following browsers:",[l.Zl.CLS]:"Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts. At the moment, there is support for CLS in the following browsers:",[l.Zl.FID]:"First Input Delay (FID) measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not. At the moment, there is support for FID in the following browsers:",[l.Zl.LCP]:"Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. It’s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page. At the moment, there is support for LCP in the following browsers:"},b={[l.Zl.FCP]:"FCP",[l.Zl.CLS]:"CLS",[l.Zl.FID]:"FID",[l.Zl.LCP]:"LCP"};function Z(e){let t=-1/0;for(const{data:r}of e)for(const e of r)t=Math.max(t,e.value);return t}const C={[l.Zl.LCP]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA],[l.Zl.FID]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA,c.AR.FIREFOX,c.AR.SAFARI,c.AR.IE],[l.Zl.CLS]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA],[l.Zl.FP]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA],[l.Zl.FCP]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA,c.AR.FIREFOX,c.AR.SAFARI],[l.Zl.TTFB]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA,c.AR.FIREFOX,c.AR.SAFARI,c.AR.IE]};function P(e){let{theme:t,location:r,vital:a,yAxis:c}=e;const p="false"!==(0,u.ro)(r.query.utc),h=d[a],f=m[a];return{vitalPoor:h,vitalMeh:f,legend:{right:10,top:0,selected:(0,i.RI)(r)},chartOptions:{grid:{left:"5px",right:"10px",top:"35px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,o.CX)(e,a===l.Zl.CLS?t:c)},yAxis:{min:0,max:h,axisLabel:{color:t.chartLabel,showMaxLabel:!1,formatter:e=>(0,o.gu)(e,c)}}},markLines:[{seriesName:"Thresholds",type:"line",data:[],markLine:(0,n.Z)({silent:!0,lineStyle:{color:t.red300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,s.t)("Poor")},data:[{yAxis:h}]})},{seriesName:"Thresholds",type:"line",data:[],markLine:(0,n.Z)({silent:!0,lineStyle:{color:t.yellow300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,s.t)("Meh")},data:[{yAxis:f}]})}],utc:p}}},"./app/views/performance/vitalDetail/vitalChart.tsx":(e,t,r)=>{r.d(t,{Z:()=>C,S:()=>E}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js");var n=r("../node_modules/react-router/es/index.js"),i=r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),a=r("./app/components/charts/chartZoom.tsx"),s=r("./app/components/charts/errorPanel.tsx"),o=r("./app/components/charts/eventsRequest.tsx"),l=r("./app/components/charts/lineChart.tsx"),c=r("./app/components/charts/releaseSeries.tsx"),u=r("./app/components/charts/styles.tsx"),p=r("./app/components/charts/transitionChart.tsx"),d=r("./app/components/charts/transparentLoadingMask.tsx"),m=r("./app/components/panels/index.tsx"),h=r("./app/components/questionTooltip.tsx"),f=r("./app/icons/index.tsx"),g=r("./app/locale.tsx"),v=r("./app/utils/discover/charts.tsx"),y=r("./app/utils/discover/fields.tsx"),x=r("./app/utils/getDynamicText.tsx"),w=r("./app/utils/useApi.tsx"),S=r("./app/views/performance/trends/utils.tsx"),_=r("./app/views/performance/vitalDetail/utils.tsx"),b=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){let{project:t,environment:r,location:v,organization:y,query:Z,statsPeriod:C,router:P,start:E,end:A,interval:T}=e;const q=(0,w.Z)(),L=(0,i.u)(),F=(0,_.iF)(v),j=`p75(${F})`,{utc:D,legend:O,vitalPoor:V,markLines:R,chartOptions:I}=(0,_.EX)({theme:L,location:v,yAxis:j,vital:F});function N(e){const{selected:t}=e,r=Object.keys(t).filter((e=>!t[e])),i={...v,query:{...v.query,unselectedSeries:r}};n.browserHistory.push(i)}return(0,b.tZ)(m.s_,{children:(0,b.BX)(u.BO,{children:[(0,b.BX)(u.ws,{children:[(0,g.t)("Duration p75"),(0,b.tZ)(h.Z,{size:"sm",position:"top",title:(0,g.t)("The durations shown should fall under the vital threshold.")})]}),(0,b.tZ)(a.Z,{router:P,period:C,start:E,end:A,utc:D,children:e=>(0,b.tZ)(o.Z,{api:q,organization:y,period:C,project:t,environment:r,start:E,end:A,interval:T,showLoading:!1,query:Z,includePrevious:!1,yAxis:[j],partial:!0,children:n=>{let{timeseriesData:i,errored:a,loading:o,reloading:u}=n;if(a)return(0,b.tZ)(s.Z,{children:(0,b.tZ)(f.FC,{color:"gray500",size:"lg"})});const m=i&&L.charts.getColorPalette(i.length-2)||[],{smoothedResults:h}=(0,S.vq)(i),g=h?h.map(((e,t)=>{let{seriesName:r,...n}=e;return{seriesName:(0,S.HF)(r)||"p75",...n,color:m[t],lineStyle:{opacity:1,width:2}}})):[],v=(0,_.vk)(g),y=Math.max(v,V);return I.yAxis.max=1.1*y,(0,b.tZ)(c.Z,{start:E,end:A,period:C,utc:D,projects:t,environments:r,children:t=>{let{releaseSeries:r}=t;return(0,b.BX)(p.Z,{loading:o,reloading:u,children:[(0,b.tZ)(d.Z,{visible:u}),(0,x.Z)({value:(0,b.tZ)(l.Z,{...e,...I,legend:O,onLegendSelectChanged:N,series:[...R,...r,...g]}),fixed:"Web Vitals Chart"})]})}})}})})]})})}Z.displayName="VitalChart";const C=(0,n.withRouter)(Z);function P(e,t){return e===(null==t?void 0:t.poorCountField.replace("equation|",""))?_.SP.POOR:e===(null==t?void 0:t.mehCountField.replace("equation|",""))?_.SP.MEH:e===(null==t?void 0:t.goodCountField.replace("equation|",""))?_.SP.GOOD:void 0}function E(e){const{field:t,data:r,loading:n,reloading:a,height:s,grid:o,utc:c,vitalFields:u}=e;if(!r||!u)return null;const m=(0,i.u)(),h={grid:o,seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,r)=>(0,v.CX)(e,u[0]===y.Zl.CLS?r:t)},xAxis:{show:!1},xAxes:void 0,yAxis:{axisLabel:{color:m.chartLabel,showMaxLabel:!1,formatter:e=>(0,v.gu)(e,t)}},utc:c,isGroupedByDate:!0,showTimeInTooltip:!0},f=r.filter((e=>!!P(e.seriesName,u))),g=null!=f&&f.length?f.map((e=>{let{seriesName:t,...r}=e;const n=P(t,u)||"count";return{seriesName:n,...r,color:m[_.fL[n]],lineStyle:{opacity:1,width:2}}})):[];return(0,b.tZ)("div",{children:(0,b.BX)(p.Z,{loading:n,reloading:a,children:[(0,b.tZ)(d.Z,{visible:a}),(0,x.Z)({value:(0,b.tZ)(l.Z,{height:s,...h,onLegendSelectChanged:()=>{},series:[...g],isGroupedByDate:!0}),fixed:"Web Vitals Chart"})]})})}E.displayName="_VitalChart"},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,r)=>{r.d(t,{Z:()=>o}),r("../node_modules/react/index.js");var n=r("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),i=r("./app/views/performance/landing/vitalsCards.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{vital:t,location:r,isLoading:s,hideBar:o,hideStates:l,hideVitalPercentNames:c,hideDurationDetail:u}=e;const p=Array.isArray(t)?t:[t],d={vital:t,showBar:!o,showStates:!l,showVitalPercentNames:!c,showDurationDetail:!u};return(0,a.tZ)(n.Z,{location:r,vitals:p,children:e=>{let{isLoading:t,vitalsData:r}=e;return(0,a.tZ)(i.JO,{...d,isLoading:s||t,data:r})}})}s.displayName="VitalInfo";const o=s}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_vitalDetail_index_tsx.f7a71a455271e39de5a705cc7d315c3a.js.map