"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectPlugins_details_tsx"],{"./app/utils/withPlugins.tsx":(t,e,i)=>{i.d(e,{Z:()=>b});var s=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/react/index.js")),r=i("./app/actionCreators/plugins.tsx"),l=i("../node_modules/reflux/src/index.js"),a=i.n(l),o=i("./app/actions/pluginActions.tsx");const p={loading:!0,plugins:[],error:null,pageLinks:null},d={plugins:null,state:{...p},updating:new Map,reset(){return this.plugins=null,this.state={...p},this.updating=new Map,this.state},getInitialState(){return this.getState()},getState(){const{plugins:t,...e}=this.state;return{...e,plugins:this.plugins?Array.from(this.plugins.values()):[]}},init(){this.reset(),this.listenTo(o.Z.fetchAll,this.onFetchAll),this.listenTo(o.Z.fetchAllSuccess,this.onFetchAllSuccess),this.listenTo(o.Z.fetchAllError,this.onFetchAllError),this.listenTo(o.Z.update,this.onUpdate),this.listenTo(o.Z.updateSuccess,this.onUpdateSuccess),this.listenTo(o.Z.updateError,this.onUpdateError)},triggerState(){this.trigger(this.getState())},onFetchAll(){let{resetLoading:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(this.state.loading=!0,this.state.error=null,this.plugins=null),this.triggerState()},onFetchAllSuccess(t,e){let{pageLinks:i}=e;this.plugins=new Map(t.map((t=>[t.id,t]))),this.state.pageLinks=i||null,this.state.loading=!1,this.triggerState()},onFetchAllError(t){this.plugins=null,this.state.loading=!1,this.state.error=t,this.triggerState()},onUpdate(t,e){if(!this.plugins)return;const i=this.plugins.get(t);if(!i)return;const s={...i,...e};this.plugins.set(t,s),this.updating.set(t,i),this.triggerState()},onUpdateSuccess(t,e){this.updating.delete(t)},onUpdateError(t,e,i){const s=this.updating.get(t);s&&this.plugins&&(this.plugins.set(t,s),this.updating.delete(t),this.state.error=i,this.triggerState())}},u=a().createStore(d);var c=i("./app/utils.tsx"),h=i("./app/utils/getDisplayName.tsx"),g=i("./app/utils/withOrganization.tsx"),m=i("./app/utils/withProject.tsx"),Z=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const b=function(t){class e extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{plugins:[],loading:!0}),(0,s.Z)(this,"unsubscribe",u.listen((t=>{let{plugins:e,loading:i}=t;this.setState({plugins:e,loading:i})}),void 0))}componentDidMount(){this.fetchPlugins()}componentDidUpdate(t,e,i){const{organization:s,project:n}=this.props,r=t.organization||(null==i?void 0:i.organization),l=t.project||(null==i?void 0:i.project);if(!(0,c.ri)(l)||!(0,c.ri)(r))return;const a=r.slug===s.slug,o=l.slug===(null==n?void 0:n.slug);a&&o||this.fetchPlugins()}componentWillUnmount(){this.unsubscribe()}fetchPlugins(){const{organization:t,project:e}=this.props;e&&t&&(0,r.MM)({projectId:e.slug,orgId:t.slug})}render(){return(0,Z.tZ)(t,{...this.props,plugins:this.state})}}return e.displayName="WithPlugins",(0,s.Z)(e,"displayName",`withPlugins(${(0,h.Z)(t)})`),(0,g.Z)((0,m.Z)(e))}},"./app/views/asyncView.tsx":(t,e,i)=>{i.d(e,{Z:()=>l}),i("../node_modules/react/index.js");var s=i("./app/components/asyncComponent.tsx"),n=i("./app/components/sentryDocumentTitle.tsx"),r=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class l extends s.Z{getTitle(){return""}render(){return(0,r.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}l.displayName="AsyncView"},"./app/views/settings/projectPlugins/details.tsx":(t,e,i)=>{i.r(e),i.d(e,{ProjectPluginDetails:()=>b,default:()=>x});var s=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("./app/actionCreators/indicator.tsx")),l=i("./app/actionCreators/plugins.tsx"),a=i("./app/components/button.tsx"),o=i("./app/components/links/externalLink.tsx"),p=i("./app/components/pluginConfig.tsx"),d=i("./app/locale.tsx"),u=i("./app/styles/space.tsx"),c=i("./app/utils/integrationUtil.tsx"),h=i("./app/utils/withPlugins.tsx"),g=i("./app/views/asyncView.tsx"),m=i("./app/views/settings/components/settingsPageHeader.tsx"),Z=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends g.Z{constructor(){super(...arguments),(0,s.Z)(this,"handleReset",(()=>{const{projectId:t,orgId:e,pluginId:i}=this.props.params;(0,r.E3)((0,d.t)("Saving changesâ€¦")),(0,c.Db)("integrations.uninstall_clicked",{integration:i,integration_type:"plugin",view:"plugin_details",organization:this.props.organization}),this.api.request(`/projects/${e}/${t}/plugins/${i}/`,{method:"POST",data:{reset:!0},success:t=>{this.setState({pluginDetails:t}),(0,r.S9)((0,d.t)("Plugin was reset")),(0,c.Db)("integrations.uninstall_completed",{integration:i,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})},error:()=>{(0,r.Iw)((0,d.t)("An error occurred"))}})})),(0,s.Z)(this,"handleEnable",(()=>{(0,l.Cg)(this.props.params),this.analyticsChangeEnableStatus(!0)})),(0,s.Z)(this,"handleDisable",(()=>{(0,l.rR)(this.props.params),this.analyticsChangeEnableStatus(!1)})),(0,s.Z)(this,"analyticsChangeEnableStatus",(t=>{const{pluginId:e}=this.props.params,i=t?"integrations.enabled":"integrations.disabled";(0,c.Db)(i,{integration:e,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})}))}componentDidUpdate(t,e){super.componentDidUpdate(t,e),t.params.pluginId!==this.props.params.pluginId&&this.recordDetailsViewed()}componentDidMount(){this.recordDetailsViewed()}recordDetailsViewed(){const{pluginId:t}=this.props.params;(0,c.Db)("integrations.details_viewed",{integration:t,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})}getTitle(){const{plugin:t}=this.state;return t&&t.name?t.name:"Sentry"}getEndpoints(){const{projectId:t,orgId:e,pluginId:i}=this.props.params;return[["pluginDetails",`/projects/${e}/${t}/plugins/${i}/`]]}trimSchema(t){return t.split("//")[1]}getEnabled(){const{pluginDetails:t}=this.state,{plugins:e}=this.props,i=e&&e.plugins&&e.plugins.find((t=>{let{slug:e}=t;return e===this.props.params.pluginId}));return i?i.enabled:t&&t.enabled}renderActions(){const{pluginDetails:t}=this.state;if(!t)return null;const e=this.getEnabled(),i=(0,Z.tZ)(v,{size:"small",onClick:this.handleEnable,children:(0,d.t)("Enable Plugin")}),s=(0,Z.tZ)(v,{size:"small",priority:"danger",onClick:this.handleDisable,children:(0,d.t)("Disable Plugin")}),n=e?s:i;return(0,Z.BX)("div",{className:"pull-right",children:[t.canDisable&&n,(0,Z.tZ)(a.ZP,{size:"small",onClick:this.handleReset,children:(0,d.t)("Reset Configuration")})]})}renderBody(){var t,e;const{organization:i,project:s}=this.props,{pluginDetails:n}=this.state;return n?(0,Z.BX)("div",{children:[(0,Z.tZ)(m.Z,{title:n.name,action:this.renderActions()}),(0,Z.BX)("div",{className:"row",children:[(0,Z.tZ)("div",{className:"col-md-7",children:(0,Z.tZ)(p.Z,{organization:i,project:s,data:n,enabled:this.getEnabled(),onDisablePlugin:this.handleDisable})}),(0,Z.tZ)("div",{className:"col-md-4 col-md-offset-1",children:(0,Z.BX)("div",{className:"pluginDetails-meta",children:[(0,Z.tZ)("h4",{children:(0,d.t)("Plugin Information")}),(0,Z.BX)("dl",{className:"flat",children:[(0,Z.tZ)("dt",{children:(0,d.t)("Name")}),(0,Z.tZ)("dd",{children:n.name}),(0,Z.tZ)("dt",{children:(0,d.t)("Author")}),(0,Z.tZ)("dd",{children:null===(t=n.author)||void 0===t?void 0:t.name}),(null===(e=n.author)||void 0===e?void 0:e.url)&&(0,Z.BX)("div",{children:[(0,Z.tZ)("dt",{children:(0,d.t)("URL")}),(0,Z.tZ)("dd",{children:(0,Z.tZ)(o.Z,{href:n.author.url,children:this.trimSchema(n.author.url)})})]}),(0,Z.tZ)("dt",{children:(0,d.t)("Version")}),(0,Z.tZ)("dd",{children:n.version})]}),n.description&&(0,Z.BX)("div",{children:[(0,Z.tZ)("h4",{children:(0,d.t)("Description")}),(0,Z.tZ)("p",{className:"description",children:n.description})]}),n.resourceLinks&&(0,Z.BX)("div",{children:[(0,Z.tZ)("h4",{children:(0,d.t)("Resources")}),(0,Z.tZ)("dl",{className:"flat",children:n.resourceLinks.map((t=>{let{title:e,url:i}=t;return(0,Z.tZ)("dd",{children:(0,Z.tZ)(o.Z,{href:i,children:e})},i)}))})]})]})})]})]}):null}}const x=(0,h.Z)(b),v=(0,n.Z)(a.ZP,{target:"eq4tbyn0"})("margin-right:",(0,u.Z)(.75),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectPlugins_details_tsx.40acbceedf5b9e3c81e234ff9236dc0e.js.map