"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_traceDetails_index_tsx"],{"./app/utils/discover/discoverQuery.tsx":(e,t,r)=>{r.d(t,{Z:()=>l}),r("../node_modules/react/index.js");var n=r("./app/utils/withApi.tsx"),s=r("./app/utils/discover/genericDiscoverQuery.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function o(e){return(0,i.tZ)(s.ZP,{route:"eventsv2",shouldRefetchData:a,...e})}o.displayName="DiscoverQuery";const l=(0,n.Z)(o)},"./app/utils/performance/histogram/utils.tsx":(e,t,r)=>{r.d(t,{te:()=>s,_W:()=>i,GT:()=>a});var n=r("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function i(e){const t=s(e);return e.map((e=>{const r=e.bin;return{start:r,end:r+t}}))}function a(e){let{precision:t,type:r,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e=>{switch(r){case"duration":const s=null!=t?t:e<1e3?0:3;return(0,n.g9)(e/1e3,s,!0);case"number":const i=10**(null!=t?t:0);return(Math.round((e+Number.EPSILON)*i)/i).toLocaleString();default:throw new Error(`Unable to format type: ${r}`)}};return e.map((e=>{var t;return{value:e.count,name:i(e.bin),...null!==(t=null==s?void 0:s(e.bin))&&void 0!==t?t:{}}}))}},"./app/utils/performance/quickTrace/traceFullQuery.tsx":(e,t,r)=>{r.d(t,{g:()=>p,H:()=>u});var n=r("../node_modules/react/index.js"),s=r("./app/utils/discover/genericDiscoverQuery.tsx"),i=r("./app/utils/performance/quickTrace/utils.tsx"),a=r("./app/utils/withApi.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{detailed:t,eventId:r,...n}=e;const s=(0,i.eF)(n);return s.detailed=t?"1":"0",r&&(s.event_id=r),s}function c(e){let{children:t}=e;return(0,o.tZ)(n.Fragment,{children:t({isLoading:!1,error:null,traces:null,type:"full"})})}function d(e){let{traceId:t,start:r,end:n,statsPeriod:a,children:d,...p}=e;if(!t)return(0,o.tZ)(c,{children:d});const u=(0,i._Z)({start:r,end:n,statsPeriod:a});return(0,o.tZ)(s.ZP,{route:`events-trace/${t}`,getRequestPayload:l,eventView:u,...p,children:e=>{let{tableData:t,...r}=e;return d({traces:t||null,type:"full",...r})}})}c.displayName="EmptyTrace",d.displayName="GenericTraceFullQuery";const p=(0,a.Z)((e=>(0,o.tZ)(d,{...e,detailed:!1}))),u=(0,a.Z)((e=>(0,o.tZ)(d,{...e,detailed:!0})))},"./app/utils/performance/quickTrace/traceMetaQuery.tsx":(e,t,r)=>{r.d(t,{Z:()=>c});var n=r("../node_modules/react/index.js"),s=r("./app/utils/discover/genericDiscoverQuery.tsx"),i=r("./app/utils/performance/quickTrace/utils.tsx"),a=r("./app/utils/withApi.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{traceId:t,start:r,end:a,statsPeriod:l,children:c,...d}=e;if(!t)return(0,o.tZ)(n.Fragment,{children:c({isLoading:!1,error:null,meta:null})});const p=(0,i._Z)({start:r,end:a,statsPeriod:l});return(0,o.tZ)(s.ZP,{route:`events-trace-meta/${t}`,getRequestPayload:i.eF,eventView:p,...d,children:e=>{let{tableData:t,...r}=e;return c({meta:t,...r})}})}l.displayName="TraceMetaQuery";const c=(0,a.Z)(l)},"./app/views/performance/breadcrumb.tsx":(e,t,r)=>{r.d(t,{Z:()=>v});var n=r("../node_modules/react/index.js"),s=r("./app/components/breadcrumbs.tsx"),i=r("./app/locale.tsx"),a=r("./app/utils/queryString.tsx"),o=r("./app/views/performance/transactionSummary/tabs.tsx"),l=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=r("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),d=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),p=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),u=r("./app/views/performance/transactionSummary/utils.tsx"),h=r("./app/views/performance/vitalDetail/utils.tsx"),m=r("./app/views/performance/utils.tsx"),g=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class f extends n.Component{getCrumbs(){const e=[],{organization:t,location:r,transaction:n,vitalName:s,spanSlug:g,eventSlug:f,traceSlug:v,tab:x}=this.props,y={pathname:(0,m.de)(t),query:{...r.query,transaction:void 0}};if(e.push({to:y,label:(0,i.t)("Performance"),preservePageFilters:!0}),s){const n=(0,h.i4)({orgSlug:t.slug,vitalName:"fcp",projectID:(0,a.ro)(r.query.project),query:r.query});e.push({to:n,label:(0,i.t)("Vital Detail"),preservePageFilters:!0})}else if(n){const s={orgSlug:t.slug,transaction:n.name,projectID:n.project,query:r.query};switch(x){case o.Z.Tags:{const t=(0,d.vG)(s);e.push({to:t,label:(0,i.t)("Tags"),preservePageFilters:!0});break}case o.Z.Events:{const t=(0,l.xr)(s);e.push({to:t,label:(0,i.t)("All Events"),preservePageFilters:!0});break}case o.Z.WebVitals:{const t=(0,p.Pl)(s);e.push({to:t,label:(0,i.t)("Web Vitals"),preservePageFilters:!0});break}case o.Z.Spans:{const t=(0,c.hN)(s);e.push({to:t,label:(0,i.t)("Spans"),preservePageFilters:!0});break}case o.Z.TransactionSummary:default:{const t=(0,u.e1)(s);e.push({to:t,label:(0,i.t)("Transaction Summary"),preservePageFilters:!0})}}}return n&&g?e.push({to:"",label:(0,i.t)("Span Summary")}):n&&f?e.push({to:"",label:(0,i.t)("Event Details")}):v&&e.push({to:"",label:(0,i.t)("Trace View")}),e}render(){return(0,g.tZ)(s.Z,{crumbs:this.getCrumbs()})}}f.displayName="Breadcrumb";const v=f},"./app/views/performance/traceDetails/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>$e});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/react/index.js"),i=r("./app/components/noProjectMessage.tsx"),a=r("./app/components/organizations/pageFilters/parse.tsx"),o=r("./app/components/sentryDocumentTitle.tsx"),l=r("./app/constants/pageFilters.tsx"),c=r("./app/locale.tsx"),d=r("./app/styles/organization.tsx"),p=r("./app/utils/discover/eventView.tsx"),u=r("./app/utils/performance/quickTrace/traceFullQuery.tsx"),h=r("./app/utils/performance/quickTrace/traceMetaQuery.tsx"),m=r("./app/utils/queryString.tsx"),g=r("./app/utils/withApi.tsx"),f=r("./app/utils/withOrganization.tsx"),v=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),x=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/@sentry/hub/esm/hub.js")),y=r("./app/components/alert.tsx"),Z=r("./app/components/assistant/guideAnchor.tsx"),b=r("./app/components/buttonBar.tsx"),T=r("./app/components/discover/discoverFeature.tsx"),w=r("./app/components/discoverButton.tsx"),S=r("./app/components/events/interfaces/spans/anchorLinkManager.tsx"),_=r("./app/components/events/interfaces/spans/dividerHandlerManager.tsx"),E=r("./app/components/events/interfaces/spans/scrollbarManager.tsx"),C=r("./app/components/layouts/thirds.tsx"),D=r("./app/components/links/externalLink.tsx"),I=r("./app/components/links/link.tsx"),P=r("./app/components/loadingError.tsx"),A=r("./app/components/loadingIndicator.tsx"),j=r("./app/components/performance/waterfall/messageRow.tsx"),q=r("./app/components/performance/waterfall/miniHeader.tsx"),O=r("./app/components/performance/waterfall/rowDetails.tsx"),L=r("./app/components/performance/waterfall/utils.tsx"),R=r("./app/components/timeSince.tsx"),M=r("./app/icons/index.tsx"),k=r("./app/styles/space.tsx"),F=r("./app/utils/discover/discoverQuery.tsx"),z=r("./app/utils/formatters.tsx"),V=r("./app/utils/fuzzySearch.tsx"),B=r("./app/utils/getDynamicText.tsx"),X=r("./app/utils/performance/quickTrace/utils.tsx"),N=r("./app/views/performance/breadcrumb.tsx"),$=r("./app/views/performance/transactionDetails/styles.tsx"),H=r("./app/components/events/eventTags/eventTagsPill.tsx"),U=r("./app/components/events/interfaces/spans/header.tsx"),G=r("./app/components/panels/index.tsx"),Q=r("./app/components/pills.tsx"),W=r("./app/components/searchBar.tsx"),K=r("./app/utils.tsx"),Y=r("./app/views/performance/transactionSummary/utils.tsx"),J=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),ee=r("./app/components/events/interfaces/spans/spanDetail.tsx");const te=(0,n.Z)("div",{target:"euzgho58"})({name:"7whenc",styles:"display:flex;width:100%"}),re=(0,n.Z)(W.Z,{target:"euzgho57"})({name:"1ff36h2",styles:"flex-grow:1"}),ne=(0,n.Z)(U.i,{target:"euzgho56"})("position:static;top:auto;border-top:none;border-bottom:1px solid ",(e=>e.theme.border),";"),se=(0,n.Z)("div",{target:"euzgho55"})("display:grid;grid-template-columns:1fr;gap:",(0,k.Z)(3),";margin-bottom:",(0,k.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:max-content max-content;grid-row-gap:0;}"),ie=(0,n.Z)("div",{target:"euzgho54"})("margin-top:",(0,k.Z)(2),";"),ae=(0,n.Z)("div",{target:"euzgho53"})({name:"1wr20zt",styles:"overflow-x:hidden;border-bottom-left-radius:3px;border-bottom-right-radius:3px"}),oe=(0,n.Z)(G.s_,{target:"euzgho52"})({name:"d3v9zr",styles:"overflow:hidden"}),le=(0,n.Z)("span",{target:"euzgho51"})("margin-right:",(0,k.Z)(.75),";display:flex;flex-direction:column;justify-content:center;"),ce=(0,n.Z)(Q.Z,{target:"euzgho50"})("padding-top:",(0,k.Z)(1.5),";");function de(e){let{location:t,organization:r,transaction:n}=e;const{tags:s}=n;if(!s||s.length<=0)return null;const i=r.slug,a=`/organizations/${i}/releases/`;return(0,J.BX)("tr",{children:[(0,J.tZ)("td",{className:"key",children:"Tags"}),(0,J.tZ)("td",{className:"value",children:(0,J.tZ)(ce,{children:s.map(((e,s)=>{const{pathname:o,query:l}=(0,Y.e1)({orgSlug:i,transaction:n.transaction,projectID:String(n.project_id),query:{...t.query,query:(0,m.os)(t.query.query,e.key,e.value)}});return(0,J.tZ)(H.Z,{tag:e,projectId:n.project_slug,organization:r,query:l,streamPath:o,releasesPath:a},(0,K.ri)(e.key)?e.key:`tag-pill-${s}`)}))})})]})}de.displayName="Tags";var pe=r("./app/components/count.tsx"),ue=r("./app/components/idBadge/projectBadge.tsx"),he=r("./app/components/performance/waterfall/constants.tsx"),me=r("./app/components/performance/waterfall/row.tsx"),ge=r("./app/components/performance/waterfall/rowBar.tsx"),fe=r("./app/components/performance/waterfall/rowDivider.tsx"),ve=r("./app/components/performance/waterfall/rowTitle.tsx"),xe=r("./app/components/performance/waterfall/treeConnector.tsx"),ye=r("./app/components/tooltip.tsx"),Ze=r("./app/utils/projects.tsx"),be=r("../node_modules/react-router/es/index.js"),Te=r("../node_modules/lodash/omit.js"),we=r.n(Te),Se=r("./app/components/button.tsx"),_e=r("./app/components/dateTime.tsx"),Ee=r("./app/components/quickTrace/utils.tsx"),Ce=r("./app/utils/discover/urls.tsx"),De=r("./app/utils/performance/urls.ts"),Ie=r("./app/utils/performance/vitals/constants.tsx");class Pe extends s.Component{constructor(){super(...arguments),(0,v.Z)(this,"scrollBarIntoView",(e=>t=>{t.preventDefault();const r=`#txn-${e}`;this.props.scrollToHash(r),be.browserHistory.push({...this.props.location,hash:r})}))}renderTransactionErrors(){const{organization:e,transaction:t}=this.props,{errors:r}=t;return 0===r.length?null:(0,J.tZ)(y.Z,{system:!0,type:"error",icon:(0,J.tZ)(M.FC,{size:"md"}),expand:r.map((t=>(0,J.BX)(O.TV,{children:[(0,J.tZ)(O._U,{level:t.level}),(0,J.tZ)(O.wE,{children:t.level}),(0,J.tZ)(O.St,{children:(0,J.tZ)(I.Z,{to:(0,Ee.F7)(t,e),children:t.title})})]},t.event_id))),children:(0,J.tZ)(O.CM,{children:(0,c.tn)("An error event occurred in this transaction.","%s error events occurred in this transaction.",r.length)})})}renderGoToTransactionButton(){const{location:e,organization:t,transaction:r}=this.props,n=(0,Ce.JE)({id:r.event_id,project:r.project_slug}),s=(0,De.D)(t.slug,n,r.transaction,we()(e.query,Object.values(l.V)));return(0,J.tZ)(qe,{size:"xsmall",to:s,children:(0,c.t)("View Transaction")})}renderGoToSummaryButton(){const{location:e,organization:t,transaction:r}=this.props,n=(0,Y.e1)({orgSlug:t.slug,transaction:r.transaction,query:we()(e.query,Object.values(l.V)),projectID:String(r.project_id)});return(0,J.tZ)(qe,{size:"xsmall",to:n,children:(0,c.t)("View Summary")})}renderMeasurements(){const{transaction:e}=this.props,{measurements:t={}}=e,r=Object.keys(t).filter((e=>Boolean(Ie.r9[`measurements.${e}`]))).sort();return r.length<=0?null:(0,J.tZ)(s.Fragment,{children:r.map((e=>{var r;return(0,J.tZ)(ee.X2,{title:null===(r=Ie.r9[`measurements.${e}`])||void 0===r?void 0:r.name,children:`${Number(t[e].value.toFixed(3)).toLocaleString()}ms`},e)}))})}renderTransactionDetail(){const{location:e,organization:t,transaction:r}=this.props,n=Math.min(r.start_timestamp,r.timestamp),i=Math.max(r.start_timestamp,r.timestamp),a=`${Number((1e3*(i-n)).toFixed(3)).toLocaleString()}ms`;return(0,J.tZ)(ee.iF,{children:(0,J.tZ)("table",{className:"table key-value",children:(0,J.BX)("tbody",{children:[(0,J.tZ)(ee.X2,{title:(0,J.BX)(Ae,{onClick:this.scrollBarIntoView(r.event_id),children:["Transaction ID",(0,J.tZ)(je,{})]}),extra:this.renderGoToTransactionButton(),children:r.event_id}),(0,J.tZ)(ee.X2,{title:"Transaction",extra:this.renderGoToSummaryButton(),children:r.transaction}),(0,J.tZ)(ee.X2,{title:"Transaction Status",children:r["transaction.status"]}),(0,J.tZ)(ee.X2,{title:"Span ID",children:r.span_id}),(0,J.tZ)(ee.X2,{title:"Project",children:r.project_slug}),(0,J.tZ)(ee.X2,{title:"Start Date",children:(0,B.Z)({fixed:"Mar 19, 2021 11:06:27 AM UTC",value:(0,J.BX)(s.Fragment,{children:[(0,J.tZ)(_e.Z,{date:1e3*n}),` (${n})`]})})}),(0,J.tZ)(ee.X2,{title:"End Date",children:(0,B.Z)({fixed:"Mar 19, 2021 11:06:28 AM UTC",value:(0,J.BX)(s.Fragment,{children:[(0,J.tZ)(_e.Z,{date:1e3*i}),` (${i})`]})})}),(0,J.tZ)(ee.X2,{title:"Duration",children:a}),(0,J.tZ)(ee.X2,{title:"Operation",children:r["transaction.op"]||""}),this.renderMeasurements(),(0,J.tZ)(de,{location:e,organization:t,transaction:r})]})})})}render(){return(0,J.BX)(ee.wh,{onClick:e=>{e.stopPropagation()},children:[this.renderTransactionErrors(),this.renderTransactionDetail()]})}}Pe.displayName="TransactionDetail";const Ae=(0,n.Z)("a",{target:"eykqe522"})("display:flex;color:",(e=>e.theme.textColor),";:hover{color:",(e=>e.theme.textColor),";}"),je=(0,n.Z)(M.rS,{target:"eykqe521"})("display:block;color:",(e=>e.theme.gray300),";margin-left:",(0,k.Z)(1),";"),qe=(0,n.Z)(Se.ZP,{target:"eykqe520"})("position:absolute;top:",(0,k.Z)(.75),";right:",(0,k.Z)(.5),";"),Oe=Pe;class Le extends s.Component{constructor(){super(...arguments),(0,v.Z)(this,"state",{showDetail:!1}),(0,v.Z)(this,"transactionRowDOMRef",s.createRef()),(0,v.Z)(this,"toggleDisplayDetail",(()=>{const{transaction:e}=this.props;(0,X.Ci)(e)&&this.setState((e=>({showDetail:!e.showDetail})))})),(0,v.Z)(this,"scrollIntoView",(()=>{const e=this.transactionRowDOMRef.current;if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY;this.setState({showDetail:!0},(()=>window.scrollTo(0,t)))}))}getCurrentOffset(){const{transaction:e}=this.props,{generation:t}=e;return Re(t)}renderConnector(e){const{continuingDepths:t,isExpanded:r,isOrphan:n,isLast:s,transaction:i}=this.props,{generation:a}=i,o=(0,X.Ci)(i)?i.event_id:i.traceSlug;if(0===a)return e?(0,J.tZ)(xe.UV,{style:{right:"15px",height:"10px",bottom:"-5px",top:"auto"},orphanBranch:!1}):null;const l=t.map((e=>{let{depth:t,isOrphanDepth:r}=e;if(a-t<=1)return null;const n=-1*Re(a-t-1)-2;return(0,J.tZ)(xe.UV,{style:{left:n},orphanBranch:r},`${o}-${t}`)}));return e&&r&&l.push((0,J.tZ)(xe.UV,{style:{right:"15px",height:"10px",bottom:s?`-${he.d/2+1}px`:"0",top:"auto"},orphanBranch:!1},`${o}-last`)),(0,J.tZ)(xe.DN,{isLast:s,hasToggler:e,orphanBranch:n,children:l})}renderToggle(e){const{isExpanded:t,transaction:r,toggleExpandedState:n}=this.props,{children:s,generation:i}=r,a=this.getCurrentOffset();if(s.length<=0)return(0,J.tZ)(xe.rw,{style:{left:`${a}px`},children:this.renderConnector(!1)});const o=0===i;return(0,J.BX)(xe.rw,{style:{left:`${a}px`},hasToggler:!0,children:[this.renderConnector(!0),(0,J.BX)(xe.U1,{disabled:o,isExpanded:t,errored:e,onClick:e=>{e.stopPropagation(),o||n()},children:[(0,J.tZ)(pe.Z,{value:s.length}),!o&&(0,J.tZ)("div",{children:(0,J.tZ)(xe.jd,{direction:t?"up":"down"})})]})]})}renderTitle(e){const{generateContentSpanBarRef:t}=e,{organization:r,transaction:n}=this.props,i=this.getCurrentOffset(),a=!!(0,X.Ci)(n)&&n.errors.length>0,o=(0,X.Ci)(n)?(0,J.BX)(s.Fragment,{children:[(0,J.tZ)(Ze.Z,{orgId:r.slug,slugs:[n.project_slug],children:e=>{let{projects:t}=e;const r=t.find((e=>e.slug===n.project_slug));return(0,J.tZ)(le,{children:(0,J.tZ)(ye.Z,{title:n.project_slug,children:(0,J.tZ)(ue.Z,{project:r||{slug:n.project_slug},avatarSize:16,hideName:!0})})})}}),(0,J.BX)(ve.rv,{errored:a,children:[(0,J.BX)("strong",{children:[n["transaction.op"]," — "]}),n.transaction]})]}):(0,J.BX)(ve.rv,{errored:!1,children:[(0,J.tZ)("strong",{children:"Trace — "}),n.traceSlug]});return(0,J.BX)(ve.mw,{ref:t(),children:[this.renderToggle(a),(0,J.tZ)(ve.Wh,{style:{left:`${i}px`,width:"100%"},children:o})]})}renderDivider(e){if(this.state.showDetail)return(0,J.tZ)(fe.xN,{showDetail:!0,style:{position:"absolute"}});const{addDividerLineRef:t}=e;return(0,J.tZ)(fe.xN,{ref:t(),style:{position:"absolute"},onMouseEnter:()=>{e.setHover(!0)},onMouseLeave:()=>{e.setHover(!1)},onMouseOver:()=>{e.setHover(!0)},onMouseDown:e.onDragStart,onClick:e=>{e.stopPropagation()}})}renderGhostDivider(e){const{dividerPosition:t,addGhostDividerLineRef:r}=e;return(0,J.tZ)(fe.Hr,{style:{width:`calc(${(0,L.yI)(t)} + 0.5px)`,display:"none"},children:(0,J.tZ)(fe.xN,{ref:r(),style:{right:0},className:"hovering",onClick:e=>{e.stopPropagation()}})})}renderErrorBadge(){const{transaction:e}=this.props;return(0,X.Ci)(e)&&e.errors.length?(0,J.tZ)(fe.cS,{}):null}renderRectangle(){const{transaction:e,traceInfo:t,barColor:r}=this.props,{showDetail:n}=this.state,s=Math.abs(t.endTimestamp-t.startTimestamp)||1,i=Math.abs(e.start_timestamp-t.startTimestamp)/s,a=Math.abs(e.timestamp-e.start_timestamp),o=a/s;return(0,J.tZ)(ge.e,{spanBarHatch:!1,style:{backgroundColor:r,left:`min(${(0,L.yI)(i||0)}, calc(100% - 1px))`,width:(0,L.yI)(o||0)},children:(0,J.tZ)(ge.R,{durationDisplay:(0,L.ud)({left:i,width:o}),showDetail:n,spanBarHatch:!1,children:(0,L.bQ)(a)})})}renderHeader(e){let{dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:r}=e;const{hasGuideAnchor:n,index:s}=this.props,{showDetail:i}=this.state,{dividerPosition:a}=t;return(0,J.BX)(me.Qc,{showDetail:i,children:[(0,J.tZ)(me.E5,{"data-test-id":"transaction-row-title","data-type":"span-row-cell",style:{width:`calc(${(0,L.yI)(a)} - 0.5px)`,paddingTop:0},showDetail:i,onClick:this.toggleDisplayDetail,children:(0,J.tZ)(Z.Z,{target:"trace_view_guide_row",disabled:!n,children:this.renderTitle(r)})}),(0,J.BX)(fe.kP,{children:[this.renderDivider(t),this.renderErrorBadge()]}),(0,J.tZ)(me.E5,{"data-test-id":"transaction-row-duration","data-type":"span-row-cell",showStriping:s%2!=0,style:{width:`calc(${(0,L.yI)(1-a)} - 0.5px)`,paddingTop:0},showDetail:i,onClick:this.toggleDisplayDetail,children:(0,J.tZ)(Z.Z,{target:"trace_view_guide_row_details",disabled:!n,children:this.renderRectangle()})}),!i&&this.renderGhostDivider(t)]})}renderDetail(){const{location:e,organization:t,isVisible:r,transaction:n}=this.props,{showDetail:s}=this.state;return(0,J.tZ)(S.$,{children:i=>{let{registerScrollFn:a,scrollToHash:o}=i;return(0,X.Ci)(n)?(a(`#txn-${n.event_id}`,this.scrollIntoView),r&&s?(0,J.tZ)(Oe,{location:e,organization:t,transaction:n,scrollToHash:o}):null):null}})}render(){const{isVisible:e,transaction:t}=this.props,{showDetail:r}=this.state;return(0,J.BX)(me.X2,{ref:this.transactionRowDOMRef,visible:e,showBorder:r,cursor:(0,X.Ci)(t)?"pointer":"default",children:[(0,J.tZ)(E.$6,{children:e=>(0,J.tZ)(_.$,{children:t=>this.renderHeader({dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:e})})}),this.renderDetail()]})}}function Re(e){return e*(xe.Ll/2)+0}Le.displayName="TransactionBar";const Me=Le;class ke extends s.Component{constructor(){super(...arguments),(0,v.Z)(this,"state",{isExpanded:!0}),(0,v.Z)(this,"toggleExpandedState",(()=>{this.setState((e=>{let{isExpanded:t}=e;return{isExpanded:!t}}))}))}componentDidUpdate(e,t){t.isExpanded!==this.state.isExpanded&&this.props.updateScrollState()}render(){const{location:e,organization:t,transaction:r,traceInfo:n,continuingDepths:i,isOrphan:a,isLast:o,index:l,isVisible:c,hasGuideAnchor:d,renderedChildren:p,barColor:u}=this.props,{isExpanded:h}=this.state;return(0,J.BX)(s.Fragment,{children:[(0,J.tZ)(Me,{location:e,organization:t,index:l,transaction:r,traceInfo:n,continuingDepths:i,isOrphan:a,isLast:o,isExpanded:h,toggleExpandedState:this.toggleExpandedState,isVisible:c,hasGuideAnchor:d,barColor:u}),h&&p]})}}ke.displayName="TransactionGroup";const Fe=(0,E.Iw)(ke);var ze=r("./app/views/performance/traceDetails/utils.tsx");class Ve extends s.Component{constructor(){super(...arguments),(0,v.Z)(this,"state",{searchQuery:void 0,filteredTransactionIds:void 0}),(0,v.Z)(this,"traceViewRef",s.createRef()),(0,v.Z)(this,"virtualScrollbarContainerRef",s.createRef()),(0,v.Z)(this,"handleTransactionFilter",(e=>{this.setState({searchQuery:e||void 0},this.filterTransactions)})),(0,v.Z)(this,"filterTransactions",(async()=>{const{traces:e}=this.props,{filteredTransactionIds:t,searchQuery:r}=this.state;if(!r||null===e||e.length<=0)return void(void 0!==t&&this.setState({filteredTransactionIds:void 0}));const n=e.flatMap((e=>(0,X.S2)(e,((e,t)=>{const r=[t["transaction.op"],t.transaction,t.project_slug];return e.push({transaction:t,indexed:r}),e}),[]))),s=(await(0,V.I)(n,{keys:["indexed"],includeMatches:!0,threshold:.6,location:0,distance:100,maxPatternLength:32})).search(r).filter((e=>{let{matches:t}=e;return null==t?void 0:t.length})).map((e=>{let{item:t}=e;return t.transaction.event_id})),i=e.flatMap((e=>(0,X.xB)(e,(e=>{let{event_id:t,span_id:n}=e;return t.includes(r)||n.includes(r)})))).map((e=>e.event_id));this.setState({filteredTransactionIds:new Set([...s,...i])})})),(0,v.Z)(this,"isTransactionVisible",(e=>{const{filteredTransactionIds:t}=this.state;return!t||t.has(e.event_id)}))}renderTraceLoading(){return(0,J.tZ)(A.Z,{})}renderTraceRequiresDateRangeSelection(){return(0,J.tZ)(P.Z,{message:(0,c.t)("Trace view requires a date range selection.")})}renderTraceNotFound(){var e,t;const{meta:r,traceEventView:n,traceSlug:i,organization:a,location:o}=this.props,l=null!==(e=null==r?void 0:r.transactions)&&void 0!==e?e:0,d=null!==(t=null==r?void 0:r.errors)&&void 0!==t?t:0;if(0===l&&d>0){const e=n.withColumns([{kind:"field",field:"project"},{kind:"field",field:"title"},{kind:"field",field:"issue.id"},{kind:"field",field:"level"}]);return e.query=`trace:${i} !event.type:transaction `,(0,J.tZ)(F.Z,{eventView:e,orgSlug:a.slug,location:o,referrer:"api.trace-view.errors-view",children:e=>{let{isLoading:t,tableData:r,error:n}=e;return t?(0,J.tZ)(A.Z,{}):n?(0,J.tZ)(y.Z,{type:"error",icon:(0,J.tZ)(M.aU,{size:"md"}),children:(0,J.tZ)(Be,{children:(0,c._N)("The trace cannot be shown when all events are errors. An error occurred when attempting to fetch these error events: [error]",{error:n})})}):(0,J.BX)(y.Z,{type:"error",icon:(0,J.tZ)(M.aU,{size:"md"}),children:[(0,J.tZ)(Be,{children:(0,c.t)("The trace cannot be shown when all events are errors.")}),(0,J.tZ)(O.TV,{"data-test-id":"trace-view-errors",children:r.data.map((e=>(0,J.BX)(s.Fragment,{children:[(0,J.tZ)(O._U,{level:e.level}),(0,J.tZ)(O.wE,{children:e.level}),(0,J.tZ)(O.St,{children:(0,J.tZ)(I.Z,{to:`/organizations/${a.slug}/issues/${e["issue.id"]}/events/${e.id}`,children:e.title})})]},e.id)))})]})}})}return(0,J.tZ)(P.Z,{message:(0,c.t)("The trace you are looking for was not found.")})}renderSearchBar(){return(0,J.tZ)(te,{children:(0,J.tZ)(re,{defaultQuery:"",query:this.state.searchQuery||"",placeholder:(0,c.t)("Search for transactions"),onSearch:this.handleTransactionFilter})})}renderTraceHeader(e){var t,r,n;const{meta:s}=this.props;return(0,J.BX)(se,{children:[(0,J.tZ)(Z.Z,{target:"trace_view_guide_breakdown",children:(0,J.tZ)($.U,{headingText:(0,c.t)("Event Breakdown"),tooltipText:(0,c.t)("The number of transactions and errors there are in this trace."),bodyText:(0,c._N)("[transactions]  |  [errors]",{transactions:(0,c.tn)("%s Transaction","%s Transactions",null!==(t=null==s?void 0:s.transactions)&&void 0!==t?t:e.transactions.size),errors:(0,c.tn)("%s Error","%s Errors",null!==(r=null==s?void 0:s.errors)&&void 0!==r?r:e.errors.size)}),subtext:(0,c.tn)("Across %s project","Across %s projects",null!==(n=null==s?void 0:s.projects)&&void 0!==n?n:e.projects.size)})}),(0,J.tZ)($.U,{headingText:(0,c.t)("Total Duration"),tooltipText:(0,c.t)("The time elapsed between the start and end of this trace."),bodyText:(0,z.g9)(e.endTimestamp-e.startTimestamp,2,!0),subtext:(0,B.Z)({value:(0,J.tZ)(R.Z,{date:1e3*(e.endTimestamp||0)}),fixed:"5 days ago"})})]})}renderTraceWarnings(){const{traces:e}=this.props,{roots:t,orphans:r}=(null!=e?e:[]).reduce(((e,t)=>((0,ze.uM)(t)?e.roots++:e.orphans++,e)),{roots:0,orphans:0});let n=null;return 0===t&&r>0?n=(0,J.tZ)(y.Z,{type:"info",icon:(0,J.tZ)(M.aU,{size:"sm"}),children:(0,J.tZ)(D.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#orphan-traces-and-broken-subtraces",children:(0,c.t)("A root transaction is missing. Transactions linked by a dashed line have been orphaned and cannot be directly linked to the root.")})}):1===t&&r>0?n=(0,J.tZ)(y.Z,{type:"info",icon:(0,J.tZ)(M.aU,{size:"sm"}),children:(0,J.tZ)(D.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#orphan-traces-and-broken-subtraces",children:(0,c.t)("This trace has broken subtraces. Transactions linked by a dashed line have been orphaned and cannot be directly linked to the root.")})}):t>1&&(n=(0,J.tZ)(y.Z,{type:"info",icon:(0,J.tZ)(M.aU,{size:"sm"}),children:(0,J.tZ)(D.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#multiple-roots",children:(0,c.t)("Multiple root transactions have been found with this trace ID.")})})),n}renderInfoMessage(e){let{isVisible:t,numberOfHiddenTransactionsAbove:r}=e;const n=[];return t&&(1===r?n.push((0,J.tZ)("span",{children:(0,c._N)("[numOfTransaction] hidden transaction",{numOfTransaction:(0,J.tZ)("strong",{children:r})})},"stuff")):r>1&&n.push((0,J.tZ)("span",{children:(0,c._N)("[numOfTransaction] hidden transactions",{numOfTransaction:(0,J.tZ)("strong",{children:r})})},"stuff"))),n.length<=0?null:(0,J.tZ)(j.V,{children:n})}renderLimitExceededMessage(e){var t;const{traceEventView:r,organization:n,meta:s}=this.props,i=e.transactions.size,a=null!==(t=null==s?void 0:s.transactions)&&void 0!==t?t:i;if(null===a||i>=a)return null;const o=r.getResultsViewUrlTarget(n.slug);return(0,J.tZ)(j.V,{children:(0,c._N)("Limited to a view of [count] transactions. To view the full list, [discover].",{count:i,discover:(0,J.tZ)(T.Z,{children:e=>{let{hasFeature:t}=e;return(0,J.tZ)(I.Z,{disabled:!t,to:o,children:"Open in Discover"})}})})})}renderTransaction(e,t){let{continuingDepths:r,isOrphan:n,isLast:i,index:a,numberOfHiddenTransactionsAbove:o,traceInfo:l,hasGuideAnchor:c}=t;const{location:d,organization:p}=this.props,{children:u,event_id:h}=e,m=e.generation+1,g=this.isTransactionVisible(e),f=u.reduce(((e,t,s)=>{const i=s===u.length-1,a=t.children.length>0,o=this.renderTransaction(t,{continuingDepths:!i&&a?[...r,{depth:m,isOrphanDepth:n}]:r,isOrphan:n,isLast:i,index:e.lastIndex+1,numberOfHiddenTransactionsAbove:e.numberOfHiddenTransactionsAbove,traceInfo:l,hasGuideAnchor:!1});return e.lastIndex=o.lastIndex,e.numberOfHiddenTransactionsAbove=o.numberOfHiddenTransactionsAbove,e.renderedChildren.push(o.transactionGroup),e}),{renderedChildren:[],lastIndex:a,numberOfHiddenTransactionsAbove:g?0:o+1});return{transactionGroup:(0,J.BX)(s.Fragment,{children:[this.renderInfoMessage({isVisible:g,numberOfHiddenTransactionsAbove:o}),(0,J.tZ)(Fe,{location:d,organization:p,traceInfo:l,transaction:{...e,generation:m},continuingDepths:r,isOrphan:n,isLast:i,index:a,isVisible:g,hasGuideAnchor:c,renderedChildren:f.renderedChildren,barColor:(0,L.hd)(e["transaction.op"])})]},h),lastIndex:f.lastIndex,numberOfHiddenTransactionsAbove:f.numberOfHiddenTransactionsAbove}}renderTraceView(e){var t;const r=null===(t=x.Gd().getScope())||void 0===t?void 0:t.getTransaction(),n=null==r?void 0:r.startChild({op:"trace.render",description:"trace-view-content"}),{location:s,organization:i,traces:a,traceSlug:o}=this.props;if(null===a||a.length<=0)return this.renderTraceNotFound();const l={index:1,numberOfHiddenTransactionsAbove:0,traceInfo:e,transactionGroups:[]},{transactionGroups:c,numberOfHiddenTransactionsAbove:d}=a.reduce(((e,t,r)=>{const n=r===a.length-1,s=t.children.length>0,i=!n&&null!==a[r+1].parent_span_id,o=this.renderTransaction(t,{...e,isOrphan:!(0,ze.uM)(t),isLast:n,continuingDepths:!n&&s?[{depth:0,isOrphanDepth:i}]:[],hasGuideAnchor:0===r});return e.index=o.lastIndex+1,e.numberOfHiddenTransactionsAbove=o.numberOfHiddenTransactionsAbove,e.transactionGroups.push(o.transactionGroup),e}),l),p=(0,J.tZ)(ie,{children:(0,J.tZ)(_.z,{interactiveLayerRef:this.traceViewRef,children:(0,J.tZ)(_.$,{children:t=>{let{dividerPosition:r}=t;return(0,J.tZ)(E.zt,{dividerPosition:r,interactiveLayerRef:this.virtualScrollbarContainerRef,children:(0,J.BX)(oe,{children:[(0,J.BX)(ne,{children:[(0,J.tZ)(E.$6,{children:e=>{let{virtualScrollbarRef:t,scrollBarAreaRef:n,onDragStart:s,onScroll:i}=e;return(0,J.BX)(q.cs,{ref:this.virtualScrollbarContainerRef,style:{width:`calc(${(0,L.yI)(r)} - 0.5px)`},onScroll:i,children:[(0,J.tZ)("div",{style:{width:0,height:"1px"},ref:n}),(0,J.tZ)(q.Qk,{"data-type":"virtual-scrollbar",ref:t,onMouseDown:s,children:(0,J.tZ)(q.v6,{})})]})}}),(0,J.tZ)(q._i,{})]}),(0,J.BX)(ae,{ref:this.traceViewRef,children:[(0,J.tZ)(S.z,{children:(0,J.tZ)(Fe,{location:s,organization:i,traceInfo:e,transaction:{traceSlug:o,generation:0,"transaction.duration":e.endTimestamp-e.startTimestamp,children:a,start_timestamp:e.startTimestamp,timestamp:e.endTimestamp},continuingDepths:[],isOrphan:!1,isLast:!1,index:0,isVisible:!0,hasGuideAnchor:!1,renderedChildren:c,barColor:(0,L.hd)("")})}),this.renderInfoMessage({isVisible:!0,numberOfHiddenTransactionsAbove:d}),this.renderLimitExceededMessage(e)]})]})})}})})});return null==n||n.finish(),p}renderContent(){const{dateSelected:e,isLoading:t,error:r,traces:n}=this.props;if(!e)return this.renderTraceRequiresDateRangeSelection();if(t)return this.renderTraceLoading();if(null!==r||null===n||n.length<=0)return this.renderTraceNotFound();const i=(0,ze.Rg)(n);return(0,J.BX)(s.Fragment,{children:[this.renderTraceWarnings(),this.renderTraceHeader(i),this.renderSearchBar(),this.renderTraceView(i)]})}render(){const{organization:e,location:t,traceEventView:r,traceSlug:n}=this.props;return(0,J.BX)(s.Fragment,{children:[(0,J.BX)(C.h4,{children:[(0,J.BX)(C.oB,{children:[(0,J.tZ)(N.Z,{organization:e,location:t,traceSlug:n}),(0,J.tZ)(C.Dx,{"data-test-id":"trace-header",children:(0,c.t)("Trace ID: %s",n)})]}),(0,J.tZ)(C.kP,{children:(0,J.tZ)(b.ZP,{gap:1,children:(0,J.tZ)(w.Z,{to:r.getResultsViewUrlTarget(e.slug),children:"Open in Discover"})})})]}),(0,J.tZ)(C.uT,{children:(0,J.tZ)(C.or,{fullWidth:!0,children:this.renderContent()})})]})}}Ve.displayName="TraceDetailsContent";const Be=(0,n.Z)("div",{target:"e4rl0ig0"})("margin-bottom:",(0,k.Z)(1),";"),Xe=Ve;class Ne extends s.Component{getDocumentTitle(){return[(0,c.t)("Trace Details"),(0,c.t)("Performance")].join(" - ")}getTraceSlug(){const{traceSlug:e}=this.props.params;return"string"==typeof e?e.trim():""}getDateSelection(){const{location:e}=this.props,t=(0,a.fK)(e.query,{allowAbsolutePageDatetime:!0});return{start:(0,m.ro)(t.start),end:(0,m.ro)(t.end),statsPeriod:(0,m.ro)(t.statsPeriod)}}getTraceEventView(){const e=this.getTraceSlug(),{start:t,end:r,statsPeriod:n}=this.getDateSelection();return p.ZP.fromSavedQuery({id:void 0,name:`Events with Trace ID ${e}`,fields:["title","event.type","project","timestamp"],orderby:"-timestamp",query:`trace:${e}`,projects:[l.mP],version:2,start:t,end:r,range:n})}renderContent(){const{location:e,organization:t,params:r}=this.props,n=this.getTraceSlug(),{start:s,end:i,statsPeriod:a}=this.getDateSelection(),o=Boolean(a||s&&i),l=s=>{let{isLoading:i,error:a,traces:l,meta:c}=s;return(0,J.tZ)(Xe,{location:e,organization:t,params:r,traceSlug:n,traceEventView:this.getTraceEventView(),dateSelected:o,isLoading:i,error:a,traces:l,meta:c})};return o?(0,J.tZ)(u.H,{location:e,orgSlug:t.slug,traceId:n,start:s,end:i,statsPeriod:a,children:r=>(0,J.tZ)(h.Z,{location:e,orgSlug:t.slug,traceId:n,start:s,end:i,statsPeriod:a,children:e=>l({isLoading:r.isLoading||e.isLoading,error:r.error||e.error,traces:r.traces,meta:e.meta})})}):l({isLoading:!1,error:"date selection not specified",traces:null,meta:null})}render(){const{organization:e}=this.props;return(0,J.tZ)(o.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,J.tZ)(He,{children:(0,J.tZ)(i.Z,{organization:e,children:this.renderContent()})})})}}Ne.displayName="TraceSummary";const $e=(0,f.Z)((0,g.Z)(Ne)),He=(0,n.Z)(d.JH,{target:"eqzhpg90"})({name:"1hcx8jb",styles:"padding:0"})},"./app/views/performance/transactionDetails/styles.tsx":(e,t,r)=>{r.d(t,{U:()=>c});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/react/index.js"),r("./app/components/charts/styles.tsx")),i=r("./app/components/featureBadge.tsx"),a=r("./app/components/questionTooltip.tsx"),o=r("./app/styles/space.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{headingText:t,tooltipText:r,bodyText:n,subtext:s,badge:i}=e;return(0,l.BX)(d,{children:[(0,l.BX)(p,{children:[t,(0,l.tZ)(a.Z,{position:"top",size:"sm",containerDisplayMode:"block",title:r}),i&&(0,l.tZ)(h,{type:i})]}),(0,l.tZ)(u,{children:n}),(0,l.tZ)(m,{children:s})]})}c.displayName="MetaData";const d=(0,n.Z)("div",{target:"eqz9f144"})({name:"4ks2md",styles:"height:78px"}),p=(0,n.Z)(s.OT,{target:"eqz9f143"})({name:"ti75j2",styles:"margin:0"}),u=(0,n.Z)("div",{target:"eqz9f142"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";padding:",(0,o.Z)(.5)," 0;max-height:32px;"),h=(0,n.Z)(i.Z,{target:"eqz9f141"})({name:"ti75j2",styles:"margin:0"}),m=(0,n.Z)("div",{target:"eqz9f140"})("color:",(e=>"error"===e.type?e.theme.error:e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";")},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,r)=>{var n;r.d(t,{Z:()=>s}),function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.WebVitals=1]="WebVitals",e[e.Tags=2]="Tags",e[e.Events=3]="Events",e[e.Spans=4]="Spans",e[e.Anomalies=5]="Anomalies"}(n||(n={}));const s=n},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,r)=>{r.d(t,{q3:()=>o,_S:()=>l,xr:()=>c,tb:()=>d,qg:()=>p,Zq:()=>u});var n=r("./app/locale.tsx"),s=r("./app/utils/queryString.tsx"),i=r("./app/views/performance/transactionSummary/filter.tsx"),a=r("./app/views/performance/transactionSummary/utils.tsx");let o;function l(e,t){const{p99:r,p95:s,p75:a,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[o.p50]:{name:o.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,i.T$)(e)||"transaction.duration"},label:(0,n.t)("p50")},[o.p75]:{name:o.p75,query:a?[["transaction.duration",`<=${a.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,i.T$)(e)||"transaction.duration"},label:(0,n.t)("p75")},[o.p95]:{name:o.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,i.T$)(e)||"transaction.duration"},label:(0,n.t)("p95")},[o.p99]:{name:o.p99,query:r?[["transaction.duration",`<=${r.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,i.T$)(e)||"transaction.duration"},label:(0,n.t)("p99")},[o.p100]:{name:o.p100,label:(0,n.t)("p100")}}}function c(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function d(e){return t=(0,s.ro)(e.query.showTransactions,o.p100),Object.values(o).includes(t)?t:o.p100;var t}function p(e,t){var r,n;const s=l(t),i=null===(r=s[e].sort)||void 0===r?void 0:r.kind,a=null===(n=s[e].sort)||void 0===n?void 0:n.field,o={showTransactions:e};return i&&a&&(o.sort=`${"desc"===i?"-":""}${a}`),o}function u(e){switch(e){case a.K0.OUTLIER:return o.p100;case a.K0.SLOW:return o.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(o||(o={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,r)=>{let n,s;r.d(t,{p:()=>n,g:()=>s}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(n||(n={})),function(e){e.COUNT="count",e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,r)=>{r.d(t,{hN:()=>h,bc:()=>m,CS:()=>g,E5:()=>f,TK:()=>y,KK:()=>Z,W6:()=>b,xz:()=>T,zW:()=>w,uQ:()=>S,mV:()=>_}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js");var n=r("../node_modules/lodash/pick.js"),s=r.n(n),i=r("./app/constants/index.tsx"),a=r("./app/locale.tsx"),o=r("./app/utils.tsx"),l=r("./app/utils/discover/eventView.tsx"),c=r("./app/utils/discover/fields.tsx"),d=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),u=r("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function h(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t}),query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}const m=30,g=s()(i.wh,["1h","24h","7d","14d","30d"]),f=[{prefix:(0,a.t)("Sort By"),label:(0,a.t)("Total Self Time"),field:u.g.SUM_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("Average Count"),field:u.g.AVG_OCCURRENCE},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("Total Count"),field:u.g.COUNT},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p50 Self Time"),field:u.p.P50_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p75 Self Time"),field:u.p.P75_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p95 Self Time"),field:u.p.P95_EXCLUSIVE_TIME},{prefix:(0,a.t)("Sort By"),label:(0,a.t)("p99 Self Time"),field:u.p.P99_EXCLUSIVE_TIME}],v=u.g.SUM_EXCLUSIVE_TIME;function x(e){return f.find((t=>t.field===e))||f.find((e=>e.field===v))}function y(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";const s=null!==(t=(0,d.ro)(null==e||null===(r=e.query)||void 0===r?void 0:r[n]))&&void 0!==t?t:v;return x(s)}function Z(e){return x(e.sorts.length?e.sorts[0].field:v)}function b(e){if(!(0,o.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function T(e){let{location:t,transactionName:r}=e;const n=(0,d.ro)(t.query.query,""),s=new p.MY(n);s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[r]);const i=l.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:[...Object.values(u.g),...Object.values(u.p)],query:s.formatString(),projects:[]},t),a=y(t);return i.withSorts([{field:a.field,kind:"desc"}])}function w(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]}]),r=new p.MY(e.query);return Object.keys(r.filters).forEach((e=>{(0,c.h1)(e)&&r.removeFilter(e)})),t.query=r.formatString(),t}const S={[u.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[u.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[u.g.COUNT]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[u.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[u.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[u.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[u.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]};function _(e){return e.replace("exclusive","self")}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,r)=>{r.d(t,{Zn:()=>i,bZ:()=>a,vG:()=>o,oc:()=>l,oT:()=>c});var n=r("./app/utils/analytics.tsx"),s=r("./app/utils/queryString.tsx");function i(e){return(0,s.ro)(e.query.tagKey)}function a(e){(0,n.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function o(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t}),query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query,tagKey:s.tagKey}}}function l(e){var t,r;let n=null!==(t=(0,s.ro)(null===(r=e.query)||void 0===r?void 0:r.tagSort))&&void 0!==t?t:"-frequency";return["sumdelta"].find((e=>{var t;return null===(t=n)||void 0===t?void 0:t.includes(e)}))&&(n="-frequency"),n}function c(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const r=t.split("_");return{histogramField:t,bucketSize:parseInt(r[r.length-3],10),offset:parseInt(r[r.length-2],10),multiplier:parseInt(r[r.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,r)=>{r.d(t,{Pl:()=>s,oZ:()=>i,eH:()=>a,L0:()=>o,jb:()=>l});var n=r("./app/utils/performance/histogram/utils.tsx");function s(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t}),query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function i(e,t){const r=(0,n.te)(e);return!e.length||t>=e[e.length-1].bin+r?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/r)}function a(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const r=e[t];for(let n=t+1;n<e.length;n++){const s=e[n];if(r.bin!==s.bin&&r.count!==s.count)return{point1:{x:t,y:Math.min(r.count,s.count)},point2:{x:n,y:Math.max(r.count,s.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function o(e,t){const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1]))return null;const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1])?null:{point1:{x:r[0],y:r[1]},point2:{x:n[0],y:n[1]}}}function l(e,t,r){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||r.point1.x===r.point2.x||r.point1.y===r.point2.y)return null;const n=(e.x-t.point1.x)/(t.point2.x-t.point1.x),s=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:r.point1.x+(r.point2.x-r.point1.x)*n,y:r.point1.y+(r.point2.y-r.point1.y)*s}}},"./app/views/performance/vitalDetail/utils.tsx":(e,t,r)=>{r.d(t,{eE:()=>u,MN:()=>h,SP:()=>m,fL:()=>g,Np:()=>f,i4:()=>v,iF:()=>x,Ve:()=>y,q4:()=>Z,jo:()=>b,il:()=>T,a7:()=>w,vk:()=>S,cD:()=>_,EX:()=>E}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js");var n=r("./app/components/charts/components/markLine.tsx"),s=r("./app/components/charts/utils.tsx"),i=r("./app/icons/index.tsx"),a=r("./app/locale.tsx"),o=r("./app/utils/discover/charts.tsx"),l=r("./app/utils/discover/fields.tsx"),c=r("./app/utils/performance/vitals/constants.tsx"),d=r("./app/utils/queryString.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u={[l.Zl.FP]:3e3,[l.Zl.FCP]:3e3,[l.Zl.LCP]:4e3,[l.Zl.FID]:300,[l.Zl.CLS]:.25},h={[l.Zl.FP]:1e3,[l.Zl.FCP]:1e3,[l.Zl.LCP]:2500,[l.Zl.FID]:100,[l.Zl.CLS]:.1};let m;!function(e){e.POOR="Poor",e.MEH="Meh",e.GOOD="Good"}(m||(m={}));const g={[m.POOR]:"red300",[m.MEH]:"yellow300",[m.GOOD]:"green300"},f={[m.POOR]:(0,p.tZ)(i.pY,{color:g[m.POOR]}),[m.MEH]:(0,p.tZ)(i.tC,{color:g[m.MEH]}),[m.GOOD]:(0,p.tZ)(i.O1,{color:g[m.GOOD]})};function v(e){let{orgSlug:t,vitalName:r,projectID:n,query:s}=e;return{pathname:function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/vitaldetail/`}({orgSlug:t}),query:{vitalName:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function x(e){const t=(0,d.ro)(e.query.vitalName);return Object.values(l.Zl).find((e=>e===t))||l.Zl.LCP}function y(e){const t=u[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}function Z(e){const t=h[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}const b={[l.Zl.FCP]:"First Contentful Paint",[l.Zl.CLS]:"Cumulative Layout Shift",[l.Zl.FID]:"First Input Delay",[l.Zl.LCP]:"Largest Contentful Paint"},T={[l.Zl.FCP]:"First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks. At the moment, there is support for FCP in the following browsers:",[l.Zl.CLS]:"Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts. At the moment, there is support for CLS in the following browsers:",[l.Zl.FID]:"First Input Delay (FID) measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not. At the moment, there is support for FID in the following browsers:",[l.Zl.LCP]:"Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. It’s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page. At the moment, there is support for LCP in the following browsers:"},w={[l.Zl.FCP]:"FCP",[l.Zl.CLS]:"CLS",[l.Zl.FID]:"FID",[l.Zl.LCP]:"LCP"};function S(e){let t=-1/0;for(const{data:r}of e)for(const e of r)t=Math.max(t,e.value);return t}const _={[l.Zl.LCP]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA],[l.Zl.FID]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA,c.AR.FIREFOX,c.AR.SAFARI,c.AR.IE],[l.Zl.CLS]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA],[l.Zl.FP]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA],[l.Zl.FCP]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA,c.AR.FIREFOX,c.AR.SAFARI],[l.Zl.TTFB]:[c.AR.CHROME,c.AR.EDGE,c.AR.OPERA,c.AR.FIREFOX,c.AR.SAFARI,c.AR.IE]};function E(e){let{theme:t,location:r,vital:i,yAxis:c}=e;const p="false"!==(0,d.ro)(r.query.utc),m=u[i],g=h[i];return{vitalPoor:m,vitalMeh:g,legend:{right:10,top:0,selected:(0,s.RI)(r)},chartOptions:{grid:{left:"5px",right:"10px",top:"35px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,o.CX)(e,i===l.Zl.CLS?t:c)},yAxis:{min:0,max:m,axisLabel:{color:t.chartLabel,showMaxLabel:!1,formatter:e=>(0,o.gu)(e,c)}}},markLines:[{seriesName:"Thresholds",type:"line",data:[],markLine:(0,n.Z)({silent:!0,lineStyle:{color:t.red300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,a.t)("Poor")},data:[{yAxis:m}]})},{seriesName:"Thresholds",type:"line",data:[],markLine:(0,n.Z)({silent:!0,lineStyle:{color:t.yellow300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,a.t)("Meh")},data:[{yAxis:g}]})}],utc:p}}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_traceDetails_index_tsx.ddc412ede413937403d036d4043a71ba.js.map