{"version":3,"sources":["webpack://@quansight/jupyterlab-ksmm/./lib/components/alerts.js","webpack://@quansight/jupyterlab-ksmm/./lib/components/envvar.js","webpack://@quansight/jupyterlab-ksmm/./lib/components/keyval.js","webpack://@quansight/jupyterlab-ksmm/./lib/components/kscard.js","webpack://@quansight/jupyterlab-ksmm/./lib/components/ksform.js","webpack://@quansight/jupyterlab-ksmm/./lib/components/ksformgroup.js","webpack://@quansight/jupyterlab-ksmm/./lib/handler.js","webpack://@quansight/jupyterlab-ksmm/./lib/index.js","webpack://@quansight/jupyterlab-ksmm/./lib/widget.js"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACO,kDAAkD;AACzD;AACA,qBAAqB,+EAA6B;AAClD,uBAAuB,8DAAW;AAClC;AACA;AACA;AACA,yBAAyB,8EAA4B;AACrD;AACA;AACA,kBAAkB,+EAA6B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAA8B;AAChD;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AClCsD;AACL;AAC8B;AAC5B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,2DAAS;AACxB;AACA,eAAe,2BAA2B;AAC1C;AACA;AACA;AACA;AACA,wDAAwD,yFAAa;AACrE;AACA,oCAAoC,4DAAuB;AAC3D,mCAAmC,gEAAc,EAAE,UAAU;AAC7D;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvC7B,cAAc,SAAI,IAAI,SAAI;AAC1B;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;AACmD;AACA;AACD;AACX;AACE;AACa;AACT;AAC+B;AACnC;AACK;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B,4BAA4B,+CAAQ;AACpC,oCAAoC,+CAAQ;AAC5C,gDAAgD,+CAAQ;AACxD,wDAAwD,+CAAQ;AAChE,gCAAgC,+CAAQ,GAAG;AAC3C,oCAAoC,+CAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oDAAU;AAClB;AACA,SAAS;AACT;AACA,SAAS;AACT,mBAAmB,sEAAgB;AACnC,SAAS;AACT;AACA;AACA,QAAQ,oDAAU;AAClB;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,mBAAmB,sEAAgB;AACnC,SAAS;AACT;AACA;AACA,QAAQ,oDAAU;AAClB;AACA,kCAAkC,8BAA8B;AAChE,SAAS;AACT,mBAAmB,sEAAgB;AACnC,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,6BAA6B,gEAAU;AACvC,sDAAsD,wBAAwB,IAAI,sBAAsB;AACxG,SAAS;AACT;AACA;AACA;AACA,QAAQ,oDAAU;AAClB;AACA,kCAAkC,8BAA8B;AAChE,SAAS;AACT,mBAAmB,sEAAgB;AACnC,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,YAAY,qEAAmB,EAAE,kBAAkB;AACnD,YAAY,iEAAe,EAAE,6BAA6B;AAC1D;AACA;AACA;AACA;AACA;AACA,2BAA2B,wDAAM;AACjC;AACA,kBAAkB,oEAAkB,CAAC,0DAAmB,CAAC,uDAAc;AACvE,gBAAgB,0DAAmB,CAAC,8DAAI,GAAG;AAC3C;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C,oBAAoB,0DAAmB;AACvC;AACA,wBAAwB,0DAAmB,OAAO,uEAAuE;AACzH;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,oDAAU;AAC1B;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,2BAA2B,sEAAgB;AAC3C,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC,QAAQ,oDAAU;AAClB;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,sEAAgB;AACnC,SAAS;AACT;AACA,IAAI,gDAAS;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,6BAA6B,aAAa,KAAK,0DAAmB,CAAC,uDAAM,GAAG,wPAAwP;AACpU;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,0DAAmB,kBAAkB,yBAAyB;AACjK,uGAAuG,0DAAmB,kBAAkB,yBAAyB;AACrK,YAAY,0DAAmB,CAAC,8DAAS;AACzC,QAAQ,0DAAmB;AAC3B;AACA,YAAY,0DAAmB,CAAC,uDAAc;AAC9C;AACA,oBAAoB,0DAAmB,CAAC,uDAAc;AACtD,wBAAwB,0DAAmB;AAC3C,wBAAwB,0DAAmB,SAAS;AACpD;AACA;AACA,6BAA6B,EAAE;AAC/B;AACA,gBAAgB,0DAAmB;AACnC;AACA,oBAAoB,0DAAmB,CAAC,uDAAc;AACtD,wBAAwB,0DAAmB;AAC3C,wBAAwB,0DAAmB,SAAS;AACpD;AACA;AACA,6BAA6B,EAAE;AAC/B;AACA;AACA,YAAY,0DAAmB,CAAC,+DAAe,GAAG,4BAA4B;AAC9E,qBAAqB,0DAAmB,CAAC,sDAAM,GAAG,iFAAiF,SAAI,+BAA+B,SAAI,GAAG;AAC7K;AACA;AACA;AACA;AACO,sCAAsC,6DAAW;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0DAAmB,0BAA0B,uCAAuC;AACnG;AACA","file":"lib_index_js-webpack_sharing_consume_default_lumino_coreutils-webpack_sharing_consume_default-afeeb2.e358947396e24f845f97.js","sourcesContent":["import React from \"react\";\nimport Alert from \"react-bootstrap/Alert\";\nexport const SuccessAlertBox = (props) => {\n    return (React.createElement(Alert, { variant: \"success\" },\n        \"Success \",\n        React.createElement(\"a\", { style: { textDecoration: \"underline\" }, onClick: () => props.handleClose() }, \"Close\")));\n};\n","import React, { useState } from \"react\";\nimport KeyValueWidget from \"./keyval\";\nconst EnvVarForm = (props) => {\n    const [toggle, setToggle] = useState(true);\n    const formData = props.formData;\n    const keys = Object.keys(formData);\n    return (React.createElement(React.Fragment, null,\n        keys.map((key) => {\n            return (React.createElement(\"div\", null,\n                React.createElement(KeyValueWidget, { formKey: key, formData: formData, key: toggle }),\n                React.createElement(\"button\", { type: \"button\", onClick: (e) => {\n                        delete formData[key];\n                        setToggle(!toggle);\n                    } }, \"Delete\")));\n        }),\n        React.createElement(\"button\", { type: \"button\", onClick: (e) => {\n                formData[''] = '';\n                setToggle(!toggle);\n            } }, \"Add\")));\n};\nexport default EnvVarForm;\n","import React, { useState } from \"react\";\n/*\n * This function has a callback to mutate the formData to\n * add a new 'string':'string' type to the dictionary.\n *\n * Renders a widget for a dict of\n * { 'string':'string', 'string':'string' }\n */\nconst KeyValueWidget = (props) => {\n    const [formKey, setFormKey] = useState(props.formKey);\n    const [formVal, setFormVal] = useState(props.formData[formKey]);\n    /*\n     * Function to handle a change of key values in a key value store\n     */\n    const handleKeyChange = (oldKey, newKey) => {\n        props.formData[newKey] = props.formData[oldKey];\n        delete props.formData[oldKey];\n        setFormKey(newKey);\n    };\n    /*\n     * Function to handle any changing values\n     */\n    const handleValueChange = (key, newValue) => {\n        props.formData[key] = newValue;\n        setFormVal(newValue);\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"input\", { type: \"string\", placeholder: \"ENV_VAR\", value: formKey, onChange: (e) => {\n                handleKeyChange(formKey, e.target.value);\n            } }),\n        React.createElement(\"input\", { type: \"string\", placeholder: \"MY VALUE\", value: formVal, size: 75, onChange: (e) => {\n                handleValueChange(formKey, e.target.value);\n            } })));\n};\nexport default KeyValueWidget;\n","import React from \"react\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport Card from \"react-bootstrap/Card\";\nimport { FaRegEdit, FaCopy, FaTrash, FaWpforms } from \"react-icons/fa\";\nconst KsCard = (props) => {\n    var _a, _b, _c;\n    const { kernelSpec, handleSelectKernelspec, handleCopyKernelspec, handleDeleteKernelspec, handleTemplateKernelspec } = props;\n    const renderToolTip = (props) => React.createElement(Tooltip, Object.assign({ id: 'card-tooltip' }, props), kernelSpec._ksmm.fs_path);\n    return (React.createElement(Card, { style: {\n            width: \"12rem\",\n            height: \"12rem\",\n        }, key: kernelSpec._ksmm.fs_path },\n        React.createElement(Card.Body, null,\n            React.createElement(OverlayTrigger, { placement: \"bottom\", overlay: renderToolTip },\n                React.createElement(Card.Title, null, kernelSpec.display_name))),\n        React.createElement(Card.Footer, { className: \"align-left\" },\n            ((_a = kernelSpec._ksmm) === null || _a === void 0 ? void 0 : _a.writeable) ? React.createElement(\"a\", { style: { cursor: \"pointer\" }, onClick: () => handleSelectKernelspec(kernelSpec) },\n                React.createElement(FaRegEdit, { className: 'ksmm-button-enabled', title: 'Edit' }))\n                : React.createElement(FaRegEdit, { className: 'ksmm-button-disabled' }),\n            React.createElement(\"a\", { style: { cursor: \"pointer\" }, onClick: () => handleCopyKernelspec(kernelSpec) },\n                React.createElement(FaCopy, { className: 'ksmm-button-enabled', title: 'Copy' })),\n            ((_b = kernelSpec._ksmm) === null || _b === void 0 ? void 0 : _b.deletable) ? React.createElement(\"a\", { style: { cursor: \"pointer\" }, onClick: () => handleDeleteKernelspec(kernelSpec) },\n                React.createElement(FaTrash, { className: 'ksmm-button-enabled', title: 'Delete' }))\n                : React.createElement(FaTrash, { className: 'ksmm-button-disabled' }),\n            ((_c = kernelSpec.metadata) === null || _c === void 0 ? void 0 : _c.template) && React.createElement(\"a\", { style: { cursor: \"pointer\", float: 'right' }, onClick: () => handleTemplateKernelspec(kernelSpec) },\n                React.createElement(FaWpforms, { className: 'ksmm-button-enabled', title: 'Generate with Template' })))));\n};\nexport default KsCard;\n","import React, { useState } from \"react\";\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"@rjsf/bootstrap-4\";\nimport EnvVarForm from \"./envvar\";\nimport KsFormGroup from \"./ksformgroup\";\nconst TabMenu = (props) => {\n    const [tab, setTab] = useState(\"General Settings\");\n    /*\n     * Generate the tab titles for the schema.\n     */\n    var menuHeaders = [\n        \"General Settings\",\n        \"Launch Arguments\",\n        \"Environment Variables\",\n    ];\n    return (React.createElement(Tabs, { defaultActiveKey: menuHeaders[0], onSelect: (k) => setTab(k) }, menuHeaders.map((menuHeader) => (React.createElement(Tab, { eventKey: menuHeader, key: menuHeader, title: menuHeader },\n        React.createElement(KsFormGroup, { mainprops: props, selectedTab: tab, properties: props.properties }))))));\n};\nexport const KsForm = (props) => {\n    const uiSchema = {\n        \"ui:ObjectFieldTemplate\": TabMenu,\n        env: {\n            \"ui:autofocus\": true,\n            \"ui:ObjectFieldTemplate\": EnvVarForm,\n            \"ui:options\": {\n                expandable: true,\n            },\n        },\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Form, { schema: props.schema, uiSchema: uiSchema, formData: props.formData, onSubmit: props.onSubmit, formContext: {} }),\n        React.createElement(Button, { variant: \"secondary\", onClick: () => props.onCancel() }, \"Cancel\")));\n};\n","import React from \"react\";\n/*\n * This is a nested component in the FieldTemplate, and\n * does all the work for rendering the different options in their\n * respective places.\n *\n * props: data -> The data to render - namely, the data as defined in the schema.\n */\nconst KsFormGroup = (props) => {\n    const formGroupMap = generateFormGroupMap(props.properties);\n    return (React.createElement(React.Fragment, null, formGroupMap[props.selectedTab].map((index) => (React.createElement(\"div\", { className: \"property-wrapper\", key: index }, props.properties[index].content)))));\n};\n/*\n * Grab the location of the element in the array,\n * returning a value of the positions in the array.\n */\nfunction generateFormGroupMap(dataArr) {\n    const QuickSettings = [];\n    const GeneralSettingsArray = [];\n    const LaunchArgumentsArray = [];\n    const EnvironmentVariableArray = [];\n    const ComputeParametersArray = [];\n    const MetadataArray = [];\n    dataArr.forEach((element) => {\n        if (element.name == \"display_name\" ||\n            element.name == \"interrupt_mode\" ||\n            element.name == \"language\") {\n            GeneralSettingsArray.push(dataArr.indexOf(element));\n        }\n        else if (element.name == \"argv\") {\n            LaunchArgumentsArray.push(dataArr.indexOf(element));\n        }\n        else if (element.name == \"env\") {\n            EnvironmentVariableArray.push(dataArr.indexOf(element));\n        }\n        else if (element.name == \"parameters\") {\n            ComputeParametersArray.push(dataArr.indexOf(element));\n        }\n        else if (element.name == \"metadata\") {\n            MetadataArray.push(dataArr.indexOf(element));\n        }\n        else if (element.name == \"quick\") {\n            QuickSettings.push(dataArr.indexOf(element));\n        }\n        else {\n            console.log(\"Unknown element name\", element.name);\n        }\n    });\n    return {\n        [\"General Settings\"]: GeneralSettingsArray,\n        [\"Launch Arguments\"]: LaunchArgumentsArray,\n        [\"Environment Variables\"]: EnvironmentVariableArray,\n        [\"Compute Parameters\"]: ComputeParametersArray,\n        [\"Quick Params\"]: QuickSettings,\n        [\"Metadata\"]: MetadataArray,\n    };\n}\nexport default KsFormGroup;\n","import { URLExt } from '@jupyterlab/coreutils';\nimport { ServerConnection } from '@jupyterlab/services';\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI(endPoint = '', init = {}) {\n    // Make request to Jupyter API\n    const settings = ServerConnection.makeSettings();\n    const requestUrl = URLExt.join(settings.baseUrl, 'ksmm', // API Namespace\n    endPoint);\n    let response;\n    try {\n        response = await ServerConnection.makeRequest(requestUrl, init, settings);\n    }\n    catch (error) {\n        throw new ServerConnection.NetworkError(error);\n    }\n    let data = await response.text();\n    if (data.length > 0) {\n        try {\n            data = JSON.parse(data);\n        }\n        catch (error) {\n            console.log('Not a JSON response body.', response);\n        }\n    }\n    if (!response.ok) {\n        throw new ServerConnection.ResponseError(response, data.message || data);\n    }\n    return data;\n}\n","import { MainAreaWidget } from \"@jupyterlab/apputils\";\nimport { ILauncher } from \"@jupyterlab/launcher\";\nimport { extensionIcon } from \"@jupyterlab/ui-components/lib/icon/iconimports\";\nimport { KernelspecManagerWidget } from \"./widget\";\n/*\n * The command IDs used by the to create a kernelspec.\n */\nvar CommandIDs;\n(function (CommandIDs) {\n    CommandIDs.create = \"ksmm:create-kernelspec\";\n})(CommandIDs || (CommandIDs = {}));\n/**\n * Initialization data for the ksmm extension.\n */\nconst ksmmExtension = {\n    id: \"jupyterlab-ksmm-plugin\",\n    autoStart: true,\n    optional: [ILauncher],\n    activate: (app, launcher) => {\n        const { commands, serviceManager } = app;\n        const command = CommandIDs.create;\n        commands.addCommand(command, {\n            caption: \"A way to manage Kernelspecs\",\n            label: \"Kernelspec Manager\",\n            icon: (args) => (args['isPalette'] ? null : extensionIcon),\n            execute: () => {\n                const content = new KernelspecManagerWidget(serviceManager);\n                const widget = new MainAreaWidget({ content });\n                widget.title.label = \"Kernelspec Manager\";\n                app.shell.add(widget, \"main\");\n            }\n        });\n        if (launcher) {\n            launcher.add({\n                command\n            });\n        }\n    }\n};\nexport default ksmmExtension;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState, useEffect } from \"react\";\nimport { ReactWidget } from \"@jupyterlab/apputils\";\nimport Container from \"react-bootstrap/Container\";\nimport { requestAPI } from \"./handler\";\nimport KsCard from \"./components/kscard\";\nimport { SuccessAlertBox } from \"./components/alerts\";\nimport { KsForm } from \"./components/ksform\";\nimport { Dialog, showDialog, showErrorMessage } from '@jupyterlab/apputils';\nimport Form from \"react-jsonschema-form\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n/**\n * React component for listing the possible\n * kernelspecs.\n *\n * @returns The React component.\n */\nconst KernelManagerComponent = (props) => {\n    const { serviceManager } = props;\n    const [data, setData] = useState(undefined);\n    const [showForm, setShowForm] = useState(false);\n    const [kernelFormData, setKernelFormData] = useState(undefined);\n    const [selectedKernelName, setSelectedKernelName] = useState('');\n    const [schema, setSchema] = useState({});\n    const [alertBox, setAlertBox] = useState(false);\n    /**\n     * Handles the Kernel Selection\n     * at the select screen.\n     */\n    const handleSelectKernelspec = (kernelSpec) => {\n        setSelectedKernelName(kernelSpec._ksmm.name);\n        setKernelFormData(kernelSpec);\n        setShowForm(true);\n    };\n    /**\n     * Return Home on click.\n     */\n    const handleGoHome = () => {\n        setShowForm(false);\n        setAlertBox(false);\n    };\n    const refreshSchemas = () => {\n        requestAPI(\"/schema\", {\n            method: \"GET\",\n        }).then((s) => {\n            setSchema(s);\n        }).catch((err) => {\n            return showErrorMessage('Could not refresh schemas', err);\n        });\n    };\n    const refreshKernelspecs = () => {\n        requestAPI(\"/\", {\n            method: \"GET\",\n        }).then((res) => {\n            setData(res);\n            void serviceManager.kernelspecs.refreshSpecs();\n        }).catch((err) => {\n            return showErrorMessage('Could not refresh kernel specs', err);\n        });\n    };\n    const handleCopyKernelspec = (kernelSpec) => {\n        requestAPI(\"/copy\", {\n            method: \"POST\",\n            body: JSON.stringify({ name: kernelSpec._ksmm.name }),\n        }).catch((err) => {\n            return showErrorMessage('Could not copy kernel spec', err);\n        }).then((data) => {\n            refreshKernelspecs();\n        });\n    };\n    const handleDeleteKernelspec = async (kernelSpec) => {\n        const action = await showDialog({\n            title: `Are you sure you want to delete ${kernelSpec.display_name} (${kernelSpec._ksmm.name})?`,\n        });\n        if (!action.button.accept) {\n            return;\n        }\n        requestAPI(\"/delete\", {\n            method: \"POST\",\n            body: JSON.stringify({ name: kernelSpec._ksmm.name }),\n        }).catch((err) => {\n            return showErrorMessage('Could not delete kernel spec', err);\n        }).then((data) => {\n            refreshKernelspecs();\n        });\n    };\n    const handleTemplateKernelspec = (kernelSpec) => {\n        var _a, _b;\n        const buttons = [\n            Dialog.cancelButton({ label: 'Cancel' }),\n            Dialog.okButton({ label: 'Create Kernelspec' })\n        ];\n        var params = {};\n        const onChange = (e) => {\n            params = e.formData;\n        };\n        const dialog = new Dialog({\n            title: 'Kernelspec from Template',\n            body: ReactWidget.create(React.createElement(React.Fragment, null,\n                React.createElement(Form, { schema: {\n                        \"title\": \"\",\n                        \"description\": \"\",\n                        \"type\": \"object\",\n                        // @ts-ignore\n                        \"properties\": (_b = (_a = kernelSpec.metadata) === null || _a === void 0 ? void 0 : _a.template) === null || _b === void 0 ? void 0 : _b.parameters\n                    }, onChange: onChange },\n                    React.createElement(\"i\", null,\n                        \"*We are not validating the form yet, please ensure you enter valid data (\",\n                        React.createElement(\"a\", { href: \"https://github.com/quansight/ksmm/issues/61\", target: \"blank\" }, \"issue\"),\n                        \")\")))),\n            buttons\n        });\n        void dialog.launch().then(result => {\n            if (result.button.accept) {\n                requestAPI(\"/params\", {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        name: kernelSpec._ksmm.name,\n                        params: params\n                    }),\n                }).catch((err) => {\n                    return showErrorMessage('Could not generate kernel from template', err);\n                })\n                    .then((data) => {\n                    refreshKernelspecs();\n                });\n            }\n        });\n    };\n    /**\n     * Handles a form submission when\n     * kernels are modified in any form.\n     *\n     * Passed as a prop to Form.\n     */\n    const handleSubmitKernelspec = (e) => {\n        // Drop _ksmm before submitting\n        const _a = e.formData, { _ksmm } = _a, editedKernelPayload = __rest(_a, [\"_ksmm\"]);\n        requestAPI(\"/\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                editedKernelPayload: JSON.stringify(editedKernelPayload),\n                originalKernelName: selectedKernelName,\n            }),\n        }).then((data) => {\n            if (data.success) {\n                setAlertBox(true);\n                refreshKernelspecs();\n                setKernelFormData(e.formData);\n            }\n            else {\n                throw data;\n            }\n        }).catch((err) => {\n            return showErrorMessage('Could not update kernel spec', err);\n        });\n    };\n    useEffect(() => {\n        refreshSchemas();\n        refreshKernelspecs();\n    }, []);\n    /**\n     * Generate the package of data needed\n     * to display at the card selection screen.\n     *\n     * This method is called on when then data is generated to\n     * send into the method generating the card data.\n     */\n    const userKernels = {};\n    const systemKernels = {};\n    Object.entries(data || {}).forEach(entry => {\n        const [name, kernelSpec] = entry;\n        if (kernelSpec === null || kernelSpec === void 0 ? void 0 : kernelSpec._ksmm.is_user) {\n            userKernels[name] = kernelSpec;\n        }\n        else {\n            systemKernels[name] = kernelSpec;\n        }\n    });\n    const KernelSpecCard = ({ kernelSpec }) => React.createElement(KsCard, { handleSelectKernelspec: handleSelectKernelspec, handleCopyKernelspec: handleCopyKernelspec, handleDeleteKernelspec: handleDeleteKernelspec, handleTemplateKernelspec: handleTemplateKernelspec, kernelSpec: kernelSpec, key: kernelSpec._ksmm.fs_path });\n    const sortByDisplayName = (k1, k2) => {\n        if (k1.display_name < k2.display_name) {\n            return -1;\n        }\n        if (k1.display_name > k2.display_name) {\n            return 1;\n        }\n        return 0;\n    };\n    const userKernelCards = Object.values(userKernels).sort(sortByDisplayName).map((kernelSpec) => React.createElement(KernelSpecCard, { kernelSpec: kernelSpec }));\n    const systemKernelCards = Object.values(systemKernels).sort(sortByDisplayName).map((kernelSpec) => React.createElement(KernelSpecCard, { kernelSpec: kernelSpec }));\n    return (React.createElement(Container, null,\n        React.createElement(\"br\", null),\n        !showForm &&\n            React.createElement(React.Fragment, null,\n                systemKernelCards.length > 0 ?\n                    React.createElement(React.Fragment, null,\n                        React.createElement(\"h3\", null, \"System Kernel Specs\"),\n                        React.createElement(\"div\", { style: {\n                                display: \"flex\",\n                                flexWrap: \"wrap\"\n                            } }, systemKernelCards))\n                    : null,\n                React.createElement(\"hr\", null),\n                userKernelCards.length > 0 ?\n                    React.createElement(React.Fragment, null,\n                        React.createElement(\"h3\", null, \"User Kernel Specs\"),\n                        React.createElement(\"div\", { style: {\n                                display: \"flex\",\n                                flexWrap: \"wrap\"\n                            } }, userKernelCards))\n                    : null),\n        alertBox &&\n            React.createElement(SuccessAlertBox, { handleClose: handleGoHome }),\n        showForm && (React.createElement(KsForm, { schema: schema, formData: kernelFormData, onSubmit: handleSubmitKernelspec.bind(this), onCancel: handleGoHome.bind(this) }))));\n};\n/**\n * KernelspecManagerWidget main class.\n */\nexport class KernelspecManagerWidget extends ReactWidget {\n    constructor(serviceManager) {\n        super();\n        this._serviceManager = serviceManager;\n        this.addClass(\"jp-Ksmm\");\n    }\n    render() {\n        return React.createElement(KernelManagerComponent, { serviceManager: this._serviceManager });\n    }\n}\n"],"sourceRoot":""}