<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      tal:omit-tag=""
      i18n:domain="collective.z3cform.datagridfield"
>

  <td class="datagridwidget-block-edit-cell">
    <tal:block tal:repeat="widget view/subform/widgets/values">

      <div tal:define="
             klass python: widget.klass or '';
             error python: widget.error and 'error' or '';
           "
           tal:attributes="
             class python:'datagridwidget-block-' + widget.id + ' ' + klass + ' datagridwidget-widget-' + widget.field.__name__ + ' ' + error + ' ' + (widget.mode == 'hidden' and 'datagridwidget-hidden-data' or 'datagridwidget-block');
           "
      >
        <div class="label">
          <label tal:attributes="
                   for widget/id;
                 ">
            <span tal:content="widget/label"
                  i18n:translate=""
            >label</span>
            <span class="required"
                  title="Required"
                  tal:condition="widget/required"
                  i18n:attributes="title title_required"
                  i18n:domain="plone"
            >&nbsp;</span>

            <span class="formHelp"
                  tal:define="
                    description widget/field/description;
                  "
                  tal:condition="python:description"
                  tal:content="structure description"
                  i18n:translate=""
            >field description</span>
          </label>
        </div>



        <div class="fieldErrorBox"
             tal:condition="widget/error"
        >
          <span tal:replace="structure widget/error/render"></span>
        </div>

        <div tal:replace="structure widget/render"></div>


      </div>

    </tal:block>
  </td>

  <td class="datagridwidget-hidden-data">
    <input name="field-empty-marker"
           type="hidden"
           value="1"
           tal:attributes="
             name string:${view/name}-empty-marker;
           "
    />
  </td>

  <td class="datagridwidget-manipulator insert-row"
      tal:condition="view/isInsertEnabled"
  >
    <button class="plone-btn plone-btn-default plone-btn-sm dgf--row-add"
            type="button"
            aria-label="Add row"
            title="Add row"
            i18n:attributes="aria-label label_datagridwidget_manipulators_addrow;
                             title label_datagridwidget_manipulators_addrow"
    >
      <span class="glyphicon glyphicon-plus"
            aria-hidden="true"
      ></span>
      <span class="sr-only"
            i18n:translate="label_datagridwidget_manipulators_addrow"
      >Add row</span>
    </button>
  </td>

  <td class="datagridwidget-manipulator delete-row"
      tal:condition="view/isDeleteEnabled"
  >
    <button class="plone-btn plone-btn-default plone-btn-sm dgf--row-delete"
            type="button"
            aria-label="Delete row"
            title="Delete row"
            i18n:attributes="aria-label label_datagridwidget_manipulators_deleterow;
                             title label_datagridwidget_manipulators_deleterow"
    >
      <span class="glyphicon glyphicon-trash"
            aria-hidden="true"
      ></span>
      <span class="sr-only"
            i18n:translate="label_datagridwidget_manipulators_deleterow"
      >Delete row</span>
    </button>
  </td>

  <td class="datagridwidget-manipulator move-up"
      tal:condition="view/isReorderEnabled"
  >
    <button class="plone-btn plone-btn-default plone-btn-sm dgf--row-moveup"
            type="button"
            aria-label="Move Up"
            title="Move Up"
            i18n:attributes="aria-label label_datagridwidget_manipulators_moverowup;
                             title label_datagridwidget_manipulators_moverowup"
    >
      <span class="glyphicon glyphicon-arrow-up"
            aria-hidden="true"
      ></span>
      <span class="sr-only"
            i18n:translate="label_datagridwidget_manipulators_moverowup"
      >Move Up</span>
    </button>
  </td>

  <td class="datagridwidget-manipulator move-down"
      tal:condition="view/isReorderEnabled"
  >
    <button class="plone-btn plone-btn-default plone-btn-sm dgf--row-movedown"
            type="button"
            aria-label="Move Down"
            title="Move Down"
            i18n:attributes="aria-label label_datagridwidget_manipulators_moverowdown;
                             title label_datagridwidget_manipulators_moverowdown"
    >
      <span class="glyphicon glyphicon-arrow-down"
            aria-hidden="true"
      ></span>
      <span class="sr-only"
            i18n:translate="label_datagridwidget_manipulators_moverowdown"
      >Move Down</span>
    </button>
  </td>

</html>
