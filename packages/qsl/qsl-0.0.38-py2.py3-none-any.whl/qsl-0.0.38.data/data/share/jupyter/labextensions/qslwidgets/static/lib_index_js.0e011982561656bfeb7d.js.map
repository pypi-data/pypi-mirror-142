{"version":3,"file":"lib_index_js.0e011982561656bfeb7d.js","mappings":";;;;;;;;;AAAa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C,kCAAkC,mBAAO,CAAC,gHAAyB;AACnE,8CAA8C,mBAAO,CAAC,oGAAqB;AAC3E;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iCAAiC,MAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,uEAAuE,gCAAgC;AAC9K,2EAA2E,YAAY,QAAQ;AAC/F;AACA,yEAAyE,YAAY,QAAQ;AAC7F;AACA;AACA,mEAAmE,YAAY,gBAAgB;AAC/F;AACA;AACA,mEAAmE,YAAY,gBAAgB;AAC/F;AACA;AACA,mEAAmE,YAAY,kBAAkB;AACjG;AACA;AACA,mEAAmE,YAAY,kBAAkB;AACjG;AACA;AACA,mEAAmE,YAAY,oBAAoB;AACnG;AACA,eAAe;AACf;AACA,kBAAe;AACf;;;;;;;;;;ACtDa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,yBAAyB;AACpD,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C,oCAAoC,mBAAO,CAAC,4DAAW;AACvD,oBAAoB,mBAAO,CAAC,oFAAuB;AACnD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,8CAA8C,mBAAO,CAAC,oGAAqB;AAC3E,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA;AACA;AACA;AACA,cAAc,wBAAwB;AACtC,cAAc,SAAS,sCAAsC;AAC7D;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,2EAA2E,uEAAuE,aAAa;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,aAAa,kBAAkB;AACxC;AACA;AACA;AACA,2DAA2D,uBAAuB,4SAA4S;AAC9X;AACA;AACA,yBAAyB;AACzB,gDAAgD;AAChD;AACA;AACA;AACA,kDAAkD;AAClD,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB;AACxB;;;;;;;;;;ACzGa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,qBAAqB;AAC7C,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;;;;;;;;;;ACtCa;AACb;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,mCAAW;AAChC,aAAa,mBAAO,CAAC,yDAAsB;AAC3C,aAAa,mBAAO,CAAC,+DAAyB;AAC9C;;;;;;;;;;ACjBa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC,sBAAsB;AACtB,mBAAmB;AACnB","sources":["webpack://qslwidgets/./lib/ImageLabelerComponent.js","webpack://qslwidgets/./lib/ImageLabelerWidget.js","webpack://qslwidgets/./lib/hooks.js","webpack://qslwidgets/./lib/index.js","webpack://qslwidgets/./lib/version.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst streamlit_component_lib_1 = require(\"streamlit-component-lib\");\nconst react_image_labeler_1 = __importDefault(require(\"react-image-labeler\"));\nconst useStreamlitState = (python) => {\n    const [state, setState] = react_1.default.useState(python);\n    react_1.default.useEffect(() => {\n        setState(python);\n    }, [python]);\n    react_1.default.useEffect(() => streamlit_component_lib_1.Streamlit.setComponentValue(state), []);\n    return [\n        state,\n        (updated) => {\n            setState(updated);\n            streamlit_component_lib_1.Streamlit.setComponentValue(updated);\n        },\n    ];\n};\nconst ImageLabelerComponent = ({ args }) => {\n    const [state, setState] = useStreamlitState(args);\n    const mode = window.matchMedia &&\n        window.matchMedia('(prefers-color-scheme: dark)').matches\n        ? 'dark'\n        : 'light';\n    console.log('state', state);\n    react_1.default.useEffect(() => streamlit_component_lib_1.Streamlit.setFrameHeight());\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(react_image_labeler_1.default, { src: state.src, labels: state.labels, config: state.config, options: { mode, progress: state.progress }, metadata: state.metadata, callbacks: {\n                onSave: (labels) => setState(Object.assign(Object.assign({}, state), { labels })),\n                onSaveConfig: state.buttons['config']\n                    ? (config) => setState(Object.assign(Object.assign({}, state), { config }))\n                    : undefined,\n                onNext: state.buttons['next']\n                    ? () => setState(Object.assign(Object.assign({}, state), { action: 'next' }))\n                    : undefined,\n                onPrev: state.buttons['prev']\n                    ? () => setState(Object.assign(Object.assign({}, state), { action: 'prev' }))\n                    : undefined,\n                onDelete: state.buttons['delete']\n                    ? () => setState(Object.assign(Object.assign({}, state), { action: 'delete' }))\n                    : undefined,\n                onIgnore: state.buttons['ignore']\n                    ? () => setState(Object.assign(Object.assign({}, state), { action: 'ignore' }))\n                    : undefined,\n                onUnignore: state.buttons['unignore']\n                    ? () => setState(Object.assign(Object.assign({}, state), { action: 'unignore' }))\n                    : undefined,\n            } })));\n};\nexports.default = streamlit_component_lib_1.withStreamlitConnection(ImageLabelerComponent);\n//# sourceMappingURL=ImageLabelerComponent.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImageLabelerView = exports.ImageLabelerModel = void 0;\nconst react_1 = __importDefault(require(\"react\"));\nconst react_dom_1 = __importDefault(require(\"react-dom\"));\nconst coreutils_1 = require(\"@jupyterlab/coreutils\");\nconst base_1 = require(\"@jupyter-widgets/base\");\nconst react_image_labeler_1 = __importDefault(require(\"react-image-labeler\"));\nconst hooks_1 = require(\"./hooks\");\nconst version_1 = require(\"./version\");\n// Your widget state goes here. Make sure to update the corresponding\n// Python state in example.py\nconst DEFAULT_PROPERTIES = {\n    url: '',\n    config: { image: [], regions: [] },\n    labels: { image: {}, polygons: [], masks: [], boxes: [] },\n    updated: Date.now(),\n    action: '',\n    metadata: {},\n    buttons: {\n        next: true,\n        prev: true,\n        save: true,\n        config: true,\n        delete: true,\n        ignore: true,\n        unignore: true,\n    },\n    base: {\n        serverRoot: '',\n        url: '',\n    },\n    progress: -1,\n    mode: 'light',\n};\nconst Widget = ({ model }) => {\n    // @ts-ignore\n    const [config, setConfig] = hooks_1.useModelState('config', model);\n    // @ts-ignore\n    const [url, setUrl] = hooks_1.useModelState('url', model);\n    // @ts-ignore\n    const [labels, setLabels] = hooks_1.useModelState('labels', model);\n    // @ts-ignore\n    const [updated, setUpdated] = hooks_1.useModelState('updated', model);\n    // @ts-ignore\n    const [action, setAction] = hooks_1.useModelState('action', model);\n    // @ts-ignore\n    const [base, setBase] = hooks_1.useModelState('base', model);\n    // @ts-ignore\n    const [progress, setProgress] = hooks_1.useModelState('progress', model);\n    // @ts-ignore\n    const [mode, setMode] = hooks_1.useModelState('mode', model);\n    // @ts-ignore\n    const [buttons, setButtons] = hooks_1.useModelState('buttons', model);\n    // @ts-ignore\n    const [metadata, setMetadata] = hooks_1.useModelState('metadata', model);\n    react_1.default.useEffect(() => {\n        setBase({\n            serverRoot: coreutils_1.PageConfig.getOption('serverRoot'),\n            url: coreutils_1.PageConfig.getBaseUrl(),\n        });\n    });\n    return (react_1.default.createElement(react_image_labeler_1.default, { src: url, config: config, labels: labels, metadata: metadata, style: { padding: 16 }, callbacks: {\n            onSave: buttons['save']\n                ? (labels) => {\n                    setLabels(labels);\n                    setUpdated(Date.now());\n                }\n                : undefined,\n            onSaveConfig: buttons['config'] ? setConfig : undefined,\n            onNext: buttons['next'] ? () => setAction('next') : undefined,\n            onPrev: buttons['prev'] ? () => setAction('prev') : undefined,\n            onDelete: buttons['delete'] ? () => setAction('delete') : undefined,\n            onIgnore: buttons['ignore'] ? () => setAction('ignore') : undefined,\n            onUnignore: buttons['unignore']\n                ? () => setAction('unignore')\n                : undefined,\n        }, options: { progress, mode } }));\n};\nclass ImageLabelerModel extends base_1.DOMWidgetModel {\n    defaults() {\n        return Object.assign(Object.assign(Object.assign({}, super.defaults()), { _model_name: ImageLabelerModel.model_name, _model_module: ImageLabelerModel.model_module, _model_module_version: ImageLabelerModel.model_module_version, _view_name: ImageLabelerModel.view_name, _view_module: ImageLabelerModel.view_module, _view_module_version: ImageLabelerModel.view_module_version }), DEFAULT_PROPERTIES);\n    }\n}\nexports.ImageLabelerModel = ImageLabelerModel;\nImageLabelerModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\nImageLabelerModel.model_name = 'ImageLabelerModel';\nImageLabelerModel.model_module = version_1.MODULE_NAME;\nImageLabelerModel.model_module_version = version_1.MODULE_VERSION;\nImageLabelerModel.view_name = 'ImageLabelerView'; // Set to null if no view\nImageLabelerModel.view_module = version_1.MODULE_NAME; // Set to null if no view\nImageLabelerModel.view_module_version = version_1.MODULE_VERSION;\nclass ImageLabelerView extends base_1.DOMWidgetView {\n    render() {\n        this.el.classList.add('qsl-image-labeler-widget');\n        const component = react_1.default.createElement(Widget, {\n            model: this.model,\n        });\n        react_dom_1.default.render(component, this.el);\n    }\n}\nexports.ImageLabelerView = ImageLabelerView;\n//# sourceMappingURL=ImageLabelerWidget.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useModelEvent = exports.useModelState = void 0;\nconst react_1 = __importDefault(require(\"react\"));\n/**\n *\n * @param name property name in the Python model object.\n * @returns model state and set state function.\n */\nconst useModelState = (name, model) => {\n    const [state, setState] = react_1.default.useState(model === null || model === void 0 ? void 0 : model.get(name));\n    useModelEvent(model, `change:${name}`, (model) => {\n        setState(model.get(name));\n    }, [name]);\n    function updateModel(val, options) {\n        model === null || model === void 0 ? void 0 : model.set(name, val, options);\n        model === null || model === void 0 ? void 0 : model.save_changes();\n    }\n    return [state, updateModel];\n};\nexports.useModelState = useModelState;\n/**\n * Subscribes a listener to the model event loop.\n * @param event String identifier of the event that will trigger the callback.\n * @param callback Action to perform when event happens.\n * @param deps Dependencies that should be kept up to date within the callback.\n */\nconst useModelEvent = (model, event, callback, deps) => {\n    react_1.default.useEffect(() => {\n        const callbackWrapper = (e) => model && callback(model, e);\n        model === null || model === void 0 ? void 0 : model.on(event, callbackWrapper);\n        return () => void (model === null || model === void 0 ? void 0 : model.unbind(event, callbackWrapper));\n    }, (deps || []).concat([model]));\n};\nexports.useModelEvent = useModelEvent;\n//# sourceMappingURL=hooks.js.map","\"use strict\";\n// Copyright (c) Fausto Morales\n// Distributed under the terms of the MIT License.\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./version\"), exports);\n__exportStar(require(\"./ImageLabelerWidget\"), exports);\n__exportStar(require(\"./ImageLabelerComponent\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\n// Copyright (c) Fausto Morales\n// Distributed under the terms of the MIT License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\nexports.MODULE_VERSION = data.version;\nexports.MODULE_NAME = data.name;\n//# sourceMappingURL=version.js.map"],"names":[],"sourceRoot":""}