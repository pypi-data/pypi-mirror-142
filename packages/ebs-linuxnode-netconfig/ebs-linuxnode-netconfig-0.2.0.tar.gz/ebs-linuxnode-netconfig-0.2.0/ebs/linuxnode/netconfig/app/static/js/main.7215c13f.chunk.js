(this["webpackJsonpnetconfig-ui-web"]=this["webpackJsonpnetconfig-ui-web"]||[]).push([[0],{129:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(12),c=n.n(r),i=(n(99),n(9)),o=(n(100),n(88)),l=n(10),j=n(21),u=n(2),d=function(){return sessionStorage.getItem("token")||null},b=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},h=n(3),O=["component"],f=function(e){var t=e.component,n=Object(u.a)(e,O);return Object(h.jsx)(l.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return d()?Object(h.jsx)(l.a,{to:{pathname:"/wifi"}}):Object(h.jsx)(t,Object(j.a)({},e))}}))},p=["component"],x=function(e){var t=e.component,n=Object(u.a)(e,p);return Object(h.jsx)(l.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return d()?Object(h.jsx)(t,Object(j.a)({},e)):Object(h.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},m=n(85),g=n.n(m).a.create({baseURL:"/api"});g.interceptors.request.use((function(e){var t=d();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));var v=n(189),w=n(137),k=n(190),y=n(173),S=n(32),N=n(19),C=n(47),P=n(46),W=n(38),A=n(171),I=(n(129),n.p+"static/media/logo.daee85b9.png"),q=function(e){Object(C.a)(n,e);var t=Object(P.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"auth-main",children:Object(h.jsx)("div",{className:"auth-content",children:Object(h.jsxs)("div",{className:"auth-card",children:[Object(h.jsx)("img",{src:I,alt:"Logo",className:"auth-logo"}),Object(h.jsx)(W.a,{variant:"h5",component:"h2",color:"black",textAlign:"center",children:this.props.header}),Object(h.jsx)(A.a,{size:"large",className:"auth-form",children:this.props.children})]})})})}}]),n}(a.Component),L=n(172),R=n(136),T=n(86),D=n.n(T),E=n(87),F=n.n(E),B=function(e){Object(C.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showPassword:!1},e.onToggleShowPassword=function(){return e.setState((function(e){return{showPassword:!e.showPassword}}))},e}return Object(N.a)(n,[{key:"render",value:function(){var e=this.state.showPassword,t=this.props,n=t.id,a=t.name,s=t.value,r=t.placeholder,c=t.onChange,i=t.className;return Object(h.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:a,label:r,id:n,type:e?"text":"password",value:s,onChange:c,className:i,InputProps:{endAdornment:Object(h.jsx)(L.a,{position:"end",children:Object(h.jsx)(R.a,{"aria-label":"toggle password visibility",onClick:this.onToggleShowPassword,children:e?Object(h.jsx)(D.a,{}):Object(h.jsx)(F.a,{})})})}})}}]),n}(a.Component),J=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(""),o=Object(i.a)(c,2),l=o[0],j=o[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),b=d[0],O=d[1],f=Object(a.useState)(null),p=Object(i.a)(f,2),x=p[0],m=p[1];return Object(h.jsxs)(q,{header:"Network Configuration Utility",children:[Object(h.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"User Name",name:"username",autoFocus:!0,value:s,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)(B,{name:"password",id:"password",icon:"lock",iconPosition:"left",placeholder:"Password",value:l,onChange:function(e){return j(e.target.value)}}),function(e){if(e)return Object(h.jsxs)(k.a,{severity:"error",children:[Object(h.jsx)(y.a,{children:"Login Failed"}),e]})}(x),Object(h.jsx)(w.a,{variant:"contained",color:"primary",disabled:b,onClick:function(){m(null),O(!0);var t=new FormData;t.append("username",s),t.append("password",l),g.post("token",t).then((function(t){var n,a;O(!1),n=t.data.token,a=s,sessionStorage.setItem("token",n),sessionStorage.setItem("user",JSON.stringify(a)),e.history.push("/netconfig")})).catch((function(e){console.log(e),O(!1),401===e.response.status||400===e.response.status?m(e.response.data.detail):422===e.response.status?m("Required field is missing or incorrectly formatted."):m("Something went wrong. Please report this error.")}))},fullWidth:!0,children:b?"Loading...":"Login"})]})},K=n(191),U=n(185),z=n(188),G=n(186),M=n(187),Y=n(24),H=n(174),Q=n(5),V=n(175),X=n(176),Z=n(177),$=n(181),_=n(178),ee=n(179),te=n(180),ne=function(e){var t=Object(a.useState)(e.ssid),n=Object(i.a)(t,2),s=n[0],r=(n[1],Object(a.useState)(e.psk)),c=Object(i.a)(r,2),o=c[0],l=(c[1],Object(a.useState)(!1)),j=Object(i.a)(l,2),u=j[0],d=j[1],b=Object(a.useState)(null),O=Object(i.a)(b,2),f=(O[0],O[1]),p=Object(a.useState)(!1),x=Object(i.a)(p,2),m=(x[0],x[1]);return Object(h.jsx)(H.a,{item:!0,xs:12,sm:12,children:Object(h.jsxs)(V.a,{variant:"outlined",width:"100%",children:[Object(h.jsx)(X.a,{className:"network-header",title:s,action:Object(h.jsxs)(Z.a,{variant:"contained",children:[Object(h.jsx)(R.a,{"aria-label":"psk visibility toggle",color:"primary",onClick:function(){d(!u)},children:u?Object(h.jsx)(_.a,{}):Object(h.jsx)(ee.a,{})}),Object(h.jsx)(R.a,{"aria-label":"delete",color:"secondary",onClick:function(t){t.preventDefault(),m(!0),g.post("wifi/networks/remove",s).then((function(t){e.onRemove(s),m(!1)})).catch((function(e){console.log(e),m(!1),401===e.response.status||400===e.response.status||409===e.response.status||416===e.response.status?f(e.response.data.detail):422===e.response.status?f("Required field is missing or incorrectly formatted."):f("Something went wrong. Please report this error.")}))},children:Object(h.jsx)(te.a,{})})]})}),Object(h.jsx)($.a,{className:"network-detail",children:Object(h.jsxs)(W.a,{variant:"body1",children:[" PSK: ",u?o:"********"," "]})})]})})},ae=n(15),se={ssid:"",psk:""},re=function(e){var t=Object(a.useState)(se),n=Object(i.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],u=o[1],d=Object(a.useState)(null),b=Object(i.a)(d,2),O=b[0],f=b[1],p=function(e){var t=e.target,n=t.name,a=t.value;r(Object(j.a)(Object(j.a)({},s),{},Object(ae.a)({},n,a)))},x=function(t){t.preventDefault(),f(null),u(!0),g.post("wifi/networks/add",s).then((function(t){e.handler(s),u(!1)})).catch((function(e){console.log(e),u(!1),401===e.response.status||400===e.response.status||409===e.response.status||416===e.response.status?f(e.response.data.detail):422===e.response.status?f("Required field is missing or incorrectly formatted."):f("Something went wrong. Please report this error.")}))};return Object(h.jsx)("form",{onSubmit:x,children:Object(h.jsxs)(H.a,{container:!0,children:[Object(h.jsx)(H.a,{item:!0,xs:12,children:Object(h.jsx)(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"ssid-input",name:"ssid",label:"SSID",type:"text",value:s.ssid,onChange:p})}),Object(h.jsx)(H.a,{item:!0,xs:12,children:Object(h.jsx)(B,{id:"psk-input",name:"psk",label:"WPA2 PSK",icon:"lock",iconPosition:"left",placeholder:"WPA2 PSK",value:s.psk,onChange:p})}),Object(h.jsx)(H.a,{item:!0,xs:12,children:function(e){if(e)return Object(h.jsxs)(k.a,{severity:"error",children:[Object(h.jsx)(y.a,{children:"Add Network Failed"}),e]})}(O)}),Object(h.jsx)(H.a,{item:!0,xs:12,children:Object(h.jsx)(w.a,{variant:"contained",color:"primary",disabled:l,onClick:x,fullWidth:!0,type:"submit",children:l?"Working...":"Add Wifi Network"})})]})})},ce=Object(Q.a)((function(e){return{root:{flexGrow:1}}}))((function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(!0),o=Object(i.a)(c,2),l=(o[0],o[1]),j=e.classes;Object(a.useEffect)((function(){l(!0),g.get("wifi/networks/show").then((function(e){r(e.data),l(!1)})).catch((function(e){console.log(e),l(!1)}))}),[]);var u=function(e){var t=s.filter((function(t){return t.ssid!==e}));r(t)};return Object(h.jsxs)("div",{width:"100%",className:j.root,children:[Object(h.jsx)("h4",{children:" Configured Wifi Networks "}),Object(h.jsxs)(k.a,{severity:"info",children:["There ",1===s.length?"is ":"are ",s.length," configured Wifi network",1===s.length?"":"s"," "]}),Object(h.jsx)(H.a,{container:!0,spacing:2,width:"100%",children:s&&s.map((function(e){return Object(h.jsx)(ne,{ssid:e.ssid,psk:e.psk,onRemove:u},e.ssid)}))}),Object(h.jsx)("h4",{children:" Add New Wifi Network "}),Object(h.jsx)(re,{handler:function(e){var t=[].concat(Object(Y.a)(s),[e]);r(t)}})]})})),ie=n(182),oe=n(183),le=n(184);function je(){return Object(h.jsxs)(W.a,{variant:"body2",color:"textSecondary",children:["Copyright \xa9 ",Object(h.jsx)(ie.a,{color:"inherit",href:"https://github.com/ebs-universe",children:"Embedded Bootstraps"})," ",(new Date).getFullYear(),"."]})}var ue=Object(oe.a)((function(e){return{main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{textAlign:"center",padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function de(){var e=ue();return Object(h.jsx)("footer",{className:e.footer,children:Object(h.jsxs)(le.a,{maxWidth:"sm",children:[Object(h.jsxs)(W.a,{variant:"body1",children:["Powered by "," ",Object(h.jsx)(ie.a,{color:"inherit",href:"https://github.com/chintal/ebs-linuxnode-netconfig",children:"ebs-iot-netconfig"})]}),Object(h.jsx)(je,{})]})})}n(132);var be=function(e){Object(C.a)(n,e);var t=Object(P.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"base-page",children:[Object(h.jsx)("div",{className:"base-content",children:this.props.children}),Object(h.jsx)(de,{})]})}}]),n}(a.Component),he=(n(133),function(e){var t=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}();return Object(h.jsxs)(be,{children:[Object(h.jsxs)(K.a,{defaultExpanded:!0,children:[Object(h.jsxs)(U.a,{expandIcon:Object(h.jsx)(G.a,{}),"aria-controls":"wifi-panel-content",id:"wifi-panel-header",children:[Object(h.jsx)(M.a,{}),Object(h.jsx)(W.a,{variant:"h5",children:"Wifi Configuration"})]}),Object(h.jsx)(z.a,{children:Object(h.jsx)(ce,{})})]}),Object(h.jsxs)(k.a,{severity:"info",children:[" Logged in as ",t," "]}),Object(h.jsx)(w.a,{variant:"contained",color:"secondary",onClick:function(){b(),e.history.push("/login")},fullWidth:!0,children:" Logout"})]})});var Oe=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){g.get("verifyToken").then((function(e){s(!1)})).catch((function(e){b(),s(!1)}))}),[]),n&&d()?Object(h.jsx)("div",{className:"content",children:" Checking Authentication ... "}):Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(o.a,{children:[Object(h.jsx)(l.a,{exact:!0,from:"/",to:"/netconfig"}),Object(h.jsx)("div",{className:"content",children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(f,{path:"/login",component:J}),Object(h.jsx)(x,{path:"/netconfig",component:he})]})})]})})};c.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(Oe,{})}),document.getElementById("root"))},99:function(e,t,n){}},[[134,1,2]]]);
//# sourceMappingURL=main.7215c13f.chunk.js.map