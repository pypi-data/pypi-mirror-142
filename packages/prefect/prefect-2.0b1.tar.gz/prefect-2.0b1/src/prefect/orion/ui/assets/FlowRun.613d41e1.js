import{e as E,a2 as S,k as x,l as f,aU as T,f as o,aV as W,aA as j,aW as z,o as i,c as p,d as _,a as g,u as a,F as U,ax as B,t as L,g as M,w as X,aX as $,h as m,n as G,I as C,i as H,r as R}from"./vendor.25aa5a2e.js";import{_ as J,A as v,E as k}from"./index.ecdfde13.js";const K={key:0,class:"text-truncate d-flex align-center"},O={class:"ml-5"},Q=C(" Flow Version: "),Y={class:"font-weight-semibold"},Z=C(" Copy Run ID "),ee=E({async setup(te){let r,w;const h=S(),t=H(),P=x(null),s=x(t==null?void 0:t.params.id),F=f(t,()=>{s.value=t==null?void 0:t.params.id});T(()=>{F()});const V=o(()=>{var e;return(e=n.value.flow_version)!=null?e:"--"}),q=o(()=>({id:s.value})),l=([r,w]=W(()=>v.query({endpoint:k.flow_run,body:q,options:{pollInterval:5e3}}).fetch()),r=await r,w(),r),A=o(()=>({id:l.response.value.flow_id})),y={flow:v.query({endpoint:k.flow,body:A})},I=o(()=>{var e;return((e=y.flow.response)==null?void 0:e.value)||{}}),n=o(()=>{var e;return((e=l.response)==null?void 0:e.value)||{}}),N=o(()=>{var c,b;const e=[{text:(c=I.value)==null?void 0:c.name},{text:(b=n.value)==null?void 0:b.name,to:""}],d=t.fullPath.includes("/timeline"),u=t.fullPath.includes("/radar");return(d||u)&&(e[1].to=`/flow-run/${s.value}`,d&&e.push({text:"Timeline"}),u&&e.push({text:"Radar"})),e});j(()=>{l.stopPolling(),v.queries.delete(l.id)}),z(()=>{var e;P.value=((e=t.hash)==null?void 0:e.substr(1))||"task_runs"}),f(s,()=>{!s.value||y.flow.fetch()});const D=f(()=>n.value,()=>{n.value.name&&h.all.length==0&&(h.replaceAll([{object:"flow_run",property:"name",type:"string",operation:"equals",value:n.value.name}]),D())});return(e,d)=>{const u=R("bread-crumbs"),c=R("router-view");return i(),p("div",null,[_("div",{class:G(["d-flex align-center justify-space-between mb-2 py-1 position-relative z-1",{blur:a(t).fullPath.includes("/radar")}])},[g(u,{class:"flex-grow-1",crumbs:a(N),icon:"pi-flow-run"},null,8,["crumbs"]),a(t).fullPath.includes("/radar")?(i(),p(U,{key:0},[a(B).sm?(i(),p("div",K,[_("span",O,[Q,_("span",Y,L(a(V)),1)]),a(B).md?(i(),M(a($),{key:0,class:"ml-1",value:s.value,toast:"Run ID was copied to clipboard"},{default:X(()=>[Z]),_:1},8,["value"])):m("",!0)])):m("",!0)],64)):m("",!0)],2),g(c)])}}});var oe=J(ee,[["__scopeId","data-v-5efcccc0"]]);export{oe as default};
