var F=Object.defineProperty,B=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var O=(e,t,o)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&O(e,o,t[o]);if(I)for(var o of I(t))K.call(t,o)&&O(e,o,t[o]);return e},w=(e,t)=>B(e,U(t));var _=(e,t,o)=>(O(e,typeof t!="symbol"?t+"":t,o),o);import{O as P,V as A,r as $,o as r,g as E,w as y,d as s,t as p,c as l,C as g,E as R,F as b,p as q,b as N,a as S,h as x,I as v}from"./vendor.20f3e3c2.js";import{_ as T,A as D,E as k}from"./index.fdb75d7c.js";var G=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,t,o,a)=>{for(var n=a>1?void 0:a?H(t,o):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,o,n):c(n))||n);return a&&n&&G(t,o,n),n};const Q=["cancelled","completed","failed","pending","running","scheduled"],L="orion-color-mode";let V=class extends A{constructor(){super(...arguments);_(this,"colorMode",localStorage.getItem(L)||"Default");_(this,"colorModes",["Default","Achromatomaly","Achromatopsia","Protanomaly","Protaponia","Deuteranomaly","Deuteranopia","Tritanomaly","Tritanopia"]);_(this,"colorMap",{})}showToast(e){this.$toast(w(C({},e),{timeout:1e4}))}mounted(){const e=window.getComputedStyle(document.documentElement);this.colorModes.forEach(t=>{const o=t.toLowerCase();this.colorMap[t]=[],Q.forEach(a=>{const n=`--${a}-${o}`,i=e.getPropertyValue(n);i&&this.colorMap[t].push(i)})})}};V=J([P({components:{},watch:{colorMode(e){localStorage.setItem(L,e),document.body.classList.forEach(o=>{o.includes("-color-mode")&&document.body.classList.remove(o)}),document.body.classList.add(`${e.toLowerCase()}-color-mode`),this.showToast({type:"success",message:"Color theme saved"})}}})],V);const W=V,X=e=>(q("data-v-ed8cfeba"),e=e(),N(),e),Y={class:"theme-option d-flex align-center"},Z=X(()=>s("i",{class:"pi pi-palette-line mr-1"},null,-1)),ee={class:"theme-option__label"},te={class:"theme-palette ml-auto"},oe={class:"theme-option d-flex align-center"},se={class:"theme-option__label"},ne={class:"theme-palette ml-auto"};function ae(e,t,o,a,n,i){const c=$("m-simple-select");return r(),E(c,{modelValue:e.colorMode,"onUpdate:modelValue":t[0]||(t[0]=d=>e.colorMode=d),options:e.colorModes,search:""},{"selected-option-label":y(({label:d})=>[s("div",Y,[Z,s("span",ee,p(d),1),s("div",te,[(r(!0),l(b,null,g(e.colorMap[e.colorMode],u=>(r(),l("div",{key:u,class:"palette-option",style:R({"background-color":u})},null,4))),128))])])]),"option-label":y(({label:d})=>[s("div",oe,[s("span",se,p(d),1),s("div",ne,[(r(!0),l(b,null,g(e.colorMap[d],u=>(r(),l("div",{key:u,class:"palette-option",style:R({"background-color":u})},null,4))),128))])])]),_:1},8,["modelValue","options"])}var re=T(W,[["render",ae],["__scopeId","data-v-ed8cfeba"]]);var le=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,ce=(e,t,o,a)=>{for(var n=a>1?void 0:a?ie(t,o):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,o,n):c(n))||n);return a&&n&&le(t,o,n),n};let j=class extends A{constructor(){super(...arguments);_(this,"queries",{settings:D.query({endpoint:k.settings}),version:D.query({endpoint:k.version})});_(this,"resetDatabaseConfirmation","");_(this,"showResetSection",!1)}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=w(C({},this.settings),{base:{}});return Object.entries(e).forEach(([t,o])=>{this.objectCheck(o)?e[t]=o:(e.base[t]=o,delete e[t])}),this.flatten(Object.entries(e)).sort((t,o)=>t.key.toUpperCase().localeCompare(o.key.toUpperCase()))}async resetDatabase(){const e=await D.query({endpoint:k.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",message:e.error?e.error:"Database reset"})}showToast(e){this.$toast(w(C({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((t,[o,a])=>{const n={key:o,content:void 0};return this.objectCheck(a)?n.content=this.flatten(Object.entries(a)):n.content=a,t.push(n),t},[])}};j=ce([P({components:{StateColorModeSelector:re}})],j);const de=j,h=e=>(q("data-v-4ff04c1c"),e=e(),N(),e),pe={class:"d-flex align-center justify-space-between mt-2"},ue=h(()=>s("span",{class:"d-flex align-center"},[s("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),s("h1",{class:"ml-1"},"Settings")],-1)),me={class:"font-weight-semibold"},_e=h(()=>s("span",{class:"text--grey-40"},"Orion Version:",-1)),he={class:"ml-1"},fe={class:"mt-4"},ye=h(()=>s("h3",{class:"font-weight-semibold my-1"}," Color theme ",-1)),ge={class:"font-weight-semibold setting--section-title my-1"},be={class:"setting--section-content font--secondary caption"},ve={class:"pa-2"},Ce={key:0},we={class:"ml-1"},Se={key:1},$e={class:"ml-1"},Me={class:"my-4"},Oe=h(()=>s("h3",{class:"font-weight-semibold"}," Reset database ",-1)),De=h(()=>s("div",{class:"d-flex align-end my-1 text--error"},[s("i",{class:"pi pi-error-warning-line pi-lg"}),s("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),ke=v(" Reset "),Ve={key:1},je=h(()=>s("div",null," Are you sure you want to permanently delete your data? ",-1)),Ie=h(()=>s("div",null,[v(" If so, type the word "),s("span",{class:"text--error"},"CONFIRM"),v(" to proceed. ")],-1)),Re=v(" Reset Database "),xe=v(" Cancel ");function Pe(e,t,o,a,n,i){const c=$("StateColorModeSelector"),d=$("m-button"),u=$("m-input");return r(),l("div",null,[s("header",pe,[ue,s("span",me,[_e,s("span",he,p(e.version),1)])]),s("section",fe,[ye,S(c)]),(r(!0),l(b,null,g(e.settingsSections,m=>(r(),l("section",{key:m.label,class:"mt-4 setting--section my-2"},[s("h3",ge,p(m.key),1),s("section",be,[s("div",ve,[(r(!0),l(b,null,g(m.content,f=>(r(),l("div",{key:f.key},[Array.isArray(f.content)?(r(),l("div",Ce,[(r(!0),l(b,null,g(f.content,M=>(r(),l("section",{key:M.key,class:"setting--section-subsection"},[s("span",null,p(M.key)+":",1),s("span",we,p(M.content),1)]))),128))])):(r(),l("div",Se,[s("span",null,p(f.key)+":",1),s("span",$e,p(f.content),1)]))]))),128))])])]))),128)),s("section",Me,[Oe,De,e.showResetSection?x("",!0):(r(),E(d,{key:0,color:"delete",height:"36px",width:"100px",class:"mt-1",miter:"",onClick:t[0]||(t[0]=m=>e.showResetSection=!0)},{default:y(()=>[ke]),_:1})),e.showResetSection?(r(),l("section",Ve,[je,Ie,S(u,{modelValue:e.resetDatabaseConfirmation,"onUpdate:modelValue":t[1]||(t[1]=m=>e.resetDatabaseConfirmation=m),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),s("div",null,[S(d,{color:"delete",height:"36px",disabled:e.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:e.resetDatabase},{default:y(()=>[Re]),_:1},8,["disabled","onClick"]),S(d,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:t[2]||(t[2]=m=>e.showResetSection=!1)},{default:y(()=>[xe]),_:1})])])):x("",!0)])])}var Ne=T(de,[["render",Pe],["__scopeId","data-v-4ff04c1c"]]);export{Ne as default};
